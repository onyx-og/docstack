"use strict";(self.webpackChunk_docstack_ui=self.webpackChunk_docstack_ui||[]).push([[9681],{44358:(e,t,o)=>{o.r(t),o.d(t,{CancellationTokenSource:()=>b,Emitter:()=>R,KeyCode:()=>C,KeyMod:()=>j,MarkerSeverity:()=>W,MarkerTag:()=>B,Position:()=>O,Range:()=>D,Selection:()=>N,SelectionDirection:()=>q,Token:()=>U,Uri:()=>K,editor:()=>L,languages:()=>Q});var n=o(90853),r=o(37970),i=o(91158),s=o(24653),a=o(6995),c=o(31710),d=o(73226),l=o(73179),u=o(70092),g=o(69708),m=o(5839),v=(o(60891),o(81304)),p=(o(32293),o(48053)),f=o(49693),y=o(35184),k=o(17531),h=o(12003);const M=(0,y.u1)("IEditorCancelService"),E=new f.N1("cancellableOperation",!1,(0,h.kg)("cancellableOperation","Whether the editor runs a cancellable operation, e.g. like 'Peek References'"));(0,k.v)(M,class{constructor(){this._tokens=new WeakMap}add(e,t){let o,n=this._tokens.get(e);return n||(n=e.invokeWithinContext(e=>({key:E.bindTo(e.get(f.fN)),tokens:new u.w})),this._tokens.set(e,n)),n.key.set(!0),o=n.tokens.push(t),()=>{o&&(o(),n.key.set(!n.tokens.isEmpty()),o=void 0)}}cancel(e){const t=this._tokens.get(e);if(!t)return;const o=t.tokens.pop();o&&(o.cancel(),t.key.set(!t.tokens.isEmpty()))}},1),c.Qi,(0,p.E_)(new class extends p.DX{constructor(){super({id:"editor.cancelOperation",kbOpts:{weight:100,primary:9},precondition:E})}runEditorCommand(e,t){e.get(M).cancel(t)}}),c.Qi,o(38159);var I=o(55818),w=(o(15719),o(22143)),x=o(77768),S=o(5536),F=o(14752),T=o(33653);o(69570),o(1850);class P{static{this._selectors=new u.w}static setFormatterSelector(e){return{dispose:P._selectors.unshift(e)}}static async select(e,t,o,n){if(0===e.length)return;const r=l.f.first(P._selectors);return r?await r(e,t,o,n):void 0}}S.w.registerCommand("_executeFormatRangeProvider",async function(e,...t){const[o,n,r]=t;(0,g.j)(m.r.isUri(o)),(0,g.j)(v.Q.isIRange(n));const i=e.get(x.ITextModelService),s=e.get(w.IEditorWorkerService),l=e.get(T.ILanguageFeaturesService),u=await i.createModelReference(o);try{return async function(e,t,o,n,r,i){const s=t.documentRangeFormattingEditProvider.ordered(o);for(const t of s){const s=await Promise.resolve(t.provideDocumentRangeFormattingEdits(o,n,r,i)).catch(d.M_);if((0,a.EI)(s))return await e.computeMoreMinimalEdits(o.uri,s)}}(s,l,u.object.textEditorModel,v.Q.lift(n),r,c.XO.None)}finally{u.dispose()}}),S.w.registerCommand("_executeFormatDocumentProvider",async function(e,...t){const[o,n]=t;(0,g.j)(m.r.isUri(o));const r=e.get(x.ITextModelService),i=e.get(w.IEditorWorkerService),s=e.get(T.ILanguageFeaturesService),l=await r.createModelReference(o);try{return async function(e,t,o,n,r){const i=function(e,t,o){const n=[],r=new F.Z,i=e.ordered(o);for(const e of i)n.push(e),e.extensionId&&r.add(e.extensionId);const s=t.ordered(o);for(const e of s){if(e.extensionId){if(r.has(e.extensionId))continue;r.add(e.extensionId)}n.push({displayName:e.displayName,extensionId:e.extensionId,provideDocumentFormattingEdits:(t,o,n)=>e.provideDocumentRangeFormattingEdits(t,t.getFullModelRange(),o,n)})}return n}(t.documentFormattingEditProvider,t.documentRangeFormattingEditProvider,o);for(const t of i){const i=await Promise.resolve(t.provideDocumentFormattingEdits(o,n,r)).catch(d.M_);if((0,a.EI)(i))return await e.computeMoreMinimalEdits(o.uri,i)}}(i,s,l.object.textEditorModel,n,c.XO.None)}finally{l.dispose()}}),S.w.registerCommand("_executeFormatOnTypeProvider",async function(e,...t){const[o,n,r,i]=t;(0,g.j)(m.r.isUri(o)),(0,g.j)(I.y.isIPosition(n)),(0,g.j)("string"==typeof r);const s=e.get(x.ITextModelService),a=e.get(w.IEditorWorkerService),l=e.get(T.ILanguageFeaturesService),u=await s.createModelReference(o);try{return function(e,t,o,n,r,i,s){const a=t.onTypeFormattingEditProvider.ordered(o);return 0===a.length||a[0].autoFormatTriggerCharacters.indexOf(r)<0?Promise.resolve(void 0):Promise.resolve(a[0].provideOnTypeFormattingEdits(o,n,r,i,s)).catch(d.M_).then(t=>e.computeMoreMinimalEdits(o.uri,t))}(a,l,u.object.textEditorModel,I.y.lift(n),r,i,c.XO.None)}finally{u.dispose()}}),n.qB.wrappingIndent.defaultValue=0,n.qB.glyphMargin.defaultValue=!1,n.qB.autoIndent.defaultValue=3,n.qB.overviewRulerLanes.defaultValue=2,P.setFormatterSelector((e,t,o)=>Promise.resolve(e[0]));const _=(0,r.createMonacoBaseAPI)();_.editor=(0,i.ZK)(),_.languages=(0,s.Np)();const b=_.CancellationTokenSource,R=_.Emitter,C=_.KeyCode,j=_.KeyMod,O=_.Position,D=_.Range,N=_.Selection,q=_.SelectionDirection,W=_.MarkerSeverity,B=_.MarkerTag,K=_.Uri,U=_.Token,L=_.editor,Q=_.languages,V=globalThis.MonacoEnvironment;(V?.globalAPI||"function"==typeof define&&o.amdO)&&(globalThis.monaco=_),void 0!==globalThis.require&&"function"==typeof globalThis.require.config&&globalThis.require.config({ignoreDuplicateModules:["vscode-languageserver-types","vscode-languageserver-types/main","vscode-languageserver-textdocument","vscode-languageserver-textdocument/main","vscode-nls","vscode-nls/vscode-nls","jsonc-parser","jsonc-parser/main","vscode-uri","vscode-uri/index","vs/basic-languages/typescript/typescript"]})}}]);