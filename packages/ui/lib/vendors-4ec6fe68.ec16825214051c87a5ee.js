"use strict";(self.webpackChunk_docstack_ui=self.webpackChunk_docstack_ui||[]).push([[9122],{5870:(e,t,n)=>{n.d(t,{k:()=>s,x:()=>l});var i=n(19031),o=n(15801);function r(e){return e.replace(/\n/g,"\\n").replace(/\r/g,"\\r")}class s{get oldLength(){return this.oldText.length}get oldEnd(){return this.oldPosition+this.oldText.length}get newLength(){return this.newText.length}get newEnd(){return this.newPosition+this.newText.length}constructor(e,t,n,i){this.oldPosition=e,this.oldText=t,this.newPosition=n,this.newText=i}toString(){return 0===this.oldText.length?`(insert@${this.oldPosition} "${r(this.newText)}")`:0===this.newText.length?`(delete@${this.oldPosition} "${r(this.oldText)}")`:`(replace@${this.oldPosition} "${r(this.oldText)}" with "${r(this.newText)}")`}static _writeStringSize(e){return 4+2*e.length}static _writeString(e,t,n){const o=t.length;i.Sw(e,o,n),n+=4;for(let r=0;r<o;r++)i.gN(e,t.charCodeAt(r),n),n+=2;return n}static _readString(e,t){const n=i.bb(e,t);return t+=4,(0,o.Su)(e,t,n)}writeSize(){return 8+s._writeStringSize(this.oldText)+s._writeStringSize(this.newText)}write(e,t){return i.Sw(e,this.oldPosition,t),t+=4,i.Sw(e,this.newPosition,t),t+=4,t=s._writeString(e,this.oldText,t),s._writeString(e,this.newText,t)}static read(e,t,n){const o=i.bb(e,t);t+=4;const r=i.bb(e,t);t+=4;const l=s._readString(e,t);t+=s._writeStringSize(l);const a=s._readString(e,t);return t+=s._writeStringSize(a),n.push(new s(o,l,r,a)),t}}function l(e,t){return null===e||0===e.length?t:new a(e,t).compress()}class a{constructor(e,t){this._prevEdits=e,this._currEdits=t,this._result=[],this._resultLen=0,this._prevLen=this._prevEdits.length,this._prevDeltaOffset=0,this._currLen=this._currEdits.length,this._currDeltaOffset=0}compress(){let e=0,t=0,n=this._getPrev(e),i=this._getCurr(t);for(;e<this._prevLen||t<this._currLen;){if(null===n){this._acceptCurr(i),i=this._getCurr(++t);continue}if(null===i){this._acceptPrev(n),n=this._getPrev(++e);continue}if(i.oldEnd<=n.newPosition){this._acceptCurr(i),i=this._getCurr(++t);continue}if(n.newEnd<=i.oldPosition){this._acceptPrev(n),n=this._getPrev(++e);continue}if(i.oldPosition<n.newPosition){const[e,t]=a._splitCurr(i,n.newPosition-i.oldPosition);this._acceptCurr(e),i=t;continue}if(n.newPosition<i.oldPosition){const[e,t]=a._splitPrev(n,i.oldPosition-n.newPosition);this._acceptPrev(e),n=t;continue}let o,r;if(i.oldEnd===n.newEnd)o=n,r=i,n=this._getPrev(++e),i=this._getCurr(++t);else if(i.oldEnd<n.newEnd){const[e,s]=a._splitPrev(n,i.oldLength);o=e,r=i,n=s,i=this._getCurr(++t)}else{const[t,s]=a._splitCurr(i,n.newLength);o=n,r=t,n=this._getPrev(++e),i=s}this._result[this._resultLen++]=new s(o.oldPosition,o.oldText,r.newPosition,r.newText),this._prevDeltaOffset+=o.newLength-o.oldLength,this._currDeltaOffset+=r.newLength-r.oldLength}const o=a._merge(this._result);return a._removeNoOps(o)}_acceptCurr(e){this._result[this._resultLen++]=a._rebaseCurr(this._prevDeltaOffset,e),this._currDeltaOffset+=e.newLength-e.oldLength}_getCurr(e){return e<this._currLen?this._currEdits[e]:null}_acceptPrev(e){this._result[this._resultLen++]=a._rebasePrev(this._currDeltaOffset,e),this._prevDeltaOffset+=e.newLength-e.oldLength}_getPrev(e){return e<this._prevLen?this._prevEdits[e]:null}static _rebaseCurr(e,t){return new s(t.oldPosition-e,t.oldText,t.newPosition,t.newText)}static _rebasePrev(e,t){return new s(t.oldPosition,t.oldText,t.newPosition+e,t.newText)}static _splitPrev(e,t){const n=e.newText.substr(0,t),i=e.newText.substr(t);return[new s(e.oldPosition,e.oldText,e.newPosition,n),new s(e.oldEnd,"",e.newPosition+t,i)]}static _splitCurr(e,t){const n=e.oldText.substr(0,t),i=e.oldText.substr(t);return[new s(e.oldPosition,n,e.newPosition,e.newText),new s(e.oldPosition+t,i,e.newEnd,"")]}static _merge(e){if(0===e.length)return e;const t=[];let n=0,i=e[0];for(let o=1;o<e.length;o++){const r=e[o];i.oldEnd===r.oldPosition?i=new s(i.oldPosition,i.oldText+r.oldText,i.newPosition,i.newText+r.newText):(t[n++]=i,i=r)}return t[n++]=i,t}static _removeNoOps(e){if(0===e.length)return e;const t=[];let n=0;for(let i=0;i<e.length;i++){const o=e[i];o.oldText!==o.newText&&(t[n++]=o)}return t}}},7917:(e,t,n)=>{n.d(t,{g:()=>c});var i=n(60891),o=n(79239),r=n(90130),s=n(10492),l=n(37919),a=n(81304),u=n(55818);class c{static deleteRight(e,t,n,i){const r=[];let s=3!==e;for(let e=0,u=i.length;e<u;e++){const u=i[e];let c=u;if(c.isEmpty()){const e=u.getPosition(),i=l.I.right(t,n,e);c=new a.Q(i.lineNumber,i.column,e.lineNumber,e.column)}c.isEmpty()?r[e]=null:(c.startLineNumber!==c.endLineNumber&&(s=!0),r[e]=new o.iu(c,""))}return[s,r]}static isAutoClosingPairDelete(e,t,n,i,o,s,l){if("never"===t&&"never"===n)return!1;if("never"===e)return!1;for(let a=0,u=s.length;a<u;a++){const u=s[a],c=u.getPosition();if(!u.isEmpty())return!1;const m=o.getLineContent(c.lineNumber);if(c.column<2||c.column>=m.length+1)return!1;const d=m.charAt(c.column-2),h=i.get(d);if(!h)return!1;if((0,r.vG)(d)){if("never"===n)return!1}else if("never"===t)return!1;const g=m.charAt(c.column-1);let f=!1;for(const e of h)e.open===d&&e.close===g&&(f=!0);if(!f)return!1;if("auto"===e){let e=!1;for(let t=0,n=l.length;t<n;t++){const n=l[t];if(c.lineNumber===n.startLineNumber&&c.column===n.startColumn){e=!0;break}}if(!e)return!1}}return!0}static _runAutoClosingPairDelete(e,t,n){const i=[];for(let e=0,t=n.length;e<t;e++){const t=n[e].getPosition(),r=new a.Q(t.lineNumber,t.column-1,t.lineNumber,t.column+1);i[e]=new o.iu(r,"")}return[!0,i]}static deleteLeft(e,t,n,i,r){if(this.isAutoClosingPairDelete(t.autoClosingDelete,t.autoClosingBrackets,t.autoClosingQuotes,t.autoClosingPairs.autoClosingPairsOpenByEnd,n,i,r))return this._runAutoClosingPairDelete(t,n,i);const s=[];let l=2!==e;for(let e=0,r=i.length;e<r;e++){const r=c.getDeleteRange(i[e],n,t);r.isEmpty()?s[e]=null:(r.startLineNumber!==r.endLineNumber&&(l=!0),s[e]=new o.iu(r,""))}return[l,s]}static getDeleteRange(e,t,n){if(!e.isEmpty())return e;const o=e.getPosition();if(n.useTabStops&&o.column>1){const e=t.getLineContent(o.lineNumber),r=i.HG(e),l=-1===r?e.length+1:r+1;if(o.column<=l){const e=n.visibleColumnFromColumn(t,o),i=s.A.prevIndentTabStop(e,n.indentSize),r=n.columnFromVisibleColumn(t,o.lineNumber,i);return new a.Q(o.lineNumber,r,o.lineNumber,o.column)}}return a.Q.fromPositions(c.getPositionAfterDeleteLeft(o,t),o)}static getPositionAfterDeleteLeft(e,t){if(e.column>1){const n=i.Wd(e.column-1,t.getLineContent(e.lineNumber));return e.with(void 0,n+1)}if(e.lineNumber>1){const n=e.lineNumber-1;return new u.y(n,t.getLineMaxColumn(n))}return e}static cut(e,t,n){const i=[];let s=null;n.sort((e,t)=>u.y.compare(e.getStartPosition(),t.getEndPosition()));for(let r=0,l=n.length;r<l;r++){const l=n[r];if(l.isEmpty())if(e.emptySelectionClipboard){const e=l.getPosition();let n,u,c,m;e.lineNumber<t.getLineCount()?(n=e.lineNumber,u=1,c=e.lineNumber+1,m=1):e.lineNumber>1&&s?.endLineNumber!==e.lineNumber?(n=e.lineNumber-1,u=t.getLineMaxColumn(e.lineNumber-1),c=e.lineNumber,m=t.getLineMaxColumn(e.lineNumber)):(n=e.lineNumber,u=1,c=e.lineNumber,m=t.getLineMaxColumn(e.lineNumber));const d=new a.Q(n,u,c,m);s=d,d.isEmpty()?i[r]=null:i[r]=new o.iu(d,"")}else i[r]=null;else i[r]=new o.iu(l,"")}return new r.vY(0,i,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}}},15719:(e,t,n)=>{n.d(t,{L:()=>r});var i=n(55818),o=n(81304);class r extends o.Q{constructor(e,t,n,i){super(e,t,n,i),this.selectionStartLineNumber=e,this.selectionStartColumn=t,this.positionLineNumber=n,this.positionColumn=i}toString(){return"["+this.selectionStartLineNumber+","+this.selectionStartColumn+" -> "+this.positionLineNumber+","+this.positionColumn+"]"}equalsSelection(e){return r.selectionsEqual(this,e)}static selectionsEqual(e,t){return e.selectionStartLineNumber===t.selectionStartLineNumber&&e.selectionStartColumn===t.selectionStartColumn&&e.positionLineNumber===t.positionLineNumber&&e.positionColumn===t.positionColumn}getDirection(){return this.selectionStartLineNumber===this.startLineNumber&&this.selectionStartColumn===this.startColumn?0:1}setEndPosition(e,t){return 0===this.getDirection()?new r(this.startLineNumber,this.startColumn,e,t):new r(e,t,this.startLineNumber,this.startColumn)}getPosition(){return new i.y(this.positionLineNumber,this.positionColumn)}getSelectionStart(){return new i.y(this.selectionStartLineNumber,this.selectionStartColumn)}setStartPosition(e,t){return 0===this.getDirection()?new r(e,t,this.endLineNumber,this.endColumn):new r(this.endLineNumber,this.endColumn,e,t)}static fromPositions(e,t=e){return new r(e.lineNumber,e.column,t.lineNumber,t.column)}static fromRange(e,t){return 0===t?new r(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):new r(e.endLineNumber,e.endColumn,e.startLineNumber,e.startColumn)}static liftSelection(e){return new r(e.selectionStartLineNumber,e.selectionStartColumn,e.positionLineNumber,e.positionColumn)}static selectionsArrEqual(e,t){if(e&&!t||!e&&t)return!1;if(!e&&!t)return!0;if(e.length!==t.length)return!1;for(let n=0,i=e.length;n<i;n++)if(!this.selectionsEqual(e[n],t[n]))return!1;return!0}static isISelection(e){return e&&"number"==typeof e.selectionStartLineNumber&&"number"==typeof e.selectionStartColumn&&"number"==typeof e.positionLineNumber&&"number"==typeof e.positionColumn}static createWithDirection(e,t,n,i,o){return 0===o?new r(e,t,n,i):new r(n,i,e,t)}}},15801:(e,t,n)=>{n.d(t,{Su:()=>m,b7:()=>c,fe:()=>d});var i=n(60891),o=n(69958),r=n(19031);let s,l,a;function u(){return s||(s=new TextDecoder("UTF-16LE")),s}function c(){return a||(a=o.cm()?u():(l||(l=new TextDecoder("UTF-16BE")),l)),a}function m(e,t,n){const i=new Uint16Array(e.buffer,t,n);return n>0&&(65279===i[0]||65534===i[0])?function(e,t,n){const i=[];let o=0;for(let s=0;s<n;s++){const n=r.$l(e,t);t+=2,i[o++]=String.fromCharCode(n)}return i.join("")}(e,t,n):u().decode(i)}class d{constructor(e){this._capacity=0|e,this._buffer=new Uint16Array(this._capacity),this._completedStrings=null,this._bufferLength=0}reset(){this._completedStrings=null,this._bufferLength=0}build(){return null!==this._completedStrings?(this._flushBuffer(),this._completedStrings.join("")):this._buildBuffer()}_buildBuffer(){if(0===this._bufferLength)return"";const e=new Uint16Array(this._buffer.buffer,0,this._bufferLength);return c().decode(e)}_flushBuffer(){const e=this._buildBuffer();this._bufferLength=0,null===this._completedStrings?this._completedStrings=[e]:this._completedStrings[this._completedStrings.length]=e}appendCharCode(e){const t=this._capacity-this._bufferLength;t<=1&&(0===t||i.pc(e))&&this._flushBuffer(),this._buffer[this._bufferLength++]=e}appendASCIICharCode(e){this._bufferLength===this._capacity&&this._flushBuffer(),this._buffer[this._bufferLength++]=e}appendString(e){const t=e.length;if(this._bufferLength+t>=this._capacity)return this._flushBuffer(),void(this._completedStrings[this._completedStrings.length]=e);for(let n=0;n<t;n++)this._buffer[this._bufferLength++]=e.charCodeAt(n)}}},21029:(e,t,n)=>{n.d(t,{_:()=>b});var i=n(73226),o=n(60891),r=n(6995),s=n(35380),l=n(90130),a=n(55818),u=n(81304),c=n(15719);class m{constructor(e){this._selTrackedRange=null,this._trackSelection=!0,this._setState(e,new l.mG(new u.Q(1,1,1,1),0,0,new a.y(1,1),0),new l.mG(new u.Q(1,1,1,1),0,0,new a.y(1,1),0))}dispose(e){this._removeTrackedRange(e)}startTrackingSelection(e){this._trackSelection=!0,this._updateTrackedRange(e)}stopTrackingSelection(e){this._trackSelection=!1,this._removeTrackedRange(e)}_updateTrackedRange(e){this._trackSelection&&(this._selTrackedRange=e.model._setTrackedRange(this._selTrackedRange,this.modelState.selection,0))}_removeTrackedRange(e){this._selTrackedRange=e.model._setTrackedRange(this._selTrackedRange,null,0)}asCursorState(){return new l.MF(this.modelState,this.viewState)}readSelectionFromMarkers(e){const t=e.model._getTrackedRange(this._selTrackedRange);return this.modelState.selection.isEmpty()&&!t.isEmpty()?c.L.fromRange(t.collapseToEnd(),this.modelState.selection.getDirection()):c.L.fromRange(t,this.modelState.selection.getDirection())}ensureValidState(e){this._setState(e,this.modelState,this.viewState)}setState(e,t,n){this._setState(e,t,n)}static _validatePositionWithCache(e,t,n,i){return t.equals(n)?i:e.normalizePosition(t,2)}static _validateViewState(e,t){const n=t.position,i=t.selectionStart.getStartPosition(),o=t.selectionStart.getEndPosition(),r=e.normalizePosition(n,2),s=this._validatePositionWithCache(e,i,n,r),a=this._validatePositionWithCache(e,o,i,s);return n.equals(r)&&i.equals(s)&&o.equals(a)?t:new l.mG(u.Q.fromPositions(s,a),t.selectionStartKind,t.selectionStartLeftoverVisibleColumns+i.column-s.column,r,t.leftoverVisibleColumns+n.column-r.column)}_setState(e,t,n){if(n&&(n=m._validateViewState(e.viewModel,n)),t){const n=e.model.validateRange(t.selectionStart),i=t.selectionStart.equalsRange(n)?t.selectionStartLeftoverVisibleColumns:0,o=e.model.validatePosition(t.position),r=t.position.equals(o)?t.leftoverVisibleColumns:0;t=new l.mG(n,t.selectionStartKind,i,o,r)}else{if(!n)return;const i=e.model.validateRange(e.coordinatesConverter.convertViewRangeToModelRange(n.selectionStart)),o=e.model.validatePosition(e.coordinatesConverter.convertViewPositionToModelPosition(n.position));t=new l.mG(i,n.selectionStartKind,n.selectionStartLeftoverVisibleColumns,o,n.leftoverVisibleColumns)}if(n){const i=e.coordinatesConverter.validateViewRange(n.selectionStart,t.selectionStart),o=e.coordinatesConverter.validateViewPosition(n.position,t.position);n=new l.mG(i,t.selectionStartKind,t.selectionStartLeftoverVisibleColumns,o,t.leftoverVisibleColumns)}else{const i=e.coordinatesConverter.convertModelPositionToViewPosition(new a.y(t.selectionStart.startLineNumber,t.selectionStart.startColumn)),o=e.coordinatesConverter.convertModelPositionToViewPosition(new a.y(t.selectionStart.endLineNumber,t.selectionStart.endColumn)),r=new u.Q(i.lineNumber,i.column,o.lineNumber,o.column),s=e.coordinatesConverter.convertModelPositionToViewPosition(t.position);n=new l.mG(r,t.selectionStartKind,t.selectionStartLeftoverVisibleColumns,s,t.leftoverVisibleColumns)}this.modelState=t,this.viewState=n,this._updateTrackedRange(e)}}class d{constructor(e){this.context=e,this.cursors=[new m(e)],this.lastAddedCursorIndex=0}dispose(){for(const e of this.cursors)e.dispose(this.context)}startTrackingSelections(){for(const e of this.cursors)e.startTrackingSelection(this.context)}stopTrackingSelections(){for(const e of this.cursors)e.stopTrackingSelection(this.context)}updateContext(e){this.context=e}ensureValidState(){for(const e of this.cursors)e.ensureValidState(this.context)}readSelectionFromMarkers(){return this.cursors.map(e=>e.readSelectionFromMarkers(this.context))}getAll(){return this.cursors.map(e=>e.asCursorState())}getViewPositions(){return this.cursors.map(e=>e.viewState.position)}getTopMostViewPosition(){return(0,s.kh)(this.cursors,(0,r.VE)(e=>e.viewState.position,a.y.compare)).viewState.position}getBottomMostViewPosition(){return(0,s.ot)(this.cursors,(0,r.VE)(e=>e.viewState.position,a.y.compare)).viewState.position}getSelections(){return this.cursors.map(e=>e.modelState.selection)}getViewSelections(){return this.cursors.map(e=>e.viewState.selection)}setSelections(e){this.setStates(l.MF.fromModelSelections(e))}getPrimaryCursor(){return this.cursors[0].asCursorState()}setStates(e){null!==e&&(this.cursors[0].setState(this.context,e[0].modelState,e[0].viewState),this._setSecondaryStates(e.slice(1)))}_setSecondaryStates(e){const t=this.cursors.length-1,n=e.length;if(t<n){const e=n-t;for(let t=0;t<e;t++)this._addSecondaryCursor()}else if(t>n){const e=t-n;for(let t=0;t<e;t++)this._removeSecondaryCursor(this.cursors.length-2)}for(let t=0;t<n;t++)this.cursors[t+1].setState(this.context,e[t].modelState,e[t].viewState)}killSecondaryCursors(){this._setSecondaryStates([])}_addSecondaryCursor(){this.cursors.push(new m(this.context)),this.lastAddedCursorIndex=this.cursors.length-1}getLastAddedCursorIndex(){return 1===this.cursors.length||0===this.lastAddedCursorIndex?0:this.lastAddedCursorIndex}_removeSecondaryCursor(e){this.lastAddedCursorIndex>=e+1&&this.lastAddedCursorIndex--,this.cursors[e+1].dispose(this.context),this.cursors.splice(e+1,1)}normalize(){if(1===this.cursors.length)return;const e=this.cursors.slice(0),t=[];for(let n=0,i=e.length;n<i;n++)t.push({index:n,selection:e[n].modelState.selection});t.sort((0,r.VE)(e=>e.selection,u.Q.compareRangesUsingStarts));for(let n=0;n<t.length-1;n++){const i=t[n],o=t[n+1],r=i.selection,s=o.selection;if(!this.context.cursorConfig.multiCursorMergeOverlapping)continue;let a;if(a=s.isEmpty()||r.isEmpty()?s.getStartPosition().isBeforeOrEqual(r.getEndPosition()):s.getStartPosition().isBefore(r.getEndPosition()),a){const r=i.index<o.index?n:n+1,s=i.index<o.index?n+1:n,a=t[s].index,u=t[r].index,m=t[s].selection,d=t[r].selection;if(!m.equalsSelection(d)){const n=m.plusRange(d),i=m.selectionStartLineNumber===m.startLineNumber&&m.selectionStartColumn===m.startColumn,o=d.selectionStartLineNumber===d.startLineNumber&&d.selectionStartColumn===d.startColumn;let s,h;a===this.lastAddedCursorIndex?(s=i,this.lastAddedCursorIndex=u):s=o,h=s?new c.L(n.startLineNumber,n.startColumn,n.endLineNumber,n.endColumn):new c.L(n.endLineNumber,n.endColumn,n.startLineNumber,n.startColumn),t[r].selection=h;const g=l.MF.fromModelSelection(h);e[u].setState(this.context,g.modelState,g.viewState)}for(const e of t)e.index>a&&e.index--;e.splice(a,1),t.splice(s,1),this._removeSecondaryCursor(a-1),n--}}}}class h{constructor(e,t,n,i){this._cursorContextBrand=void 0,this.model=e,this.viewModel=t,this.coordinatesConverter=n,this.cursorConfig=i}}var g=n(7917),f=n(35582),C=n(98234),p=n(2520),S=n(76353),w=n(32293),_=n(43326);class b extends w.jG{constructor(e,t,n,i){super(),this._model=e,this._knownModelVersionId=this._model.getVersionId(),this._viewModel=t,this._coordinatesConverter=n,this.context=new h(this._model,this._viewModel,this._coordinatesConverter,i),this._cursors=new d(this.context),this._hasFocus=!1,this._isHandling=!1,this._compositionState=null,this._columnSelectData=null,this._autoClosedActions=[],this._prevEditOperationType=0}dispose(){this._cursors.dispose(),this._autoClosedActions=(0,w.AS)(this._autoClosedActions),super.dispose()}updateConfiguration(e){this.context=new h(this._model,this._viewModel,this._coordinatesConverter,e),this._cursors.updateContext(this.context)}onLineMappingChanged(e){this._knownModelVersionId===this._model.getVersionId()&&this.setStates(e,"viewModel",0,this.getCursorStates())}setHasFocus(e){this._hasFocus=e}_validateAutoClosedActions(){if(this._autoClosedActions.length>0){const e=this._cursors.getSelections();for(let t=0;t<this._autoClosedActions.length;t++){const n=this._autoClosedActions[t];n.isValid(e)||(n.dispose(),this._autoClosedActions.splice(t,1),t--)}}}getPrimaryCursorState(){return this._cursors.getPrimaryCursor()}getLastAddedCursorIndex(){return this._cursors.getLastAddedCursorIndex()}getCursorStates(){return this._cursors.getAll()}setStates(e,t,n,i){let o=!1;const r=this.context.cursorConfig.multiCursorLimit;null!==i&&i.length>r&&(i=i.slice(0,r),o=!0);const s=L.from(this._model,this);return this._cursors.setStates(i),this._cursors.normalize(),this._columnSelectData=null,this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(e,t,n,s,o)}setCursorColumnSelectData(e){this._columnSelectData=e}revealAll(e,t,n,i,o,r){const s=this._cursors.getViewPositions();let l=null,a=null;s.length>1?a=this._cursors.getViewSelections():l=u.Q.fromPositions(s[0],s[0]),e.emitViewEvent(new S.Hf(t,n,l,a,i,o,r))}revealPrimary(e,t,n,i,o,r){const s=[this._cursors.getPrimaryCursor().viewState.selection];e.emitViewEvent(new S.Hf(t,n,null,s,i,o,r))}saveState(){const e=[],t=this._cursors.getSelections();for(let n=0,i=t.length;n<i;n++){const i=t[n];e.push({inSelectionMode:!i.isEmpty(),selectionStart:{lineNumber:i.selectionStartLineNumber,column:i.selectionStartColumn},position:{lineNumber:i.positionLineNumber,column:i.positionColumn}})}return e}restoreState(e,t){const n=[];for(let e=0,i=t.length;e<i;e++){const i=t[e];let o=1,r=1;i.position&&i.position.lineNumber&&(o=i.position.lineNumber),i.position&&i.position.column&&(r=i.position.column);let s=o,l=r;i.selectionStart&&i.selectionStart.lineNumber&&(s=i.selectionStart.lineNumber),i.selectionStart&&i.selectionStart.column&&(l=i.selectionStart.column),n.push({selectionStartLineNumber:s,selectionStartColumn:l,positionLineNumber:o,positionColumn:r})}this.setStates(e,"restoreState",0,l.MF.fromModelSelections(n)),this.revealAll(e,"restoreState",!1,0,!0,1)}onModelContentChanged(e,t){if(t instanceof p.vn){if(this._isHandling)return;this._isHandling=!0;try{this.setStates(e,"modelChange",0,this.getCursorStates())}finally{this._isHandling=!1}}else{const n=t.rawContentChangedEvent;if(this._knownModelVersionId=n.versionId,this._isHandling)return;const i=n.containsEvent(1);if(this._prevEditOperationType=0,i)this._cursors.dispose(),this._cursors=new d(this.context),this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(e,"model",1,null,!1);else if(this._hasFocus&&n.resultingSelection&&n.resultingSelection.length>0){const t=l.MF.fromModelSelections(n.resultingSelection);this.setStates(e,"modelChange",n.isUndoing?5:n.isRedoing?6:2,t)&&this.revealAll(e,"modelChange",!1,0,!0,0)}else{const t=this._cursors.readSelectionFromMarkers();this.setStates(e,"modelChange",2,l.MF.fromModelSelections(t))}}}getSelection(){return this._cursors.getPrimaryCursor().modelState.selection}getTopMostViewPosition(){return this._cursors.getTopMostViewPosition()}getBottomMostViewPosition(){return this._cursors.getBottomMostViewPosition()}getCursorColumnSelectData(){if(this._columnSelectData)return this._columnSelectData;const e=this._cursors.getPrimaryCursor(),t=e.viewState.selectionStart.getStartPosition(),n=e.viewState.position;return{isReal:!1,fromViewLineNumber:t.lineNumber,fromViewVisualColumn:this.context.cursorConfig.visibleColumnFromColumn(this._viewModel,t),toViewLineNumber:n.lineNumber,toViewVisualColumn:this.context.cursorConfig.visibleColumnFromColumn(this._viewModel,n)}}getSelections(){return this._cursors.getSelections()}setSelections(e,t,n,i){this.setStates(e,t,i,l.MF.fromModelSelections(n))}getPrevEditOperationType(){return this._prevEditOperationType}setPrevEditOperationType(e){this._prevEditOperationType=e}_pushAutoClosedAction(e,t){const n=[],i=[];for(let o=0,r=e.length;o<r;o++)n.push({range:e[o],options:{description:"auto-closed-character",inlineClassName:"auto-closed-character",stickiness:1}}),i.push({range:t[o],options:{description:"auto-closed-enclosing",stickiness:1}});const o=this._model.deltaDecorations([],n),r=this._model.deltaDecorations([],i);this._autoClosedActions.push(new v(this._model,o,r))}_executeEditOperation(e){if(!e)return;e.shouldPushStackElementBefore&&this._model.pushStackElement();const t=N.executeCommands(this._model,this._cursors.getSelections(),e.commands);if(t){this._interpretCommandResult(t);const n=[],i=[];for(let t=0;t<e.commands.length;t++){const o=e.commands[t];o instanceof C.Hs&&o.enclosingRange&&o.closeCharacterRange&&(n.push(o.closeCharacterRange),i.push(o.enclosingRange))}n.length>0&&this._pushAutoClosedAction(n,i),this._prevEditOperationType=e.type}e.shouldPushStackElementAfter&&this._model.pushStackElement()}_interpretCommandResult(e){e&&0!==e.length||(e=this._cursors.readSelectionFromMarkers()),this._columnSelectData=null,this._cursors.setSelections(e),this._cursors.normalize()}_emitStateChangedIfNecessary(e,t,n,i,o){const r=L.from(this._model,this);if(r.equals(i))return!1;const s=this._cursors.getSelections(),l=this._cursors.getViewSelections();if(e.emitViewEvent(new S.rg(l,s,n)),!i||i.cursorState.length!==r.cursorState.length||r.cursorState.some((e,t)=>!e.modelState.equals(i.cursorState[t].modelState))){const l=i?i.cursorState.map(e=>e.modelState.selection):null,a=i?i.modelVersionId:0;e.emitOutgoingEvent(new _.S8(l,s,a,r.modelVersionId,t||"keyboard",n,o))}return!0}_findAutoClosingPairs(e){if(!e.length)return null;const t=[];for(let n=0,i=e.length;n<i;n++){const i=e[n];if(!i.text||i.text.indexOf("\n")>=0)return null;const o=i.text.match(/([)\]}>'"`])([^)\]}>'"`]*)$/);if(!o)return null;const r=o[1],s=this.context.cursorConfig.autoClosingPairs.autoClosingPairsCloseSingleChar.get(r);if(!s||1!==s.length)return null;const l=s[0].open,a=i.text.length-o[2].length-1,u=i.text.lastIndexOf(l,a-1);if(-1===u)return null;t.push([u,a])}return t}executeEdits(e,t,n,i){let o=null;"snippet"===t&&(o=this._findAutoClosingPairs(n)),o&&(n[0]._isTracked=!0);const r=[],s=[],l=this._model.pushEditOperations(this.getSelections(),n,e=>{if(o)for(let t=0,n=o.length;t<n;t++){const[n,i]=o[t],l=e[t],a=l.range.startLineNumber,c=l.range.startColumn-1+n,m=l.range.startColumn-1+i;r.push(new u.Q(a,m+1,a,m+2)),s.push(new u.Q(a,c+1,a,m+2))}const t=i(e);return t&&(this._isHandling=!0),t});l&&(this._isHandling=!1,this.setSelections(e,t,l,0)),r.length>0&&this._pushAutoClosedAction(r,s)}_executeEdit(e,t,n,o=0){if(this.context.cursorConfig.readOnly)return;const r=L.from(this._model,this);this._cursors.stopTrackingSelections(),this._isHandling=!0;try{this._cursors.ensureValidState(),e()}catch(e){(0,i.dz)(e)}this._isHandling=!1,this._cursors.startTrackingSelections(),this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(t,n,o,r,!1)&&this.revealAll(t,n,!1,0,!0,0)}getAutoClosedCharacters(){return v.getAllAutoClosedCharacters(this._autoClosedActions)}startComposition(e){this._compositionState=new x(this._model,this.getSelections())}endComposition(e,t){const n=this._compositionState?this._compositionState.deduceOutcome(this._model,this.getSelections()):null;this._compositionState=null,this._executeEdit(()=>{"keyboard"===t&&this._executeEditOperation(f.T.compositionEndWithInterceptors(this._prevEditOperationType,this.context.cursorConfig,this._model,n,this.getSelections(),this.getAutoClosedCharacters()))},e,t)}type(e,t,n){this._executeEdit(()=>{if("keyboard"===n){const e=t.length;let n=0;for(;n<e;){const e=o.iy(t,n),i=t.substr(n,e);this._executeEditOperation(f.T.typeWithInterceptors(!!this._compositionState,this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),this.getAutoClosedCharacters(),i)),n+=e}}else this._executeEditOperation(f.T.typeWithoutInterceptors(this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),t))},e,n)}compositionType(e,t,n,i,o,r){if(0!==t.length||0!==n||0!==i)this._executeEdit(()=>{this._executeEditOperation(f.T.compositionType(this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),t,n,i,o))},e,r);else if(0!==o){const t=this.getSelections().map(e=>{const t=e.getPosition();return new c.L(t.lineNumber,t.column+o,t.lineNumber,t.column+o)});this.setSelections(e,r,t,0)}}paste(e,t,n,i,o){this._executeEdit(()=>{this._executeEditOperation(f.T.paste(this.context.cursorConfig,this._model,this.getSelections(),t,n,i||[]))},e,o,4)}cut(e,t){this._executeEdit(()=>{this._executeEditOperation(g.g.cut(this.context.cursorConfig,this._model,this.getSelections()))},e,t)}executeCommand(e,t,n){this._executeEdit(()=>{this._cursors.killSecondaryCursors(),this._executeEditOperation(new l.vY(0,[t],{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!1}))},e,n)}executeCommands(e,t,n){this._executeEdit(()=>{this._executeEditOperation(new l.vY(0,t,{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!1}))},e,n)}}class L{static from(e,t){return new L(e.getVersionId(),t.getCursorStates())}constructor(e,t){this.modelVersionId=e,this.cursorState=t}equals(e){if(!e)return!1;if(this.modelVersionId!==e.modelVersionId)return!1;if(this.cursorState.length!==e.cursorState.length)return!1;for(let t=0,n=this.cursorState.length;t<n;t++)if(!this.cursorState[t].equals(e.cursorState[t]))return!1;return!0}}class v{static getAllAutoClosedCharacters(e){let t=[];for(const n of e)t=t.concat(n.getAutoClosedCharactersRanges());return t}constructor(e,t,n){this._model=e,this._autoClosedCharactersDecorations=t,this._autoClosedEnclosingDecorations=n}dispose(){this._autoClosedCharactersDecorations=this._model.deltaDecorations(this._autoClosedCharactersDecorations,[]),this._autoClosedEnclosingDecorations=this._model.deltaDecorations(this._autoClosedEnclosingDecorations,[])}getAutoClosedCharactersRanges(){const e=[];for(let t=0;t<this._autoClosedCharactersDecorations.length;t++){const n=this._model.getDecorationRange(this._autoClosedCharactersDecorations[t]);n&&e.push(n)}return e}isValid(e){const t=[];for(let e=0;e<this._autoClosedEnclosingDecorations.length;e++){const n=this._model.getDecorationRange(this._autoClosedEnclosingDecorations[e]);if(n&&(t.push(n),n.startLineNumber!==n.endLineNumber))return!1}t.sort(u.Q.compareRangesUsingStarts),e.sort(u.Q.compareRangesUsingStarts);for(let n=0;n<e.length;n++){if(n>=t.length)return!1;if(!t[n].strictContainsRange(e[n]))return!1}return!0}}class N{static executeCommands(e,t,n){const i={model:e,selectionsBefore:t,trackedRanges:[],trackedRangesDirection:[]},o=this._innerExecuteCommands(i,n);for(let e=0,t=i.trackedRanges.length;e<t;e++)i.model._setTrackedRange(i.trackedRanges[e],null,0);return o}static _innerExecuteCommands(e,t){if(this._arrayIsEmpty(t))return null;const n=this._getEditOperations(e,t);if(0===n.operations.length)return null;const i=n.operations,o=this._getLoserCursorMap(i);if(o.hasOwnProperty("0"))return console.warn("Ignoring commands"),null;const r=[];for(let e=0,t=i.length;e<t;e++)o.hasOwnProperty(i[e].identifier.major.toString())||r.push(i[e]);n.hadTrackedEditOperation&&r.length>0&&(r[0]._isTracked=!0);let s=e.model.pushEditOperations(e.selectionsBefore,r,n=>{const i=[];for(let t=0;t<e.selectionsBefore.length;t++)i[t]=[];for(const e of n)e.identifier&&i[e.identifier.major].push(e);const o=(e,t)=>e.identifier.minor-t.identifier.minor,r=[];for(let n=0;n<e.selectionsBefore.length;n++)i[n].length>0?(i[n].sort(o),r[n]=t[n].computeCursorState(e.model,{getInverseEditOperations:()=>i[n],getTrackedSelection:t=>{const n=parseInt(t,10),i=e.model._getTrackedRange(e.trackedRanges[n]);return 0===e.trackedRangesDirection[n]?new c.L(i.startLineNumber,i.startColumn,i.endLineNumber,i.endColumn):new c.L(i.endLineNumber,i.endColumn,i.startLineNumber,i.startColumn)}})):r[n]=e.selectionsBefore[n];return r});s||(s=e.selectionsBefore);const l=[];for(const e in o)o.hasOwnProperty(e)&&l.push(parseInt(e,10));l.sort((e,t)=>t-e);for(const e of l)s.splice(e,1);return s}static _arrayIsEmpty(e){for(let t=0,n=e.length;t<n;t++)if(e[t])return!1;return!0}static _getEditOperations(e,t){let n=[],i=!1;for(let o=0,r=t.length;o<r;o++){const r=t[o];if(r){const t=this._getEditOperationsFromCommand(e,o,r);n=n.concat(t.operations),i=i||t.hadTrackedEditOperation}}return{operations:n,hadTrackedEditOperation:i}}static _getEditOperationsFromCommand(e,t,n){const o=[];let r=0;const s=(e,i,s=!1)=>{u.Q.isEmpty(e)&&""===i||o.push({identifier:{major:t,minor:r++},range:e,text:i,forceMoveMarkers:s,isAutoWhitespaceEdit:n.insertsAutoWhitespace})};let l=!1;const a={addEditOperation:s,addTrackedEditOperation:(e,t,n)=>{l=!0,s(e,t,n)},trackSelection:(t,n)=>{const i=c.L.liftSelection(t);let o;if(i.isEmpty())if("boolean"==typeof n)o=n?2:3;else{const t=e.model.getLineMaxColumn(i.startLineNumber);o=i.startColumn===t?2:3}else o=1;const r=e.trackedRanges.length,s=e.model._setTrackedRange(null,i,o);return e.trackedRanges[r]=s,e.trackedRangesDirection[r]=i.getDirection(),r.toString()}};try{n.getEditOperations(e.model,a)}catch(e){return(0,i.dz)(e),{operations:[],hadTrackedEditOperation:!1}}return{operations:o,hadTrackedEditOperation:l}}static _getLoserCursorMap(e){(e=e.slice(0)).sort((e,t)=>-u.Q.compareRangesUsingEnds(e.range,t.range));const t={};for(let n=1;n<e.length;n++){const i=e[n-1],o=e[n];if(u.Q.getStartPosition(i.range).isBefore(u.Q.getEndPosition(o.range))){let r;r=i.identifier.major>o.identifier.major?i.identifier.major:o.identifier.major,t[r.toString()]=!0;for(let t=0;t<e.length;t++)e[t].identifier.major===r&&(e.splice(t,1),t<n&&n--,t--);n>0&&n--}}return t}}class P{constructor(e,t,n){this.text=e,this.startSelection=t,this.endSelection=n}}class x{static _capture(e,t){const n=[];for(const i of t){if(i.startLineNumber!==i.endLineNumber)return null;n.push(new P(e.getLineContent(i.startLineNumber),i.startColumn-1,i.endColumn-1))}return n}constructor(e,t){this._original=x._capture(e,t)}deduceOutcome(e,t){if(!this._original)return null;const n=x._capture(e,t);if(!n)return null;if(this._original.length!==n.length)return null;const i=[];for(let e=0,t=this._original.length;e<t;e++)i.push(x._deduceOutcome(this._original[e],n[e]));return i}static _deduceOutcome(e,t){const n=Math.min(e.startSelection,t.startSelection,o.Qp(e.text,t.text)),i=Math.min(e.text.length-e.endSelection,t.text.length-t.endSelection,o.Vi(e.text,t.text)),r=e.text.substring(n,e.text.length-i),s=t.text.substring(n,t.text.length-i);return new f.v(r,e.startSelection-n,e.endSelection-n,s,t.startSelection-n,t.endSelection-n)}}},28227:(e,t,n)=>{n.d(t,{i:()=>l});var i=n(27735),o=n(20951);class r extends o.V{constructor(e,t){super(0),this._segmenter=null,this._cachedLine=null,this._cachedSegments=[],this.intlSegmenterLocales=t,this.intlSegmenterLocales.length>0?this._segmenter=new Intl.Segmenter(this.intlSegmenterLocales,{granularity:"word"}):this._segmenter=null;for(let t=0,n=e.length;t<n;t++)this.set(e.charCodeAt(t),2);this.set(32,1),this.set(9,1)}findPrevIntlWordBeforeOrAtOffset(e,t){let n=null;for(const i of this._getIntlSegmenterWordsOnLine(e)){if(i.index>t)break;n=i}return n}findNextIntlWordAtOrAfterOffset(e,t){for(const n of this._getIntlSegmenterWordsOnLine(e))if(!(n.index<t))return n;return null}_getIntlSegmenterWordsOnLine(e){return this._segmenter?(this._cachedLine===e||(this._cachedLine=e,this._cachedSegments=this._filterWordSegments(this._segmenter.segment(e))),this._cachedSegments):[]}_filterWordSegments(e){const t=[];for(const n of e)this._isWordLike(n)&&t.push(n);return t}_isWordLike(e){return!!e.isWordLike}}const s=new i.qK(10);function l(e,t){const n=`${e}/${t.join(",")}`;let i=s.get(n);return i||(i=new r(e,t),s.set(n,i)),i}},33099:(e,t,n)=>{n.d(t,{R:()=>i});const i={tabSize:4,indentSize:4,insertSpaces:!0,detectIndentation:!0,trimAutoWhitespace:!0,largeFileOptimizations:!0,bracketPairColorizationOptions:{enabled:!0,independentColorPoolPerBracketType:!1}}},35582:(e,t,n)=>{n.d(t,{T:()=>l,v:()=>a});var i=n(89451),o=n(89323),r=n(90130),s=n(98234);class l{static indent(e,t,n){if(null===t||null===n)return[];const o=[];for(let t=0,r=n.length;t<r;t++)o[t]=new i.Y(n[t],{isUnshift:!1,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent},e.languageConfigurationService);return o}static outdent(e,t,n){const o=[];for(let t=0,r=n.length;t<r;t++)o[t]=new i.Y(n[t],{isUnshift:!0,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent},e.languageConfigurationService);return o}static paste(e,t,n,i,o,r){return s.Dr.getEdits(e,t,n,i,o,r)}static tab(e,t,n){return s.h0.getCommands(e,t,n)}static compositionType(e,t,n,i,o,r,l,a){return s.YA.getEdits(e,t,n,i,o,r,l,a)}static compositionEndWithInterceptors(e,t,n,i,l,a){if(!i)return null;let u=null;for(const e of i)if(null===u)u=e.insertedText;else if(u!==e.insertedText)return null;if(!u||1!==u.length)return null;const c=u;let m=!1;for(const e of i)if(0!==e.deletedText.length){m=!0;break}if(m){if(!(0,s.ey)(t,c)||!t.surroundingPairs.hasOwnProperty(c))return null;const e=(0,r.vG)(c);for(const t of i){if(0!==t.deletedSelectionStart||t.deletedSelectionEnd!==t.deletedText.length)return null;if(/^[ \t]+$/.test(t.deletedText))return null;if(e&&(0,r.vG)(t.deletedText))return null}const n=[];for(const e of l){if(!e.isEmpty())return null;n.push(e.getPosition())}if(n.length!==i.length)return null;const a=[];for(let e=0,r=n.length;e<r;e++)a.push(new o.y(n[e],i[e].deletedText,t.surroundingPairs[c]));return new r.vY(4,a,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}const d=s.K4.getEdits(t,n,l,a,c);if(void 0!==d)return d;const h=s.oi.getEdits(t,n,l,c,!0,!1);return void 0!==h?h:null}static typeWithInterceptors(e,t,n,i,o,r,l){const a=s.AO.getEdits(n,i,o,l,e);if(void 0!==a)return a;const u=s.dU.getEdits(n,i,o,l,e);if(void 0!==u)return u;const c=s.sx.getEdits(t,n,i,o,r,l);if(void 0!==c)return c;const m=s.oi.getEdits(n,i,o,l,!1,e);if(void 0!==m)return m;const d=s.is.getEdits(n,i,o,l,e);if(void 0!==d)return d;const h=s.kr.getEdits(t,n,i,o,l,e);return void 0!==h?h:s.Ls.getEdits(t,o,l)}static typeWithoutInterceptors(e,t,n,i,o){return s.UN.getEdits(e,i,o)}}class a{constructor(e,t,n,i,o,r){this.deletedText=e,this.deletedSelectionStart=t,this.deletedSelectionEnd=n,this.insertedText=i,this.insertedSelectionStart=o,this.insertedSelectionEnd=r}}},37919:(e,t,n)=>{n.d(t,{I:()=>c});var i=n(60891),o=n(10492),r=n(55818),s=n(81304),l=n(90374),a=n(90130);class u{constructor(e,t,n){this._cursorPositionBrand=void 0,this.lineNumber=e,this.column=t,this.leftoverVisibleColumns=n}}class c{static leftPosition(e,t){if(t.column>e.getLineMinColumn(t.lineNumber))return t.delta(void 0,-i.MV(e.getLineContent(t.lineNumber),t.column-1));if(t.lineNumber>1){const n=t.lineNumber-1;return new r.y(n,e.getLineMaxColumn(n))}return t}static leftPositionAtomicSoftTabs(e,t,n){if(t.column<=e.getLineIndentColumn(t.lineNumber)){const i=e.getLineMinColumn(t.lineNumber),o=e.getLineContent(t.lineNumber),s=l.s.atomicPosition(o,t.column-1,n,0);if(-1!==s&&s+1>=i)return new r.y(t.lineNumber,s+1)}return this.leftPosition(e,t)}static left(e,t,n){const i=e.stickyTabStops?c.leftPositionAtomicSoftTabs(t,n,e.tabSize):c.leftPosition(t,n);return new u(i.lineNumber,i.column,0)}static moveLeft(e,t,n,i,o){let r,s;if(n.hasSelection()&&!i)r=n.selection.startLineNumber,s=n.selection.startColumn;else{const i=n.position.delta(void 0,-(o-1)),l=t.normalizePosition(c.clipPositionColumn(i,t),0),a=c.left(e,t,l);r=a.lineNumber,s=a.column}return n.move(i,r,s,0)}static clipPositionColumn(e,t){return new r.y(e.lineNumber,c.clipRange(e.column,t.getLineMinColumn(e.lineNumber),t.getLineMaxColumn(e.lineNumber)))}static clipRange(e,t,n){return e<t?t:e>n?n:e}static rightPosition(e,t,n){return n<e.getLineMaxColumn(t)?n+=i.iy(e.getLineContent(t),n-1):t<e.getLineCount()&&(t+=1,n=e.getLineMinColumn(t)),new r.y(t,n)}static rightPositionAtomicSoftTabs(e,t,n,i,o){if(n<e.getLineIndentColumn(t)){const o=e.getLineContent(t),s=l.s.atomicPosition(o,n-1,i,1);if(-1!==s)return new r.y(t,s+1)}return this.rightPosition(e,t,n)}static right(e,t,n){const i=e.stickyTabStops?c.rightPositionAtomicSoftTabs(t,n.lineNumber,n.column,e.tabSize,e.indentSize):c.rightPosition(t,n.lineNumber,n.column);return new u(i.lineNumber,i.column,0)}static moveRight(e,t,n,i,o){let r,s;if(n.hasSelection()&&!i)r=n.selection.endLineNumber,s=n.selection.endColumn;else{const i=n.position.delta(void 0,o-1),l=t.normalizePosition(c.clipPositionColumn(i,t),1),a=c.right(e,t,l);r=a.lineNumber,s=a.column}return n.move(i,r,s,0)}static vertical(e,t,n,i,s,l,a,c){const m=o.A.visibleColumnFromColumn(t.getLineContent(n),i,e.tabSize)+s,d=t.getLineCount(),h=1===n&&1===i,g=n===d&&i===t.getLineMaxColumn(n),f=l<n?h:g;if((n=l)<1?(n=1,i=a?t.getLineMinColumn(n):Math.min(t.getLineMaxColumn(n),i)):n>d?(n=d,i=a?t.getLineMaxColumn(n):Math.min(t.getLineMaxColumn(n),i)):i=e.columnFromVisibleColumn(t,n,m),s=f?0:m-o.A.visibleColumnFromColumn(t.getLineContent(n),i,e.tabSize),void 0!==c){const e=new r.y(n,i),o=t.normalizePosition(e,c);s+=i-o.column,n=o.lineNumber,i=o.column}return new u(n,i,s)}static down(e,t,n,i,o,r,s){return this.vertical(e,t,n,i,o,n+r,s,4)}static moveDown(e,t,n,i,o){let s,l;n.hasSelection()&&!i?(s=n.selection.endLineNumber,l=n.selection.endColumn):(s=n.position.lineNumber,l=n.position.column);let a,u=0;do{if(a=c.down(e,t,s+u,l,n.leftoverVisibleColumns,o,!0),t.normalizePosition(new r.y(a.lineNumber,a.column),2).lineNumber>s)break}while(u++<10&&s+u<t.getLineCount());return n.move(i,a.lineNumber,a.column,a.leftoverVisibleColumns)}static translateDown(e,t,n){const i=n.selection,o=c.down(e,t,i.selectionStartLineNumber,i.selectionStartColumn,n.selectionStartLeftoverVisibleColumns,1,!1),l=c.down(e,t,i.positionLineNumber,i.positionColumn,n.leftoverVisibleColumns,1,!1);return new a.mG(new s.Q(o.lineNumber,o.column,o.lineNumber,o.column),0,o.leftoverVisibleColumns,new r.y(l.lineNumber,l.column),l.leftoverVisibleColumns)}static up(e,t,n,i,o,r,s){return this.vertical(e,t,n,i,o,n-r,s,3)}static moveUp(e,t,n,i,o){let r,s;n.hasSelection()&&!i?(r=n.selection.startLineNumber,s=n.selection.startColumn):(r=n.position.lineNumber,s=n.position.column);const l=c.up(e,t,r,s,n.leftoverVisibleColumns,o,!0);return n.move(i,l.lineNumber,l.column,l.leftoverVisibleColumns)}static translateUp(e,t,n){const i=n.selection,o=c.up(e,t,i.selectionStartLineNumber,i.selectionStartColumn,n.selectionStartLeftoverVisibleColumns,1,!1),l=c.up(e,t,i.positionLineNumber,i.positionColumn,n.leftoverVisibleColumns,1,!1);return new a.mG(new s.Q(o.lineNumber,o.column,o.lineNumber,o.column),0,o.leftoverVisibleColumns,new r.y(l.lineNumber,l.column),l.leftoverVisibleColumns)}static _isBlankLine(e,t){return 0===e.getLineFirstNonWhitespaceColumn(t)}static moveToPrevBlankLine(e,t,n,i){let o=n.position.lineNumber;for(;o>1&&this._isBlankLine(t,o);)o--;for(;o>1&&!this._isBlankLine(t,o);)o--;return n.move(i,o,t.getLineMinColumn(o),0)}static moveToNextBlankLine(e,t,n,i){const o=t.getLineCount();let r=n.position.lineNumber;for(;r<o&&this._isBlankLine(t,r);)r++;for(;r<o&&!this._isBlankLine(t,r);)r++;return n.move(i,r,t.getLineMinColumn(r),0)}static moveToBeginningOfLine(e,t,n,i){const o=n.position.lineNumber,r=t.getLineMinColumn(o),s=t.getLineFirstNonWhitespaceColumn(o)||r;let l;return l=n.position.column===s?r:s,n.move(i,o,l,0)}static moveToEndOfLine(e,t,n,i,o){const r=n.position.lineNumber,s=t.getLineMaxColumn(r);return n.move(i,r,s,o?1073741824-s:0)}static moveToBeginningOfBuffer(e,t,n,i){return n.move(i,1,1,0)}static moveToEndOfBuffer(e,t,n,i){const o=t.getLineCount(),r=t.getLineMaxColumn(o);return n.move(i,o,r,0)}}},50234:(e,t,n)=>{n.d(t,{CO:()=>d,WR:()=>c,mF:()=>u});var i=n(72667),o=n(73226),r=n(55818),s=n(61216),l=n(81304),a=n(53334);class u{constructor(e){this.edits=e,(0,i.Ft)(()=>(0,i.Xo)(e,(e,t)=>e.range.getEndPosition().isBeforeOrEqual(t.range.getStartPosition())))}apply(e){let t="",n=new r.y(1,1);for(const i of this.edits){const o=i.range,r=o.getStartPosition(),s=o.getEndPosition(),l=m(n,r);l.isEmpty()||(t+=e.getValueOfRange(l)),t+=i.text,n=s}const i=m(n,e.endPositionExclusive);return i.isEmpty()||(t+=e.getValueOfRange(i)),t}applyToString(e){const t=new h(e);return this.apply(t)}getNewRanges(){const e=[];let t=0,n=0,i=0;for(const o of this.edits){const s=a.W.ofText(o.text),l=r.y.lift({lineNumber:o.range.startLineNumber+n,column:o.range.startColumn+(o.range.startLineNumber===t?i:0)}),u=s.createRange(l);e.push(u),n=u.endLineNumber-o.range.endLineNumber,i=u.endColumn-o.range.endColumn,t=o.range.endLineNumber}return e}}class c{constructor(e,t){this.range=e,this.text=t}toSingleEditOperation(){return{range:this.range,text:this.text}}}function m(e,t){if(e.lineNumber===t.lineNumber&&e.column===Number.MAX_SAFE_INTEGER)return l.Q.fromPositions(t,t);if(!e.isBeforeOrEqual(t))throw new o.D7("start must be before end");return new l.Q(e.lineNumber,e.column,t.lineNumber,t.column)}class d{get endPositionExclusive(){return this.length.addToPosition(new r.y(1,1))}}class h extends d{constructor(e){super(),this.value=e,this._t=new s.a(this.value)}getValueOfRange(e){return this._t.getOffsetRange(e).substring(this.value)}get length(){return this._t.textLength}}},53334:(e,t,n)=>{n.d(t,{W:()=>r});var i=n(55818),o=n(81304);class r{static{this.zero=new r(0,0)}static betweenPositions(e,t){return e.lineNumber===t.lineNumber?new r(0,t.column-e.column):new r(t.lineNumber-e.lineNumber,t.column-1)}static ofRange(e){return r.betweenPositions(e.getStartPosition(),e.getEndPosition())}static ofText(e){let t=0,n=0;for(const i of e)"\n"===i?(t++,n=0):n++;return new r(t,n)}constructor(e,t){this.lineCount=e,this.columnCount=t}isGreaterThanOrEqualTo(e){return this.lineCount!==e.lineCount?this.lineCount>e.lineCount:this.columnCount>=e.columnCount}createRange(e){return 0===this.lineCount?new o.Q(e.lineNumber,e.column,e.lineNumber,e.column+this.columnCount):new o.Q(e.lineNumber,e.column,e.lineNumber+this.lineCount,this.columnCount+1)}addToPosition(e){return 0===this.lineCount?new i.y(e.lineNumber,e.column+this.columnCount):new i.y(e.lineNumber+this.lineCount,this.columnCount+1)}toString(){return`${this.lineCount},${this.columnCount}`}}},53775:(e,t,n)=>{n.d(t,{D:()=>i});class i{static{this.Empty=new i(0,0,0,0)}constructor(e,t,n,o){this._rgba8Brand=void 0,this.r=i._clamp(e),this.g=i._clamp(t),this.b=i._clamp(n),this.a=i._clamp(o)}equals(e){return this.r===e.r&&this.g===e.g&&this.b===e.b&&this.a===e.a}static _clamp(e){return e<0?0:e>255?255:0|e}}},58561:(e,t,n)=>{n.d(t,{Io:()=>l,J3:()=>r,Ld:()=>s,Th:()=>u});var i=n(73179),o=n(70092);const r="`~!@#$%^&*()-=+[{]}\\|;:'\",.<>/?",s=function(e=""){let t="(-?\\d*\\.\\d\\w*)|([^";for(const n of r)e.indexOf(n)>=0||(t+="\\"+n);return t+="\\s]+)",new RegExp(t,"g")}();function l(e){let t=s;if(e&&e instanceof RegExp)if(e.global)t=e;else{let n="g";e.ignoreCase&&(n+="i"),e.multiline&&(n+="m"),e.unicode&&(n+="u"),t=new RegExp(e.source,n)}return t.lastIndex=0,t}const a=new o.w;function u(e,t,n,o,r){if(t=l(t),r||(r=i.f.first(a)),n.length>r.maxLen){let i=e-r.maxLen/2;return i<0?i=0:o+=i,u(e,t,n=n.substring(i,e+r.maxLen/2),o,r)}const s=Date.now(),m=e-1-o;let d=-1,h=null;for(let e=1;!(Date.now()-s>=r.timeBudget);e++){const i=m-r.windowSize*e;t.lastIndex=Math.max(0,i);const o=c(t,n,m,d);if(!o&&h)break;if(h=o,i<=0)break;d=i}if(h){const e={word:h[0],startColumn:o+1+h.index,endColumn:o+1+h.index+h[0].length};return t.lastIndex=0,e}return null}function c(e,t,n,i){let o;for(;o=e.exec(t);){const t=o.index||0;if(t<=n&&e.lastIndex>=n)return o;if(i>0&&t>i)return null}return null}a.unshift({maxLen:1e3,windowSize:15,timeBudget:150})},63182:(e,t,n)=>{n.d(t,{X:()=>s});var i=n(90130),o=n(55818),r=n(81304);class s{static columnSelect(e,t,n,s,l,a){const u=Math.abs(l-n)+1,c=n>l,m=s>a,d=s<a,h=[];for(let l=0;l<u;l++){const u=n+(c?-l:l),g=e.columnFromVisibleColumn(t,u,s),f=e.columnFromVisibleColumn(t,u,a),C=e.visibleColumnFromColumn(t,new o.y(u,g)),p=e.visibleColumnFromColumn(t,new o.y(u,f));if(d){if(C>a)continue;if(p<s)continue}if(m){if(p>s)continue;if(C<a)continue}h.push(new i.mG(new r.Q(u,g,u,g),0,0,new o.y(u,f),0))}if(0===h.length)for(let e=0;e<u;e++){const s=n+(c?-e:e),l=t.getLineMaxColumn(s);h.push(new i.mG(new r.Q(s,l,s,l),0,0,new o.y(s,l),0))}return{viewStates:h,reversed:c,fromLineNumber:n,fromVisualColumn:s,toLineNumber:l,toVisualColumn:a}}static columnSelectLeft(e,t,n){let i=n.toViewVisualColumn;return i>0&&i--,s.columnSelect(e,t,n.fromViewLineNumber,n.fromViewVisualColumn,n.toViewLineNumber,i)}static columnSelectRight(e,t,n){let i=0;const r=Math.min(n.fromViewLineNumber,n.toViewLineNumber),s=Math.max(n.fromViewLineNumber,n.toViewLineNumber);for(let n=r;n<=s;n++){const r=t.getLineMaxColumn(n),s=e.visibleColumnFromColumn(t,new o.y(n,r));i=Math.max(i,s)}let l=n.toViewVisualColumn;return l<i&&l++,this.columnSelect(e,t,n.fromViewLineNumber,n.fromViewVisualColumn,n.toViewLineNumber,l)}static columnSelectUp(e,t,n,i){const o=i?e.pageSize:1,r=Math.max(1,n.toViewLineNumber-o);return this.columnSelect(e,t,n.fromViewLineNumber,n.fromViewVisualColumn,r,n.toViewVisualColumn)}static columnSelectDown(e,t,n,i){const o=i?e.pageSize:1,r=Math.min(t.getLineCount(),n.toViewLineNumber+o);return this.columnSelect(e,t,n.fromViewLineNumber,n.fromViewVisualColumn,r,n.toViewVisualColumn)}}},70907:(e,t,n)=>{n.d(t,{S:()=>i,c:()=>c});var i,o=n(69708),r=n(90130),s=n(37919),l=n(93794),a=n(55818),u=n(81304);class c{static addCursorDown(e,t,n){const i=[];let o=0;for(let l=0,a=t.length;l<a;l++){const a=t[l];i[o++]=new r.MF(a.modelState,a.viewState),i[o++]=n?r.MF.fromModelState(s.I.translateDown(e.cursorConfig,e.model,a.modelState)):r.MF.fromViewState(s.I.translateDown(e.cursorConfig,e,a.viewState))}return i}static addCursorUp(e,t,n){const i=[];let o=0;for(let l=0,a=t.length;l<a;l++){const a=t[l];i[o++]=new r.MF(a.modelState,a.viewState),i[o++]=n?r.MF.fromModelState(s.I.translateUp(e.cursorConfig,e.model,a.modelState)):r.MF.fromViewState(s.I.translateUp(e.cursorConfig,e,a.viewState))}return i}static moveToBeginningOfLine(e,t,n){const i=[];for(let o=0,r=t.length;o<r;o++){const r=t[o];i[o]=this._moveToLineStart(e,r,n)}return i}static _moveToLineStart(e,t,n){const i=t.viewState.position.column,o=i===t.modelState.position.column,r=t.viewState.position.lineNumber,s=e.getLineFirstNonWhitespaceColumn(r);return o||i===s?this._moveToLineStartByModel(e,t,n):this._moveToLineStartByView(e,t,n)}static _moveToLineStartByView(e,t,n){return r.MF.fromViewState(s.I.moveToBeginningOfLine(e.cursorConfig,e,t.viewState,n))}static _moveToLineStartByModel(e,t,n){return r.MF.fromModelState(s.I.moveToBeginningOfLine(e.cursorConfig,e.model,t.modelState,n))}static moveToEndOfLine(e,t,n,i){const o=[];for(let r=0,s=t.length;r<s;r++){const s=t[r];o[r]=this._moveToLineEnd(e,s,n,i)}return o}static _moveToLineEnd(e,t,n,i){const o=t.viewState.position,r=e.getLineMaxColumn(o.lineNumber),s=o.column===r,l=t.modelState.position,a=e.model.getLineMaxColumn(l.lineNumber),u=r-o.column===a-l.column;return s||u?this._moveToLineEndByModel(e,t,n,i):this._moveToLineEndByView(e,t,n,i)}static _moveToLineEndByView(e,t,n,i){return r.MF.fromViewState(s.I.moveToEndOfLine(e.cursorConfig,e,t.viewState,n,i))}static _moveToLineEndByModel(e,t,n,i){return r.MF.fromModelState(s.I.moveToEndOfLine(e.cursorConfig,e.model,t.modelState,n,i))}static expandLineSelection(e,t){const n=[];for(let i=0,o=t.length;i<o;i++){const o=t[i],s=o.modelState.selection.startLineNumber,l=e.model.getLineCount();let c,m=o.modelState.selection.endLineNumber;m===l?c=e.model.getLineMaxColumn(l):(m++,c=1),n[i]=r.MF.fromModelState(new r.mG(new u.Q(s,1,s,1),0,0,new a.y(m,c),0))}return n}static moveToBeginningOfBuffer(e,t,n){const i=[];for(let o=0,l=t.length;o<l;o++){const l=t[o];i[o]=r.MF.fromModelState(s.I.moveToBeginningOfBuffer(e.cursorConfig,e.model,l.modelState,n))}return i}static moveToEndOfBuffer(e,t,n){const i=[];for(let o=0,l=t.length;o<l;o++){const l=t[o];i[o]=r.MF.fromModelState(s.I.moveToEndOfBuffer(e.cursorConfig,e.model,l.modelState,n))}return i}static selectAll(e,t){const n=e.model.getLineCount(),i=e.model.getLineMaxColumn(n);return r.MF.fromModelState(new r.mG(new u.Q(1,1,1,1),0,0,new a.y(n,i),0))}static line(e,t,n,i,o){const s=e.model.validatePosition(i),l=o?e.coordinatesConverter.validateViewPosition(new a.y(o.lineNumber,o.column),s):e.coordinatesConverter.convertModelPositionToViewPosition(s);if(!n){const t=e.model.getLineCount();let n=s.lineNumber+1,i=1;return n>t&&(n=t,i=e.model.getLineMaxColumn(n)),r.MF.fromModelState(new r.mG(new u.Q(s.lineNumber,1,n,i),2,0,new a.y(n,i),0))}const c=t.modelState.selectionStart.getStartPosition().lineNumber;if(s.lineNumber<c)return r.MF.fromViewState(t.viewState.move(!0,l.lineNumber,1,0));if(s.lineNumber>c){const n=e.getLineCount();let i=l.lineNumber+1,o=1;return i>n&&(i=n,o=e.getLineMaxColumn(i)),r.MF.fromViewState(t.viewState.move(!0,i,o,0))}{const e=t.modelState.selectionStart.getEndPosition();return r.MF.fromModelState(t.modelState.move(!0,e.lineNumber,e.column,0))}}static word(e,t,n,i){const o=e.model.validatePosition(i);return r.MF.fromModelState(l.z.word(e.cursorConfig,e.model,t.modelState,n,o))}static cancelSelection(e,t){if(!t.modelState.hasSelection())return new r.MF(t.modelState,t.viewState);const n=t.viewState.position.lineNumber,i=t.viewState.position.column;return r.MF.fromViewState(new r.mG(new u.Q(n,i,n,i),0,0,new a.y(n,i),0))}static moveTo(e,t,n,i,o){if(n){if(1===t.modelState.selectionStartKind)return this.word(e,t,n,i);if(2===t.modelState.selectionStartKind)return this.line(e,t,n,i,o)}const s=e.model.validatePosition(i),l=o?e.coordinatesConverter.validateViewPosition(new a.y(o.lineNumber,o.column),s):e.coordinatesConverter.convertModelPositionToViewPosition(s);return r.MF.fromViewState(t.viewState.move(n,l.lineNumber,l.column,0))}static simpleMove(e,t,n,i,o,l){switch(n){case 0:return 4===l?this._moveHalfLineLeft(e,t,i):this._moveLeft(e,t,i,o);case 1:return 4===l?this._moveHalfLineRight(e,t,i):this._moveRight(e,t,i,o);case 2:return 2===l?this._moveUpByViewLines(e,t,i,o):this._moveUpByModelLines(e,t,i,o);case 3:return 2===l?this._moveDownByViewLines(e,t,i,o):this._moveDownByModelLines(e,t,i,o);case 4:return 2===l?t.map(t=>r.MF.fromViewState(s.I.moveToPrevBlankLine(e.cursorConfig,e,t.viewState,i))):t.map(t=>r.MF.fromModelState(s.I.moveToPrevBlankLine(e.cursorConfig,e.model,t.modelState,i)));case 5:return 2===l?t.map(t=>r.MF.fromViewState(s.I.moveToNextBlankLine(e.cursorConfig,e,t.viewState,i))):t.map(t=>r.MF.fromModelState(s.I.moveToNextBlankLine(e.cursorConfig,e.model,t.modelState,i)));case 6:return this._moveToViewMinColumn(e,t,i);case 7:return this._moveToViewFirstNonWhitespaceColumn(e,t,i);case 8:return this._moveToViewCenterColumn(e,t,i);case 9:return this._moveToViewMaxColumn(e,t,i);case 10:return this._moveToViewLastNonWhitespaceColumn(e,t,i);default:return null}}static viewportMove(e,t,n,i,o){const r=e.getCompletelyVisibleViewRange(),s=e.coordinatesConverter.convertViewRangeToModelRange(r);switch(n){case 11:{const n=this._firstLineNumberInRange(e.model,s,o),r=e.model.getLineFirstNonWhitespaceColumn(n);return[this._moveToModelPosition(e,t[0],i,n,r)]}case 13:{const n=this._lastLineNumberInRange(e.model,s,o),r=e.model.getLineFirstNonWhitespaceColumn(n);return[this._moveToModelPosition(e,t[0],i,n,r)]}case 12:{const n=Math.round((s.startLineNumber+s.endLineNumber)/2),o=e.model.getLineFirstNonWhitespaceColumn(n);return[this._moveToModelPosition(e,t[0],i,n,o)]}case 14:{const n=[];for(let o=0,s=t.length;o<s;o++){const s=t[o];n[o]=this.findPositionInViewportIfOutside(e,s,r,i)}return n}default:return null}}static findPositionInViewportIfOutside(e,t,n,i){const o=t.viewState.position.lineNumber;if(n.startLineNumber<=o&&o<=n.endLineNumber-1)return new r.MF(t.modelState,t.viewState);{let l;l=o>n.endLineNumber-1?n.endLineNumber-1:o<n.startLineNumber?n.startLineNumber:o;const a=s.I.vertical(e.cursorConfig,e,o,t.viewState.position.column,t.viewState.leftoverVisibleColumns,l,!1);return r.MF.fromViewState(t.viewState.move(i,a.lineNumber,a.column,a.leftoverVisibleColumns))}}static _firstLineNumberInRange(e,t,n){let i=t.startLineNumber;return t.startColumn!==e.getLineMinColumn(i)&&i++,Math.min(t.endLineNumber,i+n-1)}static _lastLineNumberInRange(e,t,n){let i=t.startLineNumber;return t.startColumn!==e.getLineMinColumn(i)&&i++,Math.max(i,t.endLineNumber-n+1)}static _moveLeft(e,t,n,i){return t.map(t=>r.MF.fromViewState(s.I.moveLeft(e.cursorConfig,e,t.viewState,n,i)))}static _moveHalfLineLeft(e,t,n){const i=[];for(let o=0,l=t.length;o<l;o++){const l=t[o],a=l.viewState.position.lineNumber,u=Math.round(e.getLineLength(a)/2);i[o]=r.MF.fromViewState(s.I.moveLeft(e.cursorConfig,e,l.viewState,n,u))}return i}static _moveRight(e,t,n,i){return t.map(t=>r.MF.fromViewState(s.I.moveRight(e.cursorConfig,e,t.viewState,n,i)))}static _moveHalfLineRight(e,t,n){const i=[];for(let o=0,l=t.length;o<l;o++){const l=t[o],a=l.viewState.position.lineNumber,u=Math.round(e.getLineLength(a)/2);i[o]=r.MF.fromViewState(s.I.moveRight(e.cursorConfig,e,l.viewState,n,u))}return i}static _moveDownByViewLines(e,t,n,i){const o=[];for(let l=0,a=t.length;l<a;l++){const a=t[l];o[l]=r.MF.fromViewState(s.I.moveDown(e.cursorConfig,e,a.viewState,n,i))}return o}static _moveDownByModelLines(e,t,n,i){const o=[];for(let l=0,a=t.length;l<a;l++){const a=t[l];o[l]=r.MF.fromModelState(s.I.moveDown(e.cursorConfig,e.model,a.modelState,n,i))}return o}static _moveUpByViewLines(e,t,n,i){const o=[];for(let l=0,a=t.length;l<a;l++){const a=t[l];o[l]=r.MF.fromViewState(s.I.moveUp(e.cursorConfig,e,a.viewState,n,i))}return o}static _moveUpByModelLines(e,t,n,i){const o=[];for(let l=0,a=t.length;l<a;l++){const a=t[l];o[l]=r.MF.fromModelState(s.I.moveUp(e.cursorConfig,e.model,a.modelState,n,i))}return o}static _moveToViewPosition(e,t,n,i,o){return r.MF.fromViewState(t.viewState.move(n,i,o,0))}static _moveToModelPosition(e,t,n,i,o){return r.MF.fromModelState(t.modelState.move(n,i,o,0))}static _moveToViewMinColumn(e,t,n){const i=[];for(let o=0,r=t.length;o<r;o++){const r=t[o],s=r.viewState.position.lineNumber,l=e.getLineMinColumn(s);i[o]=this._moveToViewPosition(e,r,n,s,l)}return i}static _moveToViewFirstNonWhitespaceColumn(e,t,n){const i=[];for(let o=0,r=t.length;o<r;o++){const r=t[o],s=r.viewState.position.lineNumber,l=e.getLineFirstNonWhitespaceColumn(s);i[o]=this._moveToViewPosition(e,r,n,s,l)}return i}static _moveToViewCenterColumn(e,t,n){const i=[];for(let o=0,r=t.length;o<r;o++){const r=t[o],s=r.viewState.position.lineNumber,l=Math.round((e.getLineMaxColumn(s)+e.getLineMinColumn(s))/2);i[o]=this._moveToViewPosition(e,r,n,s,l)}return i}static _moveToViewMaxColumn(e,t,n){const i=[];for(let o=0,r=t.length;o<r;o++){const r=t[o],s=r.viewState.position.lineNumber,l=e.getLineMaxColumn(s);i[o]=this._moveToViewPosition(e,r,n,s,l)}return i}static _moveToViewLastNonWhitespaceColumn(e,t,n){const i=[];for(let o=0,r=t.length;o<r;o++){const r=t[o],s=r.viewState.position.lineNumber,l=e.getLineLastNonWhitespaceColumn(s);i[o]=this._moveToViewPosition(e,r,n,s,l)}return i}}!function(e){e.metadata={description:"Move cursor to a logical position in the view",args:[{name:"Cursor move argument object",description:"Property-value pairs that can be passed through this argument:\n\t\t\t\t\t* 'to': A mandatory logical position value providing where to move the cursor.\n\t\t\t\t\t\t```\n\t\t\t\t\t\t'left', 'right', 'up', 'down', 'prevBlankLine', 'nextBlankLine',\n\t\t\t\t\t\t'wrappedLineStart', 'wrappedLineEnd', 'wrappedLineColumnCenter'\n\t\t\t\t\t\t'wrappedLineFirstNonWhitespaceCharacter', 'wrappedLineLastNonWhitespaceCharacter'\n\t\t\t\t\t\t'viewPortTop', 'viewPortCenter', 'viewPortBottom', 'viewPortIfOutside'\n\t\t\t\t\t\t```\n\t\t\t\t\t* 'by': Unit to move. Default is computed based on 'to' value.\n\t\t\t\t\t\t```\n\t\t\t\t\t\t'line', 'wrappedLine', 'character', 'halfLine'\n\t\t\t\t\t\t```\n\t\t\t\t\t* 'value': Number of units to move. Default is '1'.\n\t\t\t\t\t* 'select': If 'true' makes the selection. Default is 'false'.\n\t\t\t\t",constraint:function(e){if(!o.Gv(e))return!1;const t=e;return!(!o.Kg(t.to)||!o.b0(t.select)&&!o.Lm(t.select)||!o.b0(t.by)&&!o.Kg(t.by)||!o.b0(t.value)&&!o.Et(t.value))},schema:{type:"object",required:["to"],properties:{to:{type:"string",enum:["left","right","up","down","prevBlankLine","nextBlankLine","wrappedLineStart","wrappedLineEnd","wrappedLineColumnCenter","wrappedLineFirstNonWhitespaceCharacter","wrappedLineLastNonWhitespaceCharacter","viewPortTop","viewPortCenter","viewPortBottom","viewPortIfOutside"]},by:{type:"string",enum:["line","wrappedLine","character","halfLine"]},value:{type:"number",default:1},select:{type:"boolean",default:!1}}}}]},e.RawDirection={Left:"left",Right:"right",Up:"up",Down:"down",PrevBlankLine:"prevBlankLine",NextBlankLine:"nextBlankLine",WrappedLineStart:"wrappedLineStart",WrappedLineFirstNonWhitespaceCharacter:"wrappedLineFirstNonWhitespaceCharacter",WrappedLineColumnCenter:"wrappedLineColumnCenter",WrappedLineEnd:"wrappedLineEnd",WrappedLineLastNonWhitespaceCharacter:"wrappedLineLastNonWhitespaceCharacter",ViewPortTop:"viewPortTop",ViewPortCenter:"viewPortCenter",ViewPortBottom:"viewPortBottom",ViewPortIfOutside:"viewPortIfOutside"},e.RawUnit={Line:"line",WrappedLine:"wrappedLine",Character:"character",HalfLine:"halfLine"},e.parse=function(t){if(!t.to)return null;let n;switch(t.to){case e.RawDirection.Left:n=0;break;case e.RawDirection.Right:n=1;break;case e.RawDirection.Up:n=2;break;case e.RawDirection.Down:n=3;break;case e.RawDirection.PrevBlankLine:n=4;break;case e.RawDirection.NextBlankLine:n=5;break;case e.RawDirection.WrappedLineStart:n=6;break;case e.RawDirection.WrappedLineFirstNonWhitespaceCharacter:n=7;break;case e.RawDirection.WrappedLineColumnCenter:n=8;break;case e.RawDirection.WrappedLineEnd:n=9;break;case e.RawDirection.WrappedLineLastNonWhitespaceCharacter:n=10;break;case e.RawDirection.ViewPortTop:n=11;break;case e.RawDirection.ViewPortBottom:n=13;break;case e.RawDirection.ViewPortCenter:n=12;break;case e.RawDirection.ViewPortIfOutside:n=14;break;default:return null}let i=0;switch(t.by){case e.RawUnit.Line:i=1;break;case e.RawUnit.WrappedLine:i=2;break;case e.RawUnit.Character:i=3;break;case e.RawUnit.HalfLine:i=4}return{direction:n,unit:i,select:!!t.select,value:t.value||1}}}(i||(i={}))},90130:(e,t,n)=>{n.d(t,{MF:()=>h,d$:()=>d,mG:()=>C,vG:()=>S,vY:()=>p});var i=n(55818),o=n(81304),r=n(15719),s=n(94457),l=n(10492),a=n(92802);const u=()=>!0,c=()=>!1,m=e=>" "===e||"\t"===e;class d{static shouldRecreate(e){return e.hasChanged(146)||e.hasChanged(132)||e.hasChanged(37)||e.hasChanged(77)||e.hasChanged(79)||e.hasChanged(80)||e.hasChanged(6)||e.hasChanged(7)||e.hasChanged(11)||e.hasChanged(9)||e.hasChanged(10)||e.hasChanged(14)||e.hasChanged(129)||e.hasChanged(50)||e.hasChanged(92)||e.hasChanged(131)}constructor(e,t,n,i){this.languageConfigurationService=i,this._cursorMoveConfigurationBrand=void 0,this._languageId=e;const o=n.options,r=o.get(146),s=o.get(50);this.readOnly=o.get(92),this.tabSize=t.tabSize,this.indentSize=t.indentSize,this.insertSpaces=t.insertSpaces,this.stickyTabStops=o.get(117),this.lineHeight=s.lineHeight,this.typicalHalfwidthCharacterWidth=s.typicalHalfwidthCharacterWidth,this.pageSize=Math.max(1,Math.floor(r.height/this.lineHeight)-2),this.useTabStops=o.get(129),this.wordSeparators=o.get(132),this.emptySelectionClipboard=o.get(37),this.copyWithSyntaxHighlighting=o.get(25),this.multiCursorMergeOverlapping=o.get(77),this.multiCursorPaste=o.get(79),this.multiCursorLimit=o.get(80),this.autoClosingBrackets=o.get(6),this.autoClosingComments=o.get(7),this.autoClosingQuotes=o.get(11),this.autoClosingDelete=o.get(9),this.autoClosingOvertype=o.get(10),this.autoSurround=o.get(14),this.autoIndent=o.get(12),this.wordSegmenterLocales=o.get(131),this.surroundingPairs={},this._electricChars=null,this.shouldAutoCloseBefore={quote:this._getShouldAutoClose(e,this.autoClosingQuotes,!0),comment:this._getShouldAutoClose(e,this.autoClosingComments,!1),bracket:this._getShouldAutoClose(e,this.autoClosingBrackets,!1)},this.autoClosingPairs=this.languageConfigurationService.getLanguageConfiguration(e).getAutoClosingPairs();const l=this.languageConfigurationService.getLanguageConfiguration(e).getSurroundingPairs();if(l)for(const e of l)this.surroundingPairs[e.open]=e.close;const a=this.languageConfigurationService.getLanguageConfiguration(e).comments;this.blockCommentStartToken=a?.blockCommentStartToken??null}get electricChars(){if(!this._electricChars){this._electricChars={};const e=this.languageConfigurationService.getLanguageConfiguration(this._languageId).electricCharacter?.getElectricCharacters();if(e)for(const t of e)this._electricChars[t]=!0}return this._electricChars}onElectricCharacter(e,t,n){const i=(0,s.BQ)(t,n-1),o=this.languageConfigurationService.getLanguageConfiguration(i.languageId).electricCharacter;return o?o.onElectricCharacter(e,i,n-i.firstCharOffset):null}normalizeIndentation(e){return(0,a.P)(e,this.indentSize,this.insertSpaces)}_getShouldAutoClose(e,t,n){switch(t){case"beforeWhitespace":return m;case"languageDefined":return this._getLanguageDefinedShouldAutoClose(e,n);case"always":return u;case"never":return c}}_getLanguageDefinedShouldAutoClose(e,t){const n=this.languageConfigurationService.getLanguageConfiguration(e).getAutoCloseBeforeSet(t);return e=>-1!==n.indexOf(e)}visibleColumnFromColumn(e,t){return l.A.visibleColumnFromColumn(e.getLineContent(t.lineNumber),t.column,this.tabSize)}columnFromVisibleColumn(e,t,n){const i=l.A.columnFromVisibleColumn(e.getLineContent(t),n,this.tabSize),o=e.getLineMinColumn(t);if(i<o)return o;const r=e.getLineMaxColumn(t);return i>r?r:i}}class h{static fromModelState(e){return new g(e)}static fromViewState(e){return new f(e)}static fromModelSelection(e){const t=r.L.liftSelection(e),n=new C(o.Q.fromPositions(t.getSelectionStart()),0,0,t.getPosition(),0);return h.fromModelState(n)}static fromModelSelections(e){const t=[];for(let n=0,i=e.length;n<i;n++)t[n]=this.fromModelSelection(e[n]);return t}constructor(e,t){this._cursorStateBrand=void 0,this.modelState=e,this.viewState=t}equals(e){return this.viewState.equals(e.viewState)&&this.modelState.equals(e.modelState)}}class g{constructor(e){this.modelState=e,this.viewState=null}}class f{constructor(e){this.modelState=null,this.viewState=e}}class C{constructor(e,t,n,i,o){this.selectionStart=e,this.selectionStartKind=t,this.selectionStartLeftoverVisibleColumns=n,this.position=i,this.leftoverVisibleColumns=o,this._singleCursorStateBrand=void 0,this.selection=C._computeSelection(this.selectionStart,this.position)}equals(e){return this.selectionStartLeftoverVisibleColumns===e.selectionStartLeftoverVisibleColumns&&this.leftoverVisibleColumns===e.leftoverVisibleColumns&&this.selectionStartKind===e.selectionStartKind&&this.position.equals(e.position)&&this.selectionStart.equalsRange(e.selectionStart)}hasSelection(){return!this.selection.isEmpty()||!this.selectionStart.isEmpty()}move(e,t,n,r){return e?new C(this.selectionStart,this.selectionStartKind,this.selectionStartLeftoverVisibleColumns,new i.y(t,n),r):new C(new o.Q(t,n,t,n),0,r,new i.y(t,n),r)}static _computeSelection(e,t){return e.isEmpty()||!t.isBeforeOrEqual(e.getStartPosition())?r.L.fromPositions(e.getStartPosition(),t):r.L.fromPositions(e.getEndPosition(),t)}}class p{constructor(e,t,n){this._editOperationResultBrand=void 0,this.type=e,this.commands=t,this.shouldPushStackElementBefore=n.shouldPushStackElementBefore,this.shouldPushStackElementAfter=n.shouldPushStackElementAfter}}function S(e){return"'"===e||'"'===e||"`"===e}},90374:(e,t,n)=>{n.d(t,{s:()=>o});var i=n(10492);class o{static whitespaceVisibleColumn(e,t,n){const o=e.length;let r=0,s=-1,l=-1;for(let a=0;a<o;a++){if(a===t)return[s,l,r];switch(r%n===0&&(s=a,l=r),e.charCodeAt(a)){case 32:r+=1;break;case 9:r=i.A.nextRenderTabStop(r,n);break;default:return[-1,-1,-1]}}return t===o?[s,l,r]:[-1,-1,-1]}static atomicPosition(e,t,n,r){const s=e.length,[l,a,u]=o.whitespaceVisibleColumn(e,t,n);if(-1===u)return-1;let c;switch(r){case 0:c=!0;break;case 1:c=!1;break;case 2:if(u%n===0)return t;c=u%n<=n/2}if(c){if(-1===l)return-1;let t=a;for(let o=l;o<s;++o){if(t===a+n)return l;switch(e.charCodeAt(o)){case 32:t+=1;break;case 9:t=i.A.nextRenderTabStop(t,n);break;default:return-1}}return t===a+n?l:-1}const m=i.A.nextRenderTabStop(u,n);let d=u;for(let o=t;o<s;o++){if(d===m)return o;switch(e.charCodeAt(o)){case 32:d+=1;break;case 9:d=i.A.nextRenderTabStop(d,n);break;default:return-1}}return d===m?s:-1}}},93794:(e,t,n)=>{n.d(t,{z:()=>u});var i=n(60891),o=n(90130),r=n(7917),s=n(28227),l=n(55818),a=n(81304);class u{static _createWord(e,t,n,i,o){return{start:i,end:o,wordType:t,nextCharClass:n}}static _createIntlWord(e,t){return{start:e.index,end:e.index+e.segment.length,wordType:1,nextCharClass:t}}static _findPreviousWordOnLine(e,t,n){const i=t.getLineContent(n.lineNumber);return this._doFindPreviousWordOnLine(i,e,n)}static _doFindPreviousWordOnLine(e,t,n){let i=0;const o=t.findPrevIntlWordBeforeOrAtOffset(e,n.column-2);for(let r=n.column-2;r>=0;r--){const n=e.charCodeAt(r),s=t.get(n);if(o&&r===o.index)return this._createIntlWord(o,s);if(0===s){if(2===i)return this._createWord(e,i,s,r+1,this._findEndOfWord(e,t,i,r+1));i=1}else if(2===s){if(1===i)return this._createWord(e,i,s,r+1,this._findEndOfWord(e,t,i,r+1));i=2}else if(1===s&&0!==i)return this._createWord(e,i,s,r+1,this._findEndOfWord(e,t,i,r+1))}return 0!==i?this._createWord(e,i,1,0,this._findEndOfWord(e,t,i,0)):null}static _findEndOfWord(e,t,n,i){const o=t.findNextIntlWordAtOrAfterOffset(e,i),r=e.length;for(let s=i;s<r;s++){const i=e.charCodeAt(s),r=t.get(i);if(o&&s===o.index+o.segment.length)return s;if(1===r)return s;if(1===n&&2===r)return s;if(2===n&&0===r)return s}return r}static _findNextWordOnLine(e,t,n){const i=t.getLineContent(n.lineNumber);return this._doFindNextWordOnLine(i,e,n)}static _doFindNextWordOnLine(e,t,n){let i=0;const o=e.length,r=t.findNextIntlWordAtOrAfterOffset(e,n.column-1);for(let s=n.column-1;s<o;s++){const n=e.charCodeAt(s),o=t.get(n);if(r&&s===r.index)return this._createIntlWord(r,o);if(0===o){if(2===i)return this._createWord(e,i,o,this._findStartOfWord(e,t,i,s-1),s);i=1}else if(2===o){if(1===i)return this._createWord(e,i,o,this._findStartOfWord(e,t,i,s-1),s);i=2}else if(1===o&&0!==i)return this._createWord(e,i,o,this._findStartOfWord(e,t,i,s-1),s)}return 0!==i?this._createWord(e,i,1,this._findStartOfWord(e,t,i,o-1),o):null}static _findStartOfWord(e,t,n,i){const o=t.findPrevIntlWordBeforeOrAtOffset(e,i);for(let r=i;r>=0;r--){const i=e.charCodeAt(r),s=t.get(i);if(o&&r===o.index)return r;if(1===s)return r+1;if(1===n&&2===s)return r+1;if(2===n&&0===s)return r+1}return 0}static moveWordLeft(e,t,n,i,o){let r=n.lineNumber,s=n.column;1===s&&r>1&&(r-=1,s=t.getLineMaxColumn(r));let a=u._findPreviousWordOnLine(e,t,new l.y(r,s));if(0===i)return new l.y(r,a?a.start+1:1);if(1===i)return!o&&a&&2===a.wordType&&a.end-a.start===1&&0===a.nextCharClass&&(a=u._findPreviousWordOnLine(e,t,new l.y(r,a.start+1))),new l.y(r,a?a.start+1:1);if(3===i){for(;a&&2===a.wordType;)a=u._findPreviousWordOnLine(e,t,new l.y(r,a.start+1));return new l.y(r,a?a.start+1:1)}return a&&s<=a.end+1&&(a=u._findPreviousWordOnLine(e,t,new l.y(r,a.start+1))),new l.y(r,a?a.end+1:1)}static _moveWordPartLeft(e,t){const n=t.lineNumber,o=e.getLineMaxColumn(n);if(1===t.column)return n>1?new l.y(n-1,e.getLineMaxColumn(n-1)):t;const r=e.getLineContent(n);for(let e=t.column-1;e>1;e--){const t=r.charCodeAt(e-2),s=r.charCodeAt(e-1);if(95===t&&95!==s)return new l.y(n,e);if(45===t&&45!==s)return new l.y(n,e);if((i.Lv(t)||i.DB(t))&&i.Wv(s))return new l.y(n,e);if(i.Wv(t)&&i.Wv(s)&&e+1<o){const t=r.charCodeAt(e);if(i.Lv(t)||i.DB(t))return new l.y(n,e)}}return new l.y(n,1)}static moveWordRight(e,t,n,i){let o=n.lineNumber,r=n.column,s=!1;r===t.getLineMaxColumn(o)&&o<t.getLineCount()&&(s=!0,o+=1,r=1);let a=u._findNextWordOnLine(e,t,new l.y(o,r));if(2===i)a&&2===a.wordType&&a.end-a.start===1&&0===a.nextCharClass&&(a=u._findNextWordOnLine(e,t,new l.y(o,a.end+1))),r=a?a.end+1:t.getLineMaxColumn(o);else if(3===i){for(s&&(r=0);a&&(2===a.wordType||a.start+1<=r);)a=u._findNextWordOnLine(e,t,new l.y(o,a.end+1));r=a?a.start+1:t.getLineMaxColumn(o)}else a&&!s&&r>=a.start+1&&(a=u._findNextWordOnLine(e,t,new l.y(o,a.end+1))),r=a?a.start+1:t.getLineMaxColumn(o);return new l.y(o,r)}static _moveWordPartRight(e,t){const n=t.lineNumber,o=e.getLineMaxColumn(n);if(t.column===o)return n<e.getLineCount()?new l.y(n+1,1):t;const r=e.getLineContent(n);for(let e=t.column+1;e<o;e++){const t=r.charCodeAt(e-2),s=r.charCodeAt(e-1);if(95!==t&&95===s)return new l.y(n,e);if(45!==t&&45===s)return new l.y(n,e);if((i.Lv(t)||i.DB(t))&&i.Wv(s))return new l.y(n,e);if(i.Wv(t)&&i.Wv(s)&&e+1<o){const t=r.charCodeAt(e);if(i.Lv(t)||i.DB(t))return new l.y(n,e)}}return new l.y(n,o)}static _deleteWordLeftWhitespace(e,t){const n=e.getLineContent(t.lineNumber),o=t.column-2,r=i.lT(n,o);return r+1<o?new a.Q(t.lineNumber,r+2,t.lineNumber,t.column):null}static deleteWordLeft(e,t){const n=e.wordSeparators,i=e.model,o=e.selection,s=e.whitespaceHeuristics;if(!o.isEmpty())return o;if(r.g.isAutoClosingPairDelete(e.autoClosingDelete,e.autoClosingBrackets,e.autoClosingQuotes,e.autoClosingPairs.autoClosingPairsOpenByEnd,e.model,[e.selection],e.autoClosedCharacters)){const t=e.selection.getPosition();return new a.Q(t.lineNumber,t.column-1,t.lineNumber,t.column+1)}const c=new l.y(o.positionLineNumber,o.positionColumn);let m=c.lineNumber,d=c.column;if(1===m&&1===d)return null;if(s){const e=this._deleteWordLeftWhitespace(i,c);if(e)return e}let h=u._findPreviousWordOnLine(n,i,c);return 0===t?h?d=h.start+1:d>1?d=1:(m--,d=i.getLineMaxColumn(m)):(h&&d<=h.end+1&&(h=u._findPreviousWordOnLine(n,i,new l.y(m,h.start+1))),h?d=h.end+1:d>1?d=1:(m--,d=i.getLineMaxColumn(m))),new a.Q(m,d,c.lineNumber,c.column)}static deleteInsideWord(e,t,n){if(!n.isEmpty())return n;const i=new l.y(n.positionLineNumber,n.positionColumn);return this._deleteInsideWordWhitespace(t,i)||this._deleteInsideWordDetermineDeleteRange(e,t,i)}static _charAtIsWhitespace(e,t){const n=e.charCodeAt(t);return 32===n||9===n}static _deleteInsideWordWhitespace(e,t){const n=e.getLineContent(t.lineNumber),i=n.length;if(0===i)return null;let o=Math.max(t.column-2,0);if(!this._charAtIsWhitespace(n,o))return null;let r=Math.min(t.column-1,i-1);if(!this._charAtIsWhitespace(n,r))return null;for(;o>0&&this._charAtIsWhitespace(n,o-1);)o--;for(;r+1<i&&this._charAtIsWhitespace(n,r+1);)r++;return new a.Q(t.lineNumber,o+1,t.lineNumber,r+2)}static _deleteInsideWordDetermineDeleteRange(e,t,n){const i=t.getLineContent(n.lineNumber),o=i.length;if(0===o)return n.lineNumber>1?new a.Q(n.lineNumber-1,t.getLineMaxColumn(n.lineNumber-1),n.lineNumber,1):n.lineNumber<t.getLineCount()?new a.Q(n.lineNumber,1,n.lineNumber+1,1):new a.Q(n.lineNumber,1,n.lineNumber,1);const r=e=>e.start+1<=n.column&&n.column<=e.end+1,s=(e,t)=>(e=Math.min(e,n.column),t=Math.max(t,n.column),new a.Q(n.lineNumber,e,n.lineNumber,t)),l=e=>{let t=e.start+1,n=e.end+1,r=!1;for(;n-1<o&&this._charAtIsWhitespace(i,n-1);)r=!0,n++;if(!r)for(;t>1&&this._charAtIsWhitespace(i,t-2);)t--;return s(t,n)},c=u._findPreviousWordOnLine(e,t,n);if(c&&r(c))return l(c);const m=u._findNextWordOnLine(e,t,n);return m&&r(m)?l(m):c&&m?s(c.end+1,m.start+1):c?s(c.start+1,c.end+1):m?s(m.start+1,m.end+1):s(1,o+1)}static _deleteWordPartLeft(e,t){if(!t.isEmpty())return t;const n=t.getPosition(),i=u._moveWordPartLeft(e,n);return new a.Q(n.lineNumber,n.column,i.lineNumber,i.column)}static _findFirstNonWhitespaceChar(e,t){const n=e.length;for(let i=t;i<n;i++){const t=e.charAt(i);if(" "!==t&&"\t"!==t)return i}return n}static _deleteWordRightWhitespace(e,t){const n=e.getLineContent(t.lineNumber),i=t.column-1,o=this._findFirstNonWhitespaceChar(n,i);return i+1<o?new a.Q(t.lineNumber,t.column,t.lineNumber,o+1):null}static deleteWordRight(e,t){const n=e.wordSeparators,i=e.model,o=e.selection,r=e.whitespaceHeuristics;if(!o.isEmpty())return o;const s=new l.y(o.positionLineNumber,o.positionColumn);let c=s.lineNumber,m=s.column;const d=i.getLineCount(),h=i.getLineMaxColumn(c);if(c===d&&m===h)return null;if(r){const e=this._deleteWordRightWhitespace(i,s);if(e)return e}let g=u._findNextWordOnLine(n,i,s);return 2===t?g?m=g.end+1:m<h||c===d?m=h:(c++,g=u._findNextWordOnLine(n,i,new l.y(c,1)),m=g?g.start+1:i.getLineMaxColumn(c)):(g&&m>=g.start+1&&(g=u._findNextWordOnLine(n,i,new l.y(c,g.end+1))),g?m=g.start+1:m<h||c===d?m=h:(c++,g=u._findNextWordOnLine(n,i,new l.y(c,1)),m=g?g.start+1:i.getLineMaxColumn(c))),new a.Q(c,m,s.lineNumber,s.column)}static _deleteWordPartRight(e,t){if(!t.isEmpty())return t;const n=t.getPosition(),i=u._moveWordPartRight(e,n);return new a.Q(n.lineNumber,n.column,i.lineNumber,i.column)}static _createWordAtPosition(e,t,n){const i=new a.Q(t,n.start+1,t,n.end+1);return{word:e.getValueInRange(i),startColumn:i.startColumn,endColumn:i.endColumn}}static getWordAtPosition(e,t,n,i){const o=(0,s.i)(t,n),r=u._findPreviousWordOnLine(o,e,i);if(r&&1===r.wordType&&r.start<=i.column-1&&i.column-1<=r.end)return u._createWordAtPosition(e,i.lineNumber,r);const l=u._findNextWordOnLine(o,e,i);return l&&1===l.wordType&&l.start<=i.column-1&&i.column-1<=l.end?u._createWordAtPosition(e,i.lineNumber,l):null}static word(e,t,n,i,r){const c=(0,s.i)(e.wordSeparators,e.wordSegmenterLocales),m=u._findPreviousWordOnLine(c,t,r),d=u._findNextWordOnLine(c,t,r);if(!i){let e,n;return m&&1===m.wordType&&m.start<=r.column-1&&r.column-1<=m.end?(e=m.start+1,n=m.end+1):d&&1===d.wordType&&d.start<=r.column-1&&r.column-1<=d.end?(e=d.start+1,n=d.end+1):(e=m?m.end+1:1,n=d?d.start+1:t.getLineMaxColumn(r.lineNumber)),new o.mG(new a.Q(r.lineNumber,e,r.lineNumber,n),1,0,new l.y(r.lineNumber,n),0)}let h,g;m&&1===m.wordType&&m.start<r.column-1&&r.column-1<m.end?(h=m.start+1,g=m.end+1):d&&1===d.wordType&&d.start<r.column-1&&r.column-1<d.end?(h=d.start+1,g=d.end+1):(h=r.column,g=r.column);const f=r.lineNumber;let C;if(n.selectionStart.containsPosition(r))C=n.selectionStart.endColumn;else if(r.isBeforeOrEqual(n.selectionStart.getStartPosition())){C=h;const e=new l.y(f,C);n.selectionStart.containsPosition(e)&&(C=n.selectionStart.endColumn)}else{C=g;const e=new l.y(f,C);n.selectionStart.containsPosition(e)&&(C=n.selectionStart.startColumn)}return n.move(!0,f,C,0)}}},98234:(e,t,n)=>{n.d(t,{AO:()=>N,Dr:()=>P,Hs:()=>T,K4:()=>w,Ls:()=>v,UN:()=>E,YA:()=>x,dU:()=>p,ey:()=>D,h0:()=>y,is:()=>b,kr:()=>L,oi:()=>_,sx:()=>S});var i=n(73226),o=n(60891),r=n(79239),s=n(89451),l=n(89323),a=n(90130),u=n(28227),c=n(81304),m=n(55818),d=n(32125),h=n(53439),g=n(94457),f=n(91080),C=n(64049);class p{static getEdits(e,t,n,i,o){if(!o&&this._isAutoIndentType(e,t,n)){const o=[];for(const r of n){const n=this._findActualIndentationForSelection(e,t,r,i);if(null===n)return;o.push({selection:r,indentation:n})}const r=_.getAutoClosingPairClose(e,t,n,i,!1);return this._getIndentationAndAutoClosingPairEdits(e,t,o,i,r)}}static _isAutoIndentType(e,t,n){if(e.autoIndent<4)return!1;for(let e=0,i=n.length;e<i;e++)if(!t.tokenization.isCheapToTokenize(n[e].getEndPosition().lineNumber))return!1;return!0}static _findActualIndentationForSelection(e,t,n,i){const o=(0,f._t)(e,t,n,i,{shiftIndent:t=>R(e,t),unshiftIndent:t=>F(e,t)},e.languageConfigurationService);if(null===o)return null;const r=(0,h.Cw)(t,n.startLineNumber,n.startColumn);return o===e.normalizeIndentation(r)?null:o}static _getIndentationAndAutoClosingPairEdits(e,t,n,i,o){const r=n.map(({selection:n,indentation:r})=>{if(null!==o){const s=this._getEditFromIndentationAndSelection(e,t,r,n,i,!1);return new M(s,n,i,o)}{const o=this._getEditFromIndentationAndSelection(e,t,r,n,i,!0);return B(o.range,o.text,!1)}});return new a.vY(4,r,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}static _getEditFromIndentationAndSelection(e,t,n,i,o,r=!0){const s=i.startLineNumber,l=t.getLineFirstNonWhitespaceColumn(s);let a=e.normalizeIndentation(n);return 0!==l&&(a+=t.getLineContent(s).substring(l-1,i.startColumn-1)),a+=r?o:"",{range:new c.Q(s,1,i.endLineNumber,i.endColumn),text:a}}}class S{static getEdits(e,t,n,i,o,r){if(W(t,n,i,o,r))return this._runAutoClosingOvertype(e,i,r)}static _runAutoClosingOvertype(e,t,n){const i=[];for(let e=0,o=t.length;e<o;e++){const o=t[e].getPosition(),s=new c.Q(o.lineNumber,o.column,o.lineNumber,o.column+1);i[e]=new r.iu(s,n)}return new a.vY(4,i,{shouldPushStackElementBefore:I(e,4),shouldPushStackElementAfter:!1})}}class w{static getEdits(e,t,n,i,o){if(W(e,t,n,i,o)){const e=n.map(e=>new r.iu(new c.Q(e.positionLineNumber,e.positionColumn,e.positionLineNumber,e.positionColumn+1),"",!1));return new a.vY(4,e,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}}}class _{static getEdits(e,t,n,i,o,r){if(!r){const r=this.getAutoClosingPairClose(e,t,n,i,o);if(null!==r)return this._runAutoClosingOpenCharType(n,i,o,r)}}static _runAutoClosingOpenCharType(e,t,n,i){const o=[];for(let r=0,s=e.length;r<s;r++){const s=e[r];o[r]=new k(s,t,!n,i)}return new a.vY(4,o,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}static getAutoClosingPairClose(e,t,n,i,o){for(const e of n)if(!e.isEmpty())return null;const r=n.map(e=>{const t=e.getPosition();return o?{lineNumber:t.lineNumber,beforeColumn:t.column-i.length,afterColumn:t.column}:{lineNumber:t.lineNumber,beforeColumn:t.column,afterColumn:t.column}}),s=this._findAutoClosingPairOpen(e,t,r.map(e=>new m.y(e.lineNumber,e.beforeColumn)),i);if(!s)return null;let l,c;if((0,a.vG)(i)?(l=e.autoClosingQuotes,c=e.shouldAutoCloseBefore.quote):e.blockCommentStartToken&&s.open.includes(e.blockCommentStartToken)?(l=e.autoClosingComments,c=e.shouldAutoCloseBefore.comment):(l=e.autoClosingBrackets,c=e.shouldAutoCloseBefore.bracket),"never"===l)return null;const d=this._findContainedAutoClosingPair(e,s),h=d?d.close:"";let f=!0;for(const n of r){const{lineNumber:o,beforeColumn:r,afterColumn:a}=n,m=t.getLineContent(o),d=m.substring(0,r-1),C=m.substring(a-1);if(C.startsWith(h)||(f=!1),C.length>0){const t=C.charAt(0);if(!this._isBeforeClosingBrace(e,C)&&!c(t))return null}if(1===s.open.length&&("'"===i||'"'===i)&&"always"!==l){const t=(0,u.i)(e.wordSeparators,[]);if(d.length>0){const e=d.charCodeAt(d.length-1);if(0===t.get(e))return null}}if(!t.tokenization.isCheapToTokenize(o))return null;t.tokenization.forceTokenization(o);const p=t.tokenization.getLineTokens(o),S=(0,g.BQ)(p,r-1);if(!s.shouldAutoClose(S,r-S.firstCharOffset))return null;const w=s.findNeutralCharacter();if(w){const e=t.tokenization.getTokenTypeIfInsertingCharacter(o,r,w);if(!s.isOK(e))return null}}return f?s.close.substring(0,s.close.length-h.length):s.close}static _findContainedAutoClosingPair(e,t){if(t.open.length<=1)return null;const n=t.close.charAt(t.close.length-1),i=e.autoClosingPairs.autoClosingPairsCloseByEnd.get(n)||[];let o=null;for(const e of i)e.open!==t.open&&t.open.includes(e.open)&&t.close.endsWith(e.close)&&(!o||e.open.length>o.open.length)&&(o=e);return o}static _findAutoClosingPairOpen(e,t,n,i){const o=e.autoClosingPairs.autoClosingPairsOpenByEnd.get(i);if(!o)return null;let r=null;for(const e of o)if(null===r||e.open.length>r.open.length){let o=!0;for(const r of n)if(t.getValueInRange(new c.Q(r.lineNumber,r.column-e.open.length+1,r.lineNumber,r.column))+i!==e.open){o=!1;break}o&&(r=e)}return r}static _isBeforeClosingBrace(e,t){const n=t.charAt(0),i=e.autoClosingPairs.autoClosingPairsOpenByStart.get(n)||[],o=e.autoClosingPairs.autoClosingPairsCloseByStart.get(n)||[],r=i.some(e=>t.startsWith(e.open)),s=o.some(e=>t.startsWith(e.close));return!r&&s}}class b{static getEdits(e,t,n,i,o){if(!o&&this._isSurroundSelectionType(e,t,n,i))return this._runSurroundSelectionType(e,n,i)}static _runSurroundSelectionType(e,t,n){const i=[];for(let o=0,r=t.length;o<r;o++){const r=t[o],s=e.surroundingPairs[n];i[o]=new l.i(r,n,s)}return new a.vY(0,i,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _isSurroundSelectionType(e,t,n,i){if(!D(e,i)||!e.surroundingPairs.hasOwnProperty(i))return!1;const o=(0,a.vG)(i);for(const e of n){if(e.isEmpty())return!1;let n=!0;for(let i=e.startLineNumber;i<=e.endLineNumber;i++){const o=t.getLineContent(i),r=i===e.startLineNumber?e.startColumn-1:0,s=i===e.endLineNumber?e.endColumn-1:o.length,l=o.substring(r,s);if(/[^ \t]/.test(l)){n=!1;break}}if(n)return!1;if(o&&e.startLineNumber===e.endLineNumber&&e.startColumn+1===e.endColumn){const n=t.getValueInRange(e);if((0,a.vG)(n))return!1}}return!0}}class L{static getEdits(e,t,n,i,o,r){if(!r&&this._isTypeInterceptorElectricChar(t,n,i)){const r=this._typeInterceptorElectricChar(e,t,n,i[0],o);if(r)return r}}static _isTypeInterceptorElectricChar(e,t,n){return!(1!==n.length||!t.tokenization.isCheapToTokenize(n[0].getEndPosition().lineNumber))}static _typeInterceptorElectricChar(e,t,n,s,l){if(!t.electricChars.hasOwnProperty(l)||!s.isEmpty())return null;const u=s.getPosition();n.tokenization.forceTokenization(u.lineNumber);const m=n.tokenization.getLineTokens(u.lineNumber);let d;try{d=t.onElectricCharacter(l,m,u.column)}catch(e){return(0,i.dz)(e),null}if(!d)return null;if(d.matchOpenBracket){const i=(m.getLineContent()+l).lastIndexOf(d.matchOpenBracket)+1,s=n.bracketPairs.findMatchingBracketUp(d.matchOpenBracket,{lineNumber:u.lineNumber,column:i},500);if(s){if(s.startLineNumber===u.lineNumber)return null;const i=n.getLineContent(s.startLineNumber),m=o.UU(i),d=t.normalizeIndentation(m),h=n.getLineContent(u.lineNumber),g=n.getLineFirstNonWhitespaceColumn(u.lineNumber)||u.column,f=d+h.substring(g-1,u.column-1)+l,C=new c.Q(u.lineNumber,1,u.lineNumber,u.column),p=new r.iu(C,f);return new a.vY(A(f,e),[p],{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!0})}}return null}}class v{static getEdits(e,t,n){const i=[];for(let e=0,o=t.length;e<o;e++)i[e]=new r.iu(t[e],n);const o=A(n,e);return new a.vY(o,i,{shouldPushStackElementBefore:I(e,o),shouldPushStackElementAfter:!1})}}class N{static getEdits(e,t,n,i,o){if(!o&&"\n"===i){const i=[];for(let o=0,r=n.length;o<r;o++)i[o]=this._enter(e,t,!1,n[o]);return new a.vY(4,i,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}}static _enter(e,t,n,i){if(0===e.autoIndent)return B(i,"\n",n);if(!t.tokenization.isCheapToTokenize(i.getStartPosition().lineNumber)||1===e.autoIndent){const r=t.getLineContent(i.startLineNumber),s=o.UU(r).substring(0,i.startColumn-1);return B(i,"\n"+e.normalizeIndentation(s),n)}const s=(0,C.h)(e.autoIndent,t,i,e.languageConfigurationService);if(s){if(s.indentAction===d.l.None)return B(i,"\n"+e.normalizeIndentation(s.indentation+s.appendText),n);if(s.indentAction===d.l.Indent)return B(i,"\n"+e.normalizeIndentation(s.indentation+s.appendText),n);if(s.indentAction===d.l.IndentOutdent){const t=e.normalizeIndentation(s.indentation),o=e.normalizeIndentation(s.indentation+s.appendText),l="\n"+o+"\n"+t;return n?new r.q2(i,l,!0):new r.iP(i,l,-1,o.length-t.length,!0)}if(s.indentAction===d.l.Outdent){const t=F(e,s.indentation);return B(i,"\n"+e.normalizeIndentation(t+s.appendText),n)}}const l=t.getLineContent(i.startLineNumber),a=o.UU(l).substring(0,i.startColumn-1);if(e.autoIndent>=4){const s=(0,f.MU)(e.autoIndent,t,i,{unshiftIndent:t=>F(e,t),shiftIndent:t=>R(e,t),normalizeIndentation:t=>e.normalizeIndentation(t)},e.languageConfigurationService);if(s){let l=e.visibleColumnFromColumn(t,i.getEndPosition());const a=i.endColumn,u=t.getLineContent(i.endLineNumber),c=o.HG(u);if(i=c>=0?i.setEndPosition(i.endLineNumber,Math.max(i.endColumn,c+1)):i.setEndPosition(i.endLineNumber,t.getLineMaxColumn(i.endLineNumber)),n)return new r.q2(i,"\n"+e.normalizeIndentation(s.afterEnter),!0);{let t=0;return a<=c+1&&(e.insertSpaces||(l=Math.ceil(l/e.indentSize)),t=Math.min(l+1-e.normalizeIndentation(s.afterEnter).length-1,0)),new r.iP(i,"\n"+e.normalizeIndentation(s.afterEnter),0,t,!0)}}}return B(i,"\n"+e.normalizeIndentation(a),n)}static lineInsertBefore(e,t,n){if(null===t||null===n)return[];const i=[];for(let o=0,s=n.length;o<s;o++){let s=n[o].positionLineNumber;if(1===s)i[o]=new r.q2(new c.Q(1,1,1,1),"\n");else{s--;const n=t.getLineMaxColumn(s);i[o]=this._enter(e,t,!1,new c.Q(s,n,s,n))}}return i}static lineInsertAfter(e,t,n){if(null===t||null===n)return[];const i=[];for(let o=0,r=n.length;o<r;o++){const r=n[o].positionLineNumber,s=t.getLineMaxColumn(r);i[o]=this._enter(e,t,!1,new c.Q(r,s,r,s))}return i}static lineBreakInsert(e,t,n){const i=[];for(let o=0,r=n.length;o<r;o++)i[o]=this._enter(e,t,!0,n[o]);return i}}class P{static getEdits(e,t,n,i,o,r){const s=this._distributePasteToCursors(e,n,i,o,r);return s?(n=n.sort(c.Q.compareRangesUsingStarts),this._distributedPaste(e,t,n,s)):this._simplePaste(e,t,n,i,o)}static _distributePasteToCursors(e,t,n,i,r){if(i)return null;if(1===t.length)return null;if(r&&r.length===t.length)return r;if("spread"===e.multiCursorPaste){10===n.charCodeAt(n.length-1)&&(n=n.substring(0,n.length-1)),13===n.charCodeAt(n.length-1)&&(n=n.substring(0,n.length-1));const e=o.uz(n);if(e.length===t.length)return e}return null}static _distributedPaste(e,t,n,i){const o=[];for(let e=0,t=n.length;e<t;e++)o[e]=new r.iu(n[e],i[e]);return new a.vY(0,o,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _simplePaste(e,t,n,i,o){const s=[];for(let e=0,t=n.length;e<t;e++){const t=n[e],l=t.getPosition();if(o&&!t.isEmpty()&&(o=!1),o&&i.indexOf("\n")!==i.length-1&&(o=!1),o){const n=new c.Q(l.lineNumber,1,l.lineNumber,1);s[e]=new r.ui(n,i,t,!0)}else s[e]=new r.iu(t,i)}return new a.vY(0,s,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}}class x{static getEdits(e,t,n,i,o,r,s,l){const u=i.map(e=>this._compositionType(n,e,o,r,s,l));return new a.vY(4,u,{shouldPushStackElementBefore:I(e,4),shouldPushStackElementAfter:!1})}static _compositionType(e,t,n,i,o,s){if(!t.isEmpty())return null;const l=t.getPosition(),a=Math.max(1,l.column-i),u=Math.min(e.getLineMaxColumn(l.lineNumber),l.column+o),m=new c.Q(l.lineNumber,a,l.lineNumber,u);return e.getValueInRange(m)===n&&0===s?null:new r.iP(m,n,0,s)}}class E{static getEdits(e,t,n){const i=[];for(let e=0,o=t.length;e<o;e++)i[e]=new r.iu(t[e],n);const o=A(n,e);return new a.vY(o,i,{shouldPushStackElementBefore:I(e,o),shouldPushStackElementAfter:!1})}}class y{static getCommands(e,t,n){const i=[];for(let o=0,l=n.length;o<l;o++){const l=n[o];if(l.isEmpty()){const n=t.getLineContent(l.startLineNumber);if(/^\s*$/.test(n)&&t.tokenization.isCheapToTokenize(l.startLineNumber)){let s=this._goodIndentForLine(e,t,l.startLineNumber);s=s||"\t";const a=e.normalizeIndentation(s);if(!n.startsWith(a)){i[o]=new r.iu(new c.Q(l.startLineNumber,1,l.startLineNumber,n.length+1),a,!0);continue}}i[o]=this._replaceJumpToNextIndent(e,t,l,!0)}else{if(l.startLineNumber===l.endLineNumber){const n=t.getLineMaxColumn(l.startLineNumber);if(1!==l.startColumn||l.endColumn!==n){i[o]=this._replaceJumpToNextIndent(e,t,l,!1);continue}}i[o]=new s.Y(l,{isUnshift:!1,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent},e.languageConfigurationService)}}return i}static _goodIndentForLine(e,t,n){let i=null,r="";const s=(0,f.vn)(e.autoIndent,t,n,!1,e.languageConfigurationService);if(s)i=s.action,r=s.indentation;else if(n>1){let i;for(i=n-1;i>=1;i--){const e=t.getLineContent(i);if(o.lT(e)>=0)break}if(i<1)return null;const s=t.getLineMaxColumn(i),l=(0,C.h)(e.autoIndent,t,new c.Q(i,s,i,s),e.languageConfigurationService);l&&(r=l.indentation+l.appendText)}return i&&(i===d.l.Indent&&(r=R(e,r)),i===d.l.Outdent&&(r=F(e,r)),r=e.normalizeIndentation(r)),r||null}static _replaceJumpToNextIndent(e,t,n,i){let o="";const s=n.getStartPosition();if(e.insertSpaces){const n=e.visibleColumnFromColumn(t,s),i=e.indentSize,r=i-n%i;for(let e=0;e<r;e++)o+=" "}else o="\t";return new r.iu(n,o,i)}}class T extends r.iP{constructor(e,t,n,i,o,r){super(e,t,n,i),this._openCharacter=o,this._closeCharacter=r,this.closeCharacterRange=null,this.enclosingRange=null}_computeCursorStateWithRange(e,t,n){return this.closeCharacterRange=new c.Q(t.startLineNumber,t.endColumn-this._closeCharacter.length,t.endLineNumber,t.endColumn),this.enclosingRange=new c.Q(t.startLineNumber,t.endColumn-this._openCharacter.length-this._closeCharacter.length,t.endLineNumber,t.endColumn),super.computeCursorState(e,n)}}class k extends T{constructor(e,t,n,i){super(e,(n?t:"")+i,0,-i.length,t,i)}computeCursorState(e,t){const n=t.getInverseEditOperations()[0].range;return this._computeCursorStateWithRange(e,n,t)}}class M extends T{constructor(e,t,n,i){const o=n+i;super(t,o,0,n.length,n,i),this._autoIndentationEdit=e,this._autoClosingEdit={range:t,text:o}}getEditOperations(e,t){t.addTrackedEditOperation(this._autoIndentationEdit.range,this._autoIndentationEdit.text),t.addTrackedEditOperation(this._autoClosingEdit.range,this._autoClosingEdit.text)}computeCursorState(e,t){const n=t.getInverseEditOperations();if(2!==n.length)throw new Error("There should be two inverse edit operations!");const i=n[0].range,o=n[1].range,r=i.plusRange(o);return this._computeCursorStateWithRange(e,r,t)}}function A(e,t){return" "===e?5===t||6===t?6:5:4}function I(e,t){return!(!O(e)||O(t))||5!==e&&V(e)!==V(t)}function V(e){return 6===e||5===e?"space":e}function O(e){return 4===e||5===e||6===e}function W(e,t,n,i,o){if("never"===e.autoClosingOvertype)return!1;if(!e.autoClosingPairs.autoClosingPairsCloseSingleChar.has(o))return!1;for(let r=0,s=n.length;r<s;r++){const s=n[r];if(!s.isEmpty())return!1;const l=s.getPosition(),u=t.getLineContent(l.lineNumber);if(u.charAt(l.column-1)!==o)return!1;const c=(0,a.vG)(o);if(92===(l.column>2?u.charCodeAt(l.column-2):0)&&c)return!1;if("auto"===e.autoClosingOvertype){let e=!1;for(let t=0,n=i.length;t<n;t++){const n=i[t];if(l.lineNumber===n.startLineNumber&&l.column===n.startColumn){e=!0;break}}if(!e)return!1}}return!0}function B(e,t,n){return n?new r.q2(e,t,!0):new r.iu(e,t,!0)}function R(e,t,n){return n=n||1,s.Y.shiftIndent(t,t.length+n,e.tabSize,e.indentSize,e.insertSpaces)}function F(e,t,n){return n=n||1,s.Y.unshiftIndent(t,t.length+n,e.tabSize,e.indentSize,e.insertSpaces)}function D(e,t){return(0,a.vG)(t)?"quotes"===e.autoSurround||"languageDefined"===e.autoSurround:"brackets"===e.autoSurround||"languageDefined"===e.autoSurround}}}]);