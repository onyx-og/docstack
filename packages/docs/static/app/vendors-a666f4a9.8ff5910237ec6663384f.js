"use strict";(self.webpackChunk_docstack_ui=self.webpackChunk_docstack_ui||[]).push([[1368],{95095:(t,e,i)=>{i.d(e,{x:()=>d});var s=i(14333),o=i(20396),n=i(65568),r=i(98315),a=i(10998),l=i(71386),c=i(19746);const h=s.$;class d extends a.jG{constructor(t,e,i){super(),this.os=e,this.keyElements=new Set,this.options=i||Object.create(null);const r=this.options.keybindingLabelForeground;this.domNode=s.BC(t,h(".monaco-keybinding")),r&&(this.domNode.style.color=r),this.hover=this._register((0,o.i)().setupManagedHover((0,n.nZ)("mouse"),this.domNode,"")),this.didEverRender=!1,t.appendChild(this.domNode)}get element(){return this.domNode}set(t,e){this.didEverRender&&this.keybinding===t&&d.areSame(this.matches,e)||(this.keybinding=t,this.matches=e,this.render())}render(){if(this.clear(),this.keybinding){const t=this.keybinding.getChords();t[0]&&this.renderChord(this.domNode,t[0],this.matches?this.matches.firstPart:null);for(let e=1;e<t.length;e++)s.BC(this.domNode,h("span.monaco-keybinding-key-chord-separator",void 0," ")),this.renderChord(this.domNode,t[e],this.matches?this.matches.chordPart:null);const e=this.options.disableTitle?void 0:this.keybinding.getAriaLabel()||void 0;this.hover.update(e),this.domNode.setAttribute("aria-label",e||"")}else this.options&&this.options.renderUnboundKeybindings&&this.renderUnbound(this.domNode);this.didEverRender=!0}clear(){s.w_(this.domNode),this.keyElements.clear()}renderChord(t,e,i){const s=r.Of.modifierLabels[this.os];e.ctrlKey&&this.renderKey(t,s.ctrlKey,Boolean(i?.ctrlKey),s.separator),e.shiftKey&&this.renderKey(t,s.shiftKey,Boolean(i?.shiftKey),s.separator),e.altKey&&this.renderKey(t,s.altKey,Boolean(i?.altKey),s.separator),e.metaKey&&this.renderKey(t,s.metaKey,Boolean(i?.metaKey),s.separator);const o=e.keyLabel;o&&this.renderKey(t,o,Boolean(i?.keyCode),"")}renderKey(t,e,i,o){s.BC(t,this.createKeyElement(e,i?".highlight":"")),o&&s.BC(t,h("span.monaco-keybinding-key-separator",void 0,o))}renderUnbound(t){s.BC(t,this.createKeyElement((0,c.kg)("unbound","Unbound")))}createKeyElement(t,e=""){const i=h("span.monaco-keybinding-key"+e,void 0,t);return this.keyElements.add(i),this.options.keybindingLabelBackground&&(i.style.backgroundColor=this.options.keybindingLabelBackground),this.options.keybindingLabelBorder&&(i.style.borderColor=this.options.keybindingLabelBorder),this.options.keybindingLabelBottomBorder&&(i.style.borderBottomColor=this.options.keybindingLabelBottomBorder),this.options.keybindingLabelShadow&&(i.style.boxShadow=`inset 0 -1px 0 ${this.options.keybindingLabelShadow}`),i}static areSame(t,e){return t===e||!t&&!e||!!t&&!!e&&(0,l.aI)(t.firstPart,e.firstPart)&&(0,l.aI)(t.chordPart,e.chordPart)}}},33697:(t,e,i)=>{i.d(e,{Y:()=>h});var s=i(13338),o=i(78903),n=i(2106),r=i(10998),a=i(67954);class l{get templateId(){return this.renderer.templateId}constructor(t,e){this.renderer=t,this.modelProvider=e}renderTemplate(t){return{data:this.renderer.renderTemplate(t),disposable:r.jG.None}}renderElement(t,e,i,s){if(i.disposable?.dispose(),!i.data)return;const n=this.modelProvider();if(n.isResolved(t))return this.renderer.renderElement(n.get(t),t,i.data,s);const r=new o.Qi,a=n.resolve(t,r.token);i.disposable={dispose:()=>r.cancel()},this.renderer.renderPlaceholder(t,i.data),a.then((e=>this.renderer.renderElement(e,t,i.data,s)))}disposeTemplate(t){t.disposable&&(t.disposable.dispose(),t.disposable=void 0),t.data&&(this.renderer.disposeTemplate(t.data),t.data=void 0)}}class c{constructor(t,e){this.modelProvider=t,this.accessibilityProvider=e}getWidgetAriaLabel(){return this.accessibilityProvider.getWidgetAriaLabel()}getAriaLabel(t){const e=this.modelProvider();return e.isResolved(t)?this.accessibilityProvider.getAriaLabel(e.get(t)):null}}class h{constructor(t,e,i,s,o={}){const n=()=>this.model,r=s.map((t=>new l(t,n)));this.list=new a.B8(t,e,i,r,function(t,e){return{...e,accessibilityProvider:e.accessibilityProvider&&new c(t,e.accessibilityProvider)}}(n,o))}updateOptions(t){this.list.updateOptions(t)}getHTMLElement(){return this.list.getHTMLElement()}get onDidFocus(){return this.list.onDidFocus}get widget(){return this.list}get onDidDispose(){return this.list.onDidDispose}get onMouseDblClick(){return n.Jh.map(this.list.onMouseDblClick,(({element:t,index:e,browserEvent:i})=>({element:void 0===t?void 0:this._model.get(t),index:e,browserEvent:i})))}get onPointer(){return n.Jh.map(this.list.onPointer,(({element:t,index:e,browserEvent:i})=>({element:void 0===t?void 0:this._model.get(t),index:e,browserEvent:i})))}get onDidChangeSelection(){return n.Jh.map(this.list.onDidChangeSelection,(({elements:t,indexes:e,browserEvent:i})=>({elements:t.map((t=>this._model.get(t))),indexes:e,browserEvent:i})))}get model(){return this._model}set model(t){this._model=t,this.list.splice(0,this.list.length,(0,s.y1)(t.length))}getFocus(){return this.list.getFocus()}getSelection(){return this.list.getSelection()}getSelectedElements(){return this.getSelection().map((t=>this.model.get(t)))}style(t){this.list.style(t)}dispose(){this.list.dispose()}}},83022:(t,e,i)=>{i.d(e,{ur:()=>E,uO:()=>N});var s=i(39587),o=i(14333),n=i(34061),r=i(30474),a=i(58354),l=i(13338),c=i(65958),h=i(88846),d=i(2106),u=i(10998),m=i(82199),p=i(94513);function g(t,e){const i=[];for(const s of e){if(t.start>=s.range.end)continue;if(t.end<s.range.start)break;const e=m.Q.intersect(t,s.range);m.Q.isEmpty(e)||i.push({range:e,size:s.size})}return i}function b({start:t,end:e},i){return{start:t+i,end:e+i}}class v{get paddingTop(){return this._paddingTop}set paddingTop(t){this._size=this._size+t-this._paddingTop,this._paddingTop=t}constructor(t){this.groups=[],this._size=0,this._paddingTop=0,this._paddingTop=t??0,this._size=this._paddingTop}splice(t,e,i=[]){const s=i.length-e,o=g({start:0,end:t},this.groups),n=g({start:t+e,end:Number.POSITIVE_INFINITY},this.groups).map((t=>({range:b(t.range,s),size:t.size}))),r=i.map(((e,i)=>({range:{start:t+i,end:t+i+1},size:e.size})));this.groups=function(...t){return function(t){const e=[];let i=null;for(const s of t){const t=s.range.start,o=s.range.end,n=s.size;i&&n===i.size?i.range.end=o:(i={range:{start:t,end:o},size:n},e.push(i))}return e}(t.reduce(((t,e)=>t.concat(e)),[]))}(o,r,n),this._size=this._paddingTop+this.groups.reduce(((t,e)=>t+e.size*(e.range.end-e.range.start)),0)}get count(){const t=this.groups.length;return t?this.groups[t-1].range.end:0}get size(){return this._size}indexAt(t){if(t<0)return-1;if(t<this._paddingTop)return 0;let e=0,i=this._paddingTop;for(const s of this.groups){const o=s.range.end-s.range.start,n=i+o*s.size;if(t<n)return e+Math.floor((t-i)/s.size);e+=o,i=n}return e}indexAfter(t){return Math.min(this.indexAt(t)+1,this.count)}positionAt(t){if(t<0)return-1;let e=0,i=0;for(const s of this.groups){const o=s.range.end-s.range.start,n=i+o;if(t<n)return this._paddingTop+e+(t-i)*s.size;e+=o*s.size,i=n}return-1}}class f{constructor(t){this.renderers=t,this.cache=new Map,this.transactionNodesPendingRemoval=new Set,this.inTransaction=!1}alloc(t){let e=this.getTemplateCache(t).pop(),i=!1;if(e)i=this.transactionNodesPendingRemoval.has(e.domNode),i&&this.transactionNodesPendingRemoval.delete(e.domNode);else{const i=(0,o.$)(".monaco-list-row");e={domNode:i,templateId:t,templateData:this.getRenderer(t).renderTemplate(i)}}return{row:e,isReusingConnectedDomNode:i}}release(t){t&&this.releaseRow(t)}transact(t){if(this.inTransaction)throw new Error("Already in transaction");this.inTransaction=!0;try{t()}finally{for(const t of this.transactionNodesPendingRemoval)this.doRemoveNode(t);this.transactionNodesPendingRemoval.clear(),this.inTransaction=!1}}releaseRow(t){const{domNode:e,templateId:i}=t;e&&(this.inTransaction?this.transactionNodesPendingRemoval.add(e):this.doRemoveNode(e)),this.getTemplateCache(i).push(t)}doRemoveNode(t){t.classList.remove("scrolling"),t.remove()}getTemplateCache(t){let e=this.cache.get(t);return e||(e=[],this.cache.set(t,e)),e}dispose(){this.cache.forEach(((t,e)=>{for(const i of t)this.getRenderer(e).disposeTemplate(i.templateData),i.templateData=null})),this.cache.clear(),this.transactionNodesPendingRemoval.clear()}getRenderer(t){const e=this.renderers.get(t);if(!e)throw new Error(`No renderer found for ${t}`);return e}}var w=i(94327),y=i(62992),D=function(t,e,i,s){var o,n=arguments.length,r=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(r=(n<3?o(r):n>3?o(e,i,r):o(e,i))||r);return n>3&&r&&Object.defineProperty(e,i,r),r};const S={CurrentDragAndDropData:void 0},x={useShadows:!0,verticalScrollMode:1,setRowLineHeight:!0,setRowHeight:!0,supportDynamicHeights:!1,dnd:{getDragElements:t=>[t],getDragURI:()=>null,onDragStart(){},onDragOver:()=>!1,drop(){},dispose(){}},horizontalScrolling:!1,transformOptimization:!0,alwaysConsumeMouseWheel:!0};class E{constructor(t){this.elements=t}update(){}getData(){return this.elements}}class C{constructor(t){this.elements=t}update(){}getData(){return this.elements}}class k{constructor(){this.types=[],this.files=[]}update(t){if(t.types&&this.types.splice(0,this.types.length,...t.types),t.files){this.files.splice(0,this.files.length);for(let e=0;e<t.files.length;e++){const i=t.files.item(e);i&&(i.size||i.type)&&this.files.push(i)}}}getData(){return{types:this.types,files:this.files}}}class I{constructor(t){this.getSetSize=t?.getSetSize?t.getSetSize.bind(t):(t,e,i)=>i,this.getPosInSet=t?.getPosInSet?t.getPosInSet.bind(t):(t,e)=>e+1,this.getRole=t?.getRole?t.getRole.bind(t):t=>"listitem",this.isChecked=t?.isChecked?t.isChecked.bind(t):t=>{}}}class N{static{this.InstanceCount=0}get contentHeight(){return this.rangeMap.size}get onDidScroll(){return this.scrollableElement.onScroll}get scrollableElementDomNode(){return this.scrollableElement.getDomNode()}get horizontalScrolling(){return this._horizontalScrolling}set horizontalScrolling(t){if(t!==this._horizontalScrolling){if(t&&this.supportDynamicHeights)throw new Error("Horizontal scrolling and dynamic heights not supported simultaneously");if(this._horizontalScrolling=t,this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this._horizontalScrolling){for(const t of this.items)this.measureItemWidth(t);this.updateScrollWidth(),this.scrollableElement.setScrollDimensions({width:(0,o.y6)(this.domNode)}),this.rowsContainer.style.width=`${Math.max(this.scrollWidth||0,this.renderWidth)}px`}else this.scrollableElementWidthDelayer.cancel(),this.scrollableElement.setScrollDimensions({width:this.renderWidth,scrollWidth:this.renderWidth}),this.rowsContainer.style.width=""}}constructor(t,e,i,s=x){if(this.virtualDelegate=e,this.domId="list_id_"+ ++N.InstanceCount,this.renderers=new Map,this.renderWidth=0,this._scrollHeight=0,this.scrollableElementUpdateDisposable=null,this.scrollableElementWidthDelayer=new c.ve(50),this.splicing=!1,this.dragOverAnimationStopDisposable=u.jG.None,this.dragOverMouseY=0,this.canDrop=!1,this.currentDragFeedbackDisposable=u.jG.None,this.onDragLeaveTimeout=u.jG.None,this.disposables=new u.Cm,this._onDidChangeContentHeight=new d.vl,this._onDidChangeContentWidth=new d.vl,this.onDidChangeContentHeight=d.Jh.latch(this._onDidChangeContentHeight.event,void 0,this.disposables),this._horizontalScrolling=!1,s.horizontalScrolling&&s.supportDynamicHeights)throw new Error("Horizontal scrolling and dynamic heights not supported simultaneously");this.items=[],this.itemId=0,this.rangeMap=this.createRangeMap(s.paddingTop??0);for(const t of i)this.renderers.set(t.templateId,t);this.cache=this.disposables.add(new f(this.renderers)),this.lastRenderTop=0,this.lastRenderHeight=0,this.domNode=document.createElement("div"),this.domNode.className="monaco-list",this.domNode.classList.add(this.domId),this.domNode.tabIndex=0,this.domNode.classList.toggle("mouse-support","boolean"!=typeof s.mouseSupport||s.mouseSupport),this._horizontalScrolling=s.horizontalScrolling??x.horizontalScrolling,this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this.paddingBottom=void 0===s.paddingBottom?0:s.paddingBottom,this.accessibilityProvider=new I(s.accessibilityProvider),this.rowsContainer=document.createElement("div"),this.rowsContainer.className="monaco-list-rows",(s.transformOptimization??x.transformOptimization)&&(this.rowsContainer.style.transform="translate3d(0px, 0px, 0px)",this.rowsContainer.style.overflow="hidden",this.rowsContainer.style.contain="strict"),this.disposables.add(r.q.addTarget(this.rowsContainer)),this.scrollable=this.disposables.add(new p.yE({forceIntegerValues:!0,smoothScrollDuration:s.smoothScrolling?125:0,scheduleAtNextAnimationFrame:t=>(0,o.PG)((0,o.zk)(this.domNode),t)})),this.scrollableElement=this.disposables.add(new a.oO(this.rowsContainer,{alwaysConsumeMouseWheel:s.alwaysConsumeMouseWheel??x.alwaysConsumeMouseWheel,horizontal:1,vertical:s.verticalScrollMode??x.verticalScrollMode,useShadows:s.useShadows??x.useShadows,mouseWheelScrollSensitivity:s.mouseWheelScrollSensitivity,fastScrollSensitivity:s.fastScrollSensitivity,scrollByPage:s.scrollByPage},this.scrollable)),this.domNode.appendChild(this.scrollableElement.getDomNode()),t.appendChild(this.domNode),this.scrollableElement.onScroll(this.onScroll,this,this.disposables),this.disposables.add((0,o.ko)(this.rowsContainer,r.B.Change,(t=>this.onTouchChange(t)))),this.disposables.add((0,o.ko)(this.scrollableElement.getDomNode(),"scroll",(t=>t.target.scrollTop=0))),this.disposables.add((0,o.ko)(this.domNode,"dragover",(t=>this.onDragOver(this.toDragEvent(t))))),this.disposables.add((0,o.ko)(this.domNode,"drop",(t=>this.onDrop(this.toDragEvent(t))))),this.disposables.add((0,o.ko)(this.domNode,"dragleave",(t=>this.onDragLeave(this.toDragEvent(t))))),this.disposables.add((0,o.ko)(this.domNode,"dragend",(t=>this.onDragEnd(t)))),this.setRowLineHeight=s.setRowLineHeight??x.setRowLineHeight,this.setRowHeight=s.setRowHeight??x.setRowHeight,this.supportDynamicHeights=s.supportDynamicHeights??x.supportDynamicHeights,this.dnd=s.dnd??this.disposables.add(x.dnd),this.layout(s.initialSize?.height,s.initialSize?.width)}updateOptions(t){let e;if(void 0!==t.paddingBottom&&(this.paddingBottom=t.paddingBottom,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),void 0!==t.smoothScrolling&&this.scrollable.setSmoothScrollDuration(t.smoothScrolling?125:0),void 0!==t.horizontalScrolling&&(this.horizontalScrolling=t.horizontalScrolling),void 0!==t.scrollByPage&&(e={...e??{},scrollByPage:t.scrollByPage}),void 0!==t.mouseWheelScrollSensitivity&&(e={...e??{},mouseWheelScrollSensitivity:t.mouseWheelScrollSensitivity}),void 0!==t.fastScrollSensitivity&&(e={...e??{},fastScrollSensitivity:t.fastScrollSensitivity}),e&&this.scrollableElement.updateOptions(e),void 0!==t.paddingTop&&t.paddingTop!==this.rangeMap.paddingTop){const e=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),i=t.paddingTop-this.rangeMap.paddingTop;this.rangeMap.paddingTop=t.paddingTop,this.render(e,Math.max(0,this.lastRenderTop+i),this.lastRenderHeight,void 0,void 0,!0),this.setScrollTop(this.lastRenderTop),this.eventuallyUpdateScrollDimensions(),this.supportDynamicHeights&&this._rerender(this.lastRenderTop,this.lastRenderHeight)}}createRangeMap(t){return new v(t)}splice(t,e,i=[]){if(this.splicing)throw new Error("Can't run recursive splices.");this.splicing=!0;try{return this._splice(t,e,i)}finally{this.splicing=!1,this._onDidChangeContentHeight.fire(this.contentHeight)}}_splice(t,e,i=[]){const s=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),o={start:t,end:t+e},n=m.Q.intersect(s,o),r=new Map;for(let t=n.end-1;t>=n.start;t--){const e=this.items[t];if(e.dragStartDisposable.dispose(),e.checkedDisposable.dispose(),e.row){let i=r.get(e.templateId);i||(i=[],r.set(e.templateId,i));const s=this.renderers.get(e.templateId);s&&s.disposeElement&&s.disposeElement(e.element,t,e.row.templateData,e.size),i.unshift(e.row)}e.row=null,e.stale=!0}const a={start:t+e,end:this.items.length},l=m.Q.intersect(a,s),c=m.Q.relativeComplement(a,s),h=i.map((t=>({id:String(this.itemId++),element:t,templateId:this.virtualDelegate.getTemplateId(t),size:this.virtualDelegate.getHeight(t),width:void 0,hasDynamicHeight:!!this.virtualDelegate.hasDynamicHeight&&this.virtualDelegate.hasDynamicHeight(t),lastDynamicHeightWidth:void 0,row:null,uri:void 0,dropTarget:!1,dragStartDisposable:u.jG.None,checkedDisposable:u.jG.None,stale:!1})));let d;0===t&&e>=this.items.length?(this.rangeMap=this.createRangeMap(this.rangeMap.paddingTop),this.rangeMap.splice(0,0,h),d=this.items,this.items=h):(this.rangeMap.splice(t,e,h),d=this.items.splice(t,e,...h));const p=i.length-e,g=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),v=b(l,p),f=m.Q.intersect(g,v);for(let t=f.start;t<f.end;t++)this.updateItemInDOM(this.items[t],t);const w=m.Q.relativeComplement(v,g);for(const t of w)for(let e=t.start;e<t.end;e++)this.removeItemFromDOM(e);const y=c.map((t=>b(t,p))),D=[{start:t,end:t+i.length},...y].map((t=>m.Q.intersect(g,t))).reverse();for(const t of D)for(let e=t.end-1;e>=t.start;e--){const t=this.items[e],i=r.get(t.templateId),s=i?.pop();this.insertItemInDOM(e,s)}for(const t of r.values())for(const e of t)this.cache.release(e);return this.eventuallyUpdateScrollDimensions(),this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight),d.map((t=>t.element))}eventuallyUpdateScrollDimensions(){this._scrollHeight=this.contentHeight,this.rowsContainer.style.height=`${this._scrollHeight}px`,this.scrollableElementUpdateDisposable||(this.scrollableElementUpdateDisposable=(0,o.PG)((0,o.zk)(this.domNode),(()=>{this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight}),this.updateScrollWidth(),this.scrollableElementUpdateDisposable=null})))}eventuallyUpdateScrollWidth(){this.horizontalScrolling?this.scrollableElementWidthDelayer.trigger((()=>this.updateScrollWidth())):this.scrollableElementWidthDelayer.cancel()}updateScrollWidth(){if(!this.horizontalScrolling)return;let t=0;for(const e of this.items)void 0!==e.width&&(t=Math.max(t,e.width));this.scrollWidth=t,this.scrollableElement.setScrollDimensions({scrollWidth:0===t?0:t+10}),this._onDidChangeContentWidth.fire(this.scrollWidth)}rerender(){if(this.supportDynamicHeights){for(const t of this.items)t.lastDynamicHeightWidth=void 0;this._rerender(this.lastRenderTop,this.lastRenderHeight)}}get length(){return this.items.length}get renderHeight(){return this.scrollableElement.getScrollDimensions().height}get firstVisibleIndex(){return this.getRenderRange(this.lastRenderTop,this.lastRenderHeight).start}element(t){return this.items[t].element}indexOf(t){return this.items.findIndex((e=>e.element===t))}domElement(t){const e=this.items[t].row;return e&&e.domNode}elementHeight(t){return this.items[t].size}elementTop(t){return this.rangeMap.positionAt(t)}indexAt(t){return this.rangeMap.indexAt(t)}indexAfter(t){return this.rangeMap.indexAfter(t)}layout(t,e){const i={height:"number"==typeof t?t:(0,o.H4)(this.domNode)};this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,i.scrollHeight=this.scrollHeight),this.scrollableElement.setScrollDimensions(i),void 0!==e&&(this.renderWidth=e,this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight)),this.horizontalScrolling&&this.scrollableElement.setScrollDimensions({width:"number"==typeof e?e:(0,o.y6)(this.domNode)})}render(t,e,i,s,o,n=!1){const r=this.getRenderRange(e,i),a=m.Q.relativeComplement(r,t).reverse(),l=m.Q.relativeComplement(t,r);if(n){const e=m.Q.intersect(t,r);for(let t=e.start;t<e.end;t++)this.updateItemInDOM(this.items[t],t)}this.cache.transact((()=>{for(const t of l)for(let e=t.start;e<t.end;e++)this.removeItemFromDOM(e);for(const t of a)for(let e=t.end-1;e>=t.start;e--)this.insertItemInDOM(e)})),void 0!==s&&(this.rowsContainer.style.left=`-${s}px`),this.rowsContainer.style.top=`-${e}px`,this.horizontalScrolling&&void 0!==o&&(this.rowsContainer.style.width=`${Math.max(o,this.renderWidth)}px`),this.lastRenderTop=e,this.lastRenderHeight=i}insertItemInDOM(t,e){const i=this.items[t];if(!i.row)if(e)i.row=e,i.stale=!0;else{const t=this.cache.alloc(i.templateId);i.row=t.row,i.stale||=t.isReusingConnectedDomNode}const s=this.accessibilityProvider.getRole(i.element)||"listitem";i.row.domNode.setAttribute("role",s);const n=this.accessibilityProvider.isChecked(i.element);if("boolean"==typeof n)i.row.domNode.setAttribute("aria-checked",String(!!n));else if(n){const t=t=>i.row.domNode.setAttribute("aria-checked",String(!!t));t(n.value),i.checkedDisposable=n.onDidChange((()=>t(n.value)))}if(i.stale||!i.row.domNode.parentElement){const e=this.items.at(t+1)?.row?.domNode??null;i.row.domNode.parentElement===this.rowsContainer&&i.row.domNode.nextElementSibling===e||this.rowsContainer.insertBefore(i.row.domNode,e),i.stale=!1}this.updateItemInDOM(i,t);const r=this.renderers.get(i.templateId);if(!r)throw new Error(`No renderer found for template id ${i.templateId}`);r?.renderElement(i.element,t,i.row.templateData,i.size);const a=this.dnd.getDragURI(i.element);i.dragStartDisposable.dispose(),i.row.domNode.draggable=!!a,a&&(i.dragStartDisposable=(0,o.ko)(i.row.domNode,"dragstart",(t=>this.onDragStart(i.element,a,t)))),this.horizontalScrolling&&(this.measureItemWidth(i),this.eventuallyUpdateScrollWidth())}measureItemWidth(t){if(!t.row||!t.row.domNode)return;t.row.domNode.style.width="fit-content",t.width=(0,o.y6)(t.row.domNode);const e=(0,o.zk)(t.row.domNode).getComputedStyle(t.row.domNode);e.paddingLeft&&(t.width+=parseFloat(e.paddingLeft)),e.paddingRight&&(t.width+=parseFloat(e.paddingRight)),t.row.domNode.style.width=""}updateItemInDOM(t,e){t.row.domNode.style.top=`${this.elementTop(e)}px`,this.setRowHeight&&(t.row.domNode.style.height=`${t.size}px`),this.setRowLineHeight&&(t.row.domNode.style.lineHeight=`${t.size}px`),t.row.domNode.setAttribute("data-index",`${e}`),t.row.domNode.setAttribute("data-last-element",e===this.length-1?"true":"false"),t.row.domNode.setAttribute("data-parity",e%2==0?"even":"odd"),t.row.domNode.setAttribute("aria-setsize",String(this.accessibilityProvider.getSetSize(t.element,e,this.length))),t.row.domNode.setAttribute("aria-posinset",String(this.accessibilityProvider.getPosInSet(t.element,e))),t.row.domNode.setAttribute("id",this.getElementDomId(e)),t.row.domNode.classList.toggle("drop-target",t.dropTarget)}removeItemFromDOM(t){const e=this.items[t];if(e.dragStartDisposable.dispose(),e.checkedDisposable.dispose(),e.row){const i=this.renderers.get(e.templateId);i&&i.disposeElement&&i.disposeElement(e.element,t,e.row.templateData,e.size),this.cache.release(e.row),e.row=null}this.horizontalScrolling&&this.eventuallyUpdateScrollWidth()}getScrollTop(){return this.scrollableElement.getScrollPosition().scrollTop}setScrollTop(t,e){this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),this.scrollableElement.setScrollPosition({scrollTop:t,reuseAnimation:e})}get scrollTop(){return this.getScrollTop()}set scrollTop(t){this.setScrollTop(t)}get scrollHeight(){return this._scrollHeight+(this.horizontalScrolling?10:0)+this.paddingBottom}get onMouseClick(){return d.Jh.map(this.disposables.add(new n.f(this.domNode,"click")).event,(t=>this.toMouseEvent(t)),this.disposables)}get onMouseDblClick(){return d.Jh.map(this.disposables.add(new n.f(this.domNode,"dblclick")).event,(t=>this.toMouseEvent(t)),this.disposables)}get onMouseMiddleClick(){return d.Jh.filter(d.Jh.map(this.disposables.add(new n.f(this.domNode,"auxclick")).event,(t=>this.toMouseEvent(t)),this.disposables),(t=>1===t.browserEvent.button),this.disposables)}get onMouseDown(){return d.Jh.map(this.disposables.add(new n.f(this.domNode,"mousedown")).event,(t=>this.toMouseEvent(t)),this.disposables)}get onMouseOver(){return d.Jh.map(this.disposables.add(new n.f(this.domNode,"mouseover")).event,(t=>this.toMouseEvent(t)),this.disposables)}get onMouseOut(){return d.Jh.map(this.disposables.add(new n.f(this.domNode,"mouseout")).event,(t=>this.toMouseEvent(t)),this.disposables)}get onContextMenu(){return d.Jh.any(d.Jh.map(this.disposables.add(new n.f(this.domNode,"contextmenu")).event,(t=>this.toMouseEvent(t)),this.disposables),d.Jh.map(this.disposables.add(new n.f(this.domNode,r.B.Contextmenu)).event,(t=>this.toGestureEvent(t)),this.disposables))}get onTouchStart(){return d.Jh.map(this.disposables.add(new n.f(this.domNode,"touchstart")).event,(t=>this.toTouchEvent(t)),this.disposables)}get onTap(){return d.Jh.map(this.disposables.add(new n.f(this.rowsContainer,r.B.Tap)).event,(t=>this.toGestureEvent(t)),this.disposables)}toMouseEvent(t){const e=this.getItemIndexFromEventTarget(t.target||null),i=void 0===e?void 0:this.items[e];return{browserEvent:t,index:e,element:i&&i.element}}toTouchEvent(t){const e=this.getItemIndexFromEventTarget(t.target||null),i=void 0===e?void 0:this.items[e];return{browserEvent:t,index:e,element:i&&i.element}}toGestureEvent(t){const e=this.getItemIndexFromEventTarget(t.initialTarget||null),i=void 0===e?void 0:this.items[e];return{browserEvent:t,index:e,element:i&&i.element}}toDragEvent(t){const e=this.getItemIndexFromEventTarget(t.target||null),i=void 0===e?void 0:this.items[e];return{browserEvent:t,index:e,element:i&&i.element,sector:this.getTargetSector(t,e)}}onScroll(t){try{const e=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight);this.render(e,t.scrollTop,t.height,t.scrollLeft,t.scrollWidth),this.supportDynamicHeights&&this._rerender(t.scrollTop,t.height,t.inSmoothScrolling)}catch(e){throw console.error("Got bad scroll event:",t),e}}onTouchChange(t){t.preventDefault(),t.stopPropagation(),this.scrollTop-=t.translationY}onDragStart(t,e,i){if(!i.dataTransfer)return;const n=this.dnd.getDragElements(t);if(i.dataTransfer.effectAllowed="copyMove",i.dataTransfer.setData(s.t.TEXT,e),i.dataTransfer.setDragImage){let t;this.dnd.getDragLabel&&(t=this.dnd.getDragLabel(n,i)),void 0===t&&(t=String(n.length));const e=(0,o.$)(".monaco-drag-image");e.textContent=t,(t=>{for(;t&&!t.classList.contains("monaco-workbench");)t=t.parentElement;return t||this.domNode.ownerDocument})(this.domNode).appendChild(e),i.dataTransfer.setDragImage(e,-10,-10),setTimeout((()=>e.remove()),0)}this.domNode.classList.add("dragging"),this.currentDragData=new E(n),S.CurrentDragAndDropData=new C(n),this.dnd.onDragStart?.(this.currentDragData,i)}onDragOver(t){if(t.browserEvent.preventDefault(),this.onDragLeaveTimeout.dispose(),S.CurrentDragAndDropData&&"vscode-ui"===S.CurrentDragAndDropData.getData())return!1;if(this.setupDragAndDropScrollTopAnimation(t.browserEvent),!t.browserEvent.dataTransfer)return!1;if(!this.currentDragData)if(S.CurrentDragAndDropData)this.currentDragData=S.CurrentDragAndDropData;else{if(!t.browserEvent.dataTransfer.types)return!1;this.currentDragData=new k}const e=this.dnd.onDragOver(this.currentDragData,t.element,t.index,t.sector,t.browserEvent);if(this.canDrop="boolean"==typeof e?e:e.accept,!this.canDrop)return this.currentDragFeedback=void 0,this.currentDragFeedbackDisposable.dispose(),!1;let i;t.browserEvent.dataTransfer.dropEffect="boolean"!=typeof e&&0===e.effect?.type?"copy":"move",i="boolean"!=typeof e&&e.feedback?e.feedback:void 0===t.index?[-1]:[t.index],i=(0,l.dM)(i).filter((t=>t>=-1&&t<this.length)).sort(((t,e)=>t-e)),i=-1===i[0]?[-1]:i;let s="boolean"!=typeof e&&e.effect&&e.effect.position?e.effect.position:"drop-target";if(o=this.currentDragFeedback,n=i,(Array.isArray(o)&&Array.isArray(n)?(0,l.aI)(o,n):o===n)&&this.currentDragFeedbackPosition===s)return!0;var o,n;if(this.currentDragFeedback=i,this.currentDragFeedbackPosition=s,this.currentDragFeedbackDisposable.dispose(),-1===i[0])this.domNode.classList.add(s),this.rowsContainer.classList.add(s),this.currentDragFeedbackDisposable=(0,u.s)((()=>{this.domNode.classList.remove(s),this.rowsContainer.classList.remove(s)}));else{if(i.length>1&&"drop-target"!==s)throw new Error("Can't use multiple feedbacks with position different than 'over'");"drop-target-after"===s&&i[0]<this.length-1&&(i[0]+=1,s="drop-target-before");for(const t of i){const e=this.items[t];e.dropTarget=!0,e.row?.domNode.classList.add(s)}this.currentDragFeedbackDisposable=(0,u.s)((()=>{for(const t of i){const e=this.items[t];e.dropTarget=!1,e.row?.domNode.classList.remove(s)}}))}return!0}onDragLeave(t){this.onDragLeaveTimeout.dispose(),this.onDragLeaveTimeout=(0,c.EQ)((()=>this.clearDragOverFeedback()),100,this.disposables),this.currentDragData&&this.dnd.onDragLeave?.(this.currentDragData,t.element,t.index,t.browserEvent)}onDrop(t){if(!this.canDrop)return;const e=this.currentDragData;this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.domNode.classList.remove("dragging"),this.currentDragData=void 0,S.CurrentDragAndDropData=void 0,e&&t.browserEvent.dataTransfer&&(t.browserEvent.preventDefault(),e.update(t.browserEvent.dataTransfer),this.dnd.drop(e,t.element,t.index,t.sector,t.browserEvent))}onDragEnd(t){this.canDrop=!1,this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.domNode.classList.remove("dragging"),this.currentDragData=void 0,S.CurrentDragAndDropData=void 0,this.dnd.onDragEnd?.(t)}clearDragOverFeedback(){this.currentDragFeedback=void 0,this.currentDragFeedbackPosition=void 0,this.currentDragFeedbackDisposable.dispose(),this.currentDragFeedbackDisposable=u.jG.None}setupDragAndDropScrollTopAnimation(t){if(!this.dragOverAnimationDisposable){const t=(0,o.cL)(this.domNode).top;this.dragOverAnimationDisposable=(0,o.i0)((0,o.zk)(this.domNode),this.animateDragAndDropScrollTop.bind(this,t))}this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationStopDisposable=(0,c.EQ)((()=>{this.dragOverAnimationDisposable&&(this.dragOverAnimationDisposable.dispose(),this.dragOverAnimationDisposable=void 0)}),1e3,this.disposables),this.dragOverMouseY=t.pageY}animateDragAndDropScrollTop(t){if(void 0===this.dragOverMouseY)return;const e=this.dragOverMouseY-t,i=this.renderHeight-35;e<35?this.scrollTop+=Math.max(-14,Math.floor(.3*(e-35))):e>i&&(this.scrollTop+=Math.min(14,Math.floor(.3*(e-i))))}teardownDragAndDropScrollTopAnimation(){this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationDisposable&&(this.dragOverAnimationDisposable.dispose(),this.dragOverAnimationDisposable=void 0)}getTargetSector(t,e){if(void 0===e)return;const i=t.offsetY/this.items[e].size,s=Math.floor(i/.25);return(0,y.qE)(s,0,3)}getItemIndexFromEventTarget(t){const e=this.scrollableElement.getDomNode();let i=t;for(;((0,o.sb)(i)||(0,o.xZ)(i))&&i!==this.rowsContainer&&e.contains(i);){const t=i.getAttribute("data-index");if(t){const e=Number(t);if(!isNaN(e))return e}i=i.parentElement}}getRenderRange(t,e){return{start:this.rangeMap.indexAt(t),end:this.rangeMap.indexAfter(t+e-1)}}_rerender(t,e,i){const s=this.getRenderRange(t,e);let o,n;t===this.elementTop(s.start)?(o=s.start,n=0):s.end-s.start>1&&(o=s.start+1,n=this.elementTop(o)-t);let r=0;for(;;){const a=this.getRenderRange(t,e);let l=!1;for(let t=a.start;t<a.end;t++){const e=this.probeDynamicHeight(t);0!==e&&this.rangeMap.splice(t,1,[this.items[t]]),r+=e,l=l||0!==e}if(!l){0!==r&&this.eventuallyUpdateScrollDimensions();const e=m.Q.relativeComplement(s,a);for(const t of e)for(let e=t.start;e<t.end;e++)this.items[e].row&&this.removeItemFromDOM(e);const l=m.Q.relativeComplement(a,s).reverse();for(const t of l)for(let e=t.end-1;e>=t.start;e--)this.insertItemInDOM(e);for(let t=a.start;t<a.end;t++)this.items[t].row&&this.updateItemInDOM(this.items[t],t);if("number"==typeof o){const e=this.scrollable.getFutureScrollPosition().scrollTop-t,s=this.elementTop(o)-n+e;this.setScrollTop(s,i)}return void this._onDidChangeContentHeight.fire(this.contentHeight)}}}probeDynamicHeight(t){const e=this.items[t];if(this.virtualDelegate.getDynamicHeight){const t=this.virtualDelegate.getDynamicHeight(e.element);if(null!==t){const i=e.size;return e.size=t,e.lastDynamicHeightWidth=this.renderWidth,t-i}}if(!e.hasDynamicHeight||e.lastDynamicHeightWidth===this.renderWidth)return 0;if(this.virtualDelegate.hasDynamicHeight&&!this.virtualDelegate.hasDynamicHeight(e.element))return 0;const i=e.size;if(e.row)return e.row.domNode.style.height="",e.size=e.row.domNode.offsetHeight,0!==e.size||(0,o.QX)(e.row.domNode,(0,o.zk)(e.row.domNode).document.body)||console.warn("Measuring item node that is not in DOM! Add ListView to the DOM before measuring row height!",(new Error).stack),e.lastDynamicHeightWidth=this.renderWidth,e.size-i;const{row:s}=this.cache.alloc(e.templateId);s.domNode.style.height="",this.rowsContainer.appendChild(s.domNode);const n=this.renderers.get(e.templateId);if(!n)throw new w.D7("Missing renderer for templateId: "+e.templateId);return n.renderElement(e.element,t,s.templateData,void 0),e.size=s.domNode.offsetHeight,n.disposeElement?.(e.element,t,s.templateData,void 0),this.virtualDelegate.setDynamicHeight?.(e.element,e.size),e.lastDynamicHeightWidth=this.renderWidth,s.domNode.remove(),this.cache.release(s),e.size-i}getElementDomId(t){return`${this.domId}_${t}`}dispose(){for(const t of this.items)if(t.dragStartDisposable.dispose(),t.checkedDisposable.dispose(),t.row){const e=this.renderers.get(t.row.templateId);e&&(e.disposeElement?.(t.element,-1,t.row.templateData,void 0),e.disposeTemplate(t.row.templateData))}this.items=[],this.domNode?.remove(),this.dragOverAnimationDisposable?.dispose(),this.disposables.dispose()}}D([h.B],N.prototype,"onMouseClick",null),D([h.B],N.prototype,"onMouseDblClick",null),D([h.B],N.prototype,"onMouseMiddleClick",null),D([h.B],N.prototype,"onMouseDown",null),D([h.B],N.prototype,"onMouseOver",null),D([h.B],N.prototype,"onMouseOut",null),D([h.B],N.prototype,"onContextMenu",null),D([h.B],N.prototype,"onTouchStart",null),D([h.B],N.prototype,"onTap",null)},67954:(t,e,i)=>{i.d(e,{hb:()=>Q,B8:()=>tt,MH:()=>J,_C:()=>y,W0:()=>L,Bm:()=>_,B6:()=>F,b$:()=>M,bm:()=>B,mh:()=>K,tX:()=>W,Es:()=>P,xu:()=>O,bG:()=>q});var s=i(14333),o=i(34061),n=i(87594),r=i(30474),a=i(59407);class l{constructor(t){this.spliceables=t}splice(t,e,i){this.spliceables.forEach((s=>s.splice(t,e,i)))}}var c=i(13338),h=i(65958),d=i(94901),u=i(88846),m=i(2106),p=i(97669),g=i(10998),b=i(62992),v=i(63339),f=i(79359);class w extends Error{constructor(t,e){super(`ListError [${t}] ${e}`)}}var y,D,S=i(83022),x=i(9715),E=i(16311),C=function(t,e,i,s){var o,n=arguments.length,r=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(r=(n<3?o(r):n>3?o(e,i,r):o(e,i))||r);return n>3&&r&&Object.defineProperty(e,i,r),r};class k{constructor(t){this.trait=t,this.renderedElements=[]}get templateId(){return`template:${this.trait.name}`}renderTemplate(t){return t}renderElement(t,e,i){const s=this.renderedElements.findIndex((t=>t.templateData===i));if(s>=0){const t=this.renderedElements[s];this.trait.unrender(i),t.index=e}else{const t={index:e,templateData:i};this.renderedElements.push(t)}this.trait.renderIndex(e,i)}splice(t,e,i){const s=[];for(const o of this.renderedElements)o.index<t?s.push(o):o.index>=t+e&&s.push({index:o.index+i-e,templateData:o.templateData});this.renderedElements=s}renderIndexes(t){for(const{index:e,templateData:i}of this.renderedElements)t.indexOf(e)>-1&&this.trait.renderIndex(e,i)}disposeTemplate(t){const e=this.renderedElements.findIndex((e=>e.templateData===t));e<0||this.renderedElements.splice(e,1)}}class I{get name(){return this._trait}get renderer(){return new k(this)}constructor(t){this._trait=t,this.indexes=[],this.sortedIndexes=[],this._onChange=new m.vl,this.onChange=this._onChange.event}splice(t,e,i){const s=i.length-e,o=t+e,n=[];let r=0;for(;r<this.sortedIndexes.length&&this.sortedIndexes[r]<t;)n.push(this.sortedIndexes[r++]);for(let e=0;e<i.length;e++)i[e]&&n.push(e+t);for(;r<this.sortedIndexes.length&&this.sortedIndexes[r]>=o;)n.push(this.sortedIndexes[r++]+s);this.renderer.splice(t,e,i.length),this._set(n,n)}renderIndex(t,e){e.classList.toggle(this._trait,this.contains(t))}unrender(t){t.classList.remove(this._trait)}set(t,e){return this._set(t,[...t].sort(G),e)}_set(t,e,i){const s=this.indexes,o=this.sortedIndexes;this.indexes=t,this.sortedIndexes=e;const n=V(o,t);return this.renderer.renderIndexes(n),this._onChange.fire({indexes:t,browserEvent:i}),s}get(){return this.indexes}contains(t){return(0,c.El)(this.sortedIndexes,t,G)>=0}dispose(){(0,g.AS)(this._onChange)}}C([u.B],I.prototype,"renderer",null);class N extends I{constructor(t){super("selected"),this.setAriaSelected=t}renderIndex(t,e){super.renderIndex(t,e),this.setAriaSelected&&(this.contains(t)?e.setAttribute("aria-selected","true"):e.setAttribute("aria-selected","false"))}}class A{constructor(t,e,i){this.trait=t,this.view=e,this.identityProvider=i}splice(t,e,i){if(!this.identityProvider)return this.trait.splice(t,e,new Array(i.length).fill(!1));const s=this.trait.get().map((t=>this.identityProvider.getId(this.view.element(t)).toString()));if(0===s.length)return this.trait.splice(t,e,new Array(i.length).fill(!1));const o=new Set(s),n=i.map((t=>o.has(this.identityProvider.getId(t).toString())));this.trait.splice(t,e,n)}}function F(t){return"INPUT"===t.tagName||"TEXTAREA"===t.tagName}function T(t,e){return!!t.classList.contains(e)||!t.classList.contains("monaco-list")&&!!t.parentElement&&T(t.parentElement,e)}function B(t){return T(t,"monaco-editor")}function M(t){return T(t,"monaco-custom-toggle")}function L(t){return T(t,"action-item")}function O(t){return T(t,"monaco-tree-sticky-row")}function P(t){return t.classList.contains("monaco-tree-sticky-container")}function _(t){return!!("A"===t.tagName&&t.classList.contains("monaco-button")||"DIV"===t.tagName&&t.classList.contains("monaco-button-dropdown"))||!t.classList.contains("monaco-list")&&!!t.parentElement&&_(t.parentElement)}class H{get onKeyDown(){return m.Jh.chain(this.disposables.add(new o.f(this.view.domNode,"keydown")).event,(t=>t.filter((t=>!F(t.target))).map((t=>new n.Z(t)))))}constructor(t,e,i){this.list=t,this.view=e,this.disposables=new g.Cm,this.multipleSelectionDisposables=new g.Cm,this.multipleSelectionSupport=i.multipleSelectionSupport,this.disposables.add(this.onKeyDown((t=>{switch(t.keyCode){case 3:return this.onEnter(t);case 16:return this.onUpArrow(t);case 18:return this.onDownArrow(t);case 11:return this.onPageUpArrow(t);case 12:return this.onPageDownArrow(t);case 9:return this.onEscape(t);case 31:this.multipleSelectionSupport&&(v.zx?t.metaKey:t.ctrlKey)&&this.onCtrlA(t)}})))}updateOptions(t){void 0!==t.multipleSelectionSupport&&(this.multipleSelectionSupport=t.multipleSelectionSupport)}onEnter(t){t.preventDefault(),t.stopPropagation(),this.list.setSelection(this.list.getFocus(),t.browserEvent)}onUpArrow(t){t.preventDefault(),t.stopPropagation(),this.list.focusPrevious(1,!1,t.browserEvent);const e=this.list.getFocus()[0];this.list.setAnchor(e),this.list.reveal(e),this.view.domNode.focus()}onDownArrow(t){t.preventDefault(),t.stopPropagation(),this.list.focusNext(1,!1,t.browserEvent);const e=this.list.getFocus()[0];this.list.setAnchor(e),this.list.reveal(e),this.view.domNode.focus()}onPageUpArrow(t){t.preventDefault(),t.stopPropagation(),this.list.focusPreviousPage(t.browserEvent);const e=this.list.getFocus()[0];this.list.setAnchor(e),this.list.reveal(e),this.view.domNode.focus()}onPageDownArrow(t){t.preventDefault(),t.stopPropagation(),this.list.focusNextPage(t.browserEvent);const e=this.list.getFocus()[0];this.list.setAnchor(e),this.list.reveal(e),this.view.domNode.focus()}onCtrlA(t){t.preventDefault(),t.stopPropagation(),this.list.setSelection((0,c.y1)(this.list.length),t.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus()}onEscape(t){this.list.getSelection().length&&(t.preventDefault(),t.stopPropagation(),this.list.setSelection([],t.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus())}dispose(){this.disposables.dispose(),this.multipleSelectionDisposables.dispose()}}C([u.B],H.prototype,"onKeyDown",null),function(t){t[t.Automatic=0]="Automatic",t[t.Trigger=1]="Trigger"}(y||(y={})),function(t){t[t.Idle=0]="Idle",t[t.Typing=1]="Typing"}(D||(D={}));const $=new class{mightProducePrintableCharacter(t){return!(t.ctrlKey||t.metaKey||t.altKey)&&(t.keyCode>=31&&t.keyCode<=56||t.keyCode>=21&&t.keyCode<=30||t.keyCode>=98&&t.keyCode<=107||t.keyCode>=85&&t.keyCode<=95)}};class R{constructor(t,e,i,s,o){this.list=t,this.view=e,this.keyboardNavigationLabelProvider=i,this.keyboardNavigationEventFilter=s,this.delegate=o,this.enabled=!1,this.state=D.Idle,this.mode=y.Automatic,this.triggered=!1,this.previouslyFocused=-1,this.enabledDisposables=new g.Cm,this.disposables=new g.Cm,this.updateOptions(t.options)}updateOptions(t){t.typeNavigationEnabled??1?this.enable():this.disable(),this.mode=t.typeNavigationMode??y.Automatic}enable(){if(this.enabled)return;let t=!1;const e=m.Jh.chain(this.enabledDisposables.add(new o.f(this.view.domNode,"keydown")).event,(e=>e.filter((t=>!F(t.target))).filter((()=>this.mode===y.Automatic||this.triggered)).map((t=>new n.Z(t))).filter((e=>t||this.keyboardNavigationEventFilter(e))).filter((t=>this.delegate.mightProducePrintableCharacter(t))).forEach((t=>s.fs.stop(t,!0))).map((t=>t.browserEvent.key)))),i=m.Jh.debounce(e,(()=>null),800,void 0,void 0,void 0,this.enabledDisposables);m.Jh.reduce(m.Jh.any(e,i),((t,e)=>null===e?null:(t||"")+e),void 0,this.enabledDisposables)(this.onInput,this,this.enabledDisposables),i(this.onClear,this,this.enabledDisposables),e((()=>t=!0),void 0,this.enabledDisposables),i((()=>t=!1),void 0,this.enabledDisposables),this.enabled=!0,this.triggered=!1}disable(){this.enabled&&(this.enabledDisposables.clear(),this.enabled=!1,this.triggered=!1)}onClear(){const t=this.list.getFocus();if(t.length>0&&t[0]===this.previouslyFocused){const e=this.list.options.accessibilityProvider?.getAriaLabel(this.list.element(t[0]));"string"==typeof e?(0,a.xE)(e):e&&(0,a.xE)(e.get())}this.previouslyFocused=-1}onInput(t){if(!t)return this.state=D.Idle,void(this.triggered=!1);const e=this.list.getFocus(),i=e.length>0?e[0]:0,s=this.state===D.Idle?1:0;this.state=D.Typing;for(let e=0;e<this.list.length;e++){const o=(i+e+s)%this.list.length,n=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(this.view.element(o)),r=n&&n.toString();if(this.list.options.typeNavigationEnabled){if(void 0!==r){if((0,p.WP)(t,r))return this.previouslyFocused=i,this.list.setFocus([o]),void this.list.reveal(o);const e=(0,p.O)(t,r);if(e&&e[0].end-e[0].start>1&&1===e.length)return this.previouslyFocused=i,this.list.setFocus([o]),void this.list.reveal(o)}}else if(void 0===r||(0,p.WP)(t,r))return this.previouslyFocused=i,this.list.setFocus([o]),void this.list.reveal(o)}}dispose(){this.disable(),this.enabledDisposables.dispose(),this.disposables.dispose()}}class z{constructor(t,e){this.list=t,this.view=e,this.disposables=new g.Cm;const i=m.Jh.chain(this.disposables.add(new o.f(e.domNode,"keydown")).event,(t=>t.filter((t=>!F(t.target))).map((t=>new n.Z(t)))));m.Jh.chain(i,(t=>t.filter((t=>!(2!==t.keyCode||t.ctrlKey||t.metaKey||t.shiftKey||t.altKey)))))(this.onTab,this,this.disposables)}onTab(t){if(t.target!==this.view.domNode)return;const e=this.list.getFocus();if(0===e.length)return;const i=this.view.domElement(e[0]);if(!i)return;const o=i.querySelector("[tabIndex]");if(!o||!(0,s.sb)(o)||-1===o.tabIndex)return;const n=(0,s.zk)(o).getComputedStyle(o);"hidden"!==n.visibility&&"none"!==n.display&&(t.preventDefault(),t.stopPropagation(),o.focus())}dispose(){this.disposables.dispose()}}function W(t){return v.zx?t.browserEvent.metaKey:t.browserEvent.ctrlKey}function K(t){return t.browserEvent.shiftKey}const U={isSelectionSingleChangeEvent:W,isSelectionRangeChangeEvent:K};class J{constructor(t){this.list=t,this.disposables=new g.Cm,this._onPointer=new m.vl,this.onPointer=this._onPointer.event,!1!==t.options.multipleSelectionSupport&&(this.multipleSelectionController=this.list.options.multipleSelectionController||U),this.mouseSupport=void 0===t.options.mouseSupport||!!t.options.mouseSupport,this.mouseSupport&&(t.onMouseDown(this.onMouseDown,this,this.disposables),t.onContextMenu(this.onContextMenu,this,this.disposables),t.onMouseDblClick(this.onDoubleClick,this,this.disposables),t.onTouchStart(this.onMouseDown,this,this.disposables),this.disposables.add(r.q.addTarget(t.getHTMLElement()))),m.Jh.any(t.onMouseClick,t.onMouseMiddleClick,t.onTap)(this.onViewPointer,this,this.disposables)}updateOptions(t){void 0!==t.multipleSelectionSupport&&(this.multipleSelectionController=void 0,t.multipleSelectionSupport&&(this.multipleSelectionController=this.list.options.multipleSelectionController||U))}isSelectionSingleChangeEvent(t){return!!this.multipleSelectionController&&this.multipleSelectionController.isSelectionSingleChangeEvent(t)}isSelectionRangeChangeEvent(t){return!!this.multipleSelectionController&&this.multipleSelectionController.isSelectionRangeChangeEvent(t)}isSelectionChangeEvent(t){return this.isSelectionSingleChangeEvent(t)||this.isSelectionRangeChangeEvent(t)}onMouseDown(t){B(t.browserEvent.target)||(0,s.bq)()!==t.browserEvent.target&&this.list.domFocus()}onContextMenu(t){if(F(t.browserEvent.target)||B(t.browserEvent.target))return;const e=void 0===t.index?[]:[t.index];this.list.setFocus(e,t.browserEvent)}onViewPointer(t){if(!this.mouseSupport)return;if(F(t.browserEvent.target)||B(t.browserEvent.target))return;if(t.browserEvent.isHandledByList)return;t.browserEvent.isHandledByList=!0;const e=t.index;return void 0===e?(this.list.setFocus([],t.browserEvent),this.list.setSelection([],t.browserEvent),void this.list.setAnchor(void 0)):this.isSelectionChangeEvent(t)?this.changeSelection(t):(this.list.setFocus([e],t.browserEvent),this.list.setAnchor(e),i=t.browserEvent,(0,s.Er)(i)&&2===i.button||this.list.setSelection([e],t.browserEvent),void this._onPointer.fire(t));var i}onDoubleClick(t){if(F(t.browserEvent.target)||B(t.browserEvent.target))return;if(this.isSelectionChangeEvent(t))return;if(t.browserEvent.isHandledByList)return;t.browserEvent.isHandledByList=!0;const e=this.list.getFocus();this.list.setSelection(e,t.browserEvent)}changeSelection(t){const e=t.index;let i=this.list.getAnchor();if(this.isSelectionRangeChangeEvent(t)){void 0===i&&(i=this.list.getFocus()[0]??e,this.list.setAnchor(i));const s=Math.min(i,e),o=Math.max(i,e),n=(0,c.y1)(s,o+1),r=this.list.getSelection(),a=function(t,e){const i=t.indexOf(e);if(-1===i)return[];const s=[];let o=i-1;for(;o>=0&&t[o]===e-(i-o);)s.push(t[o--]);for(s.reverse(),o=i;o<t.length&&t[o]===e+(o-i);)s.push(t[o++]);return s}(V(r,[i]),i);if(0===a.length)return;const l=V(n,function(t,e){const i=[];let s=0,o=0;for(;s<t.length||o<e.length;)if(s>=t.length)i.push(e[o++]);else if(o>=e.length)i.push(t[s++]);else{if(t[s]===e[o]){s++,o++;continue}t[s]<e[o]?i.push(t[s++]):o++}return i}(r,a));this.list.setSelection(l,t.browserEvent),this.list.setFocus([e],t.browserEvent)}else if(this.isSelectionSingleChangeEvent(t)){const i=this.list.getSelection(),s=i.filter((t=>t!==e));this.list.setFocus([e]),this.list.setAnchor(e),i.length===s.length?this.list.setSelection([...s,e],t.browserEvent):this.list.setSelection(s,t.browserEvent)}}dispose(){this.disposables.dispose()}}class Q{constructor(t,e){this.styleElement=t,this.selectorSuffix=e}style(t){const e=this.selectorSuffix&&`.${this.selectorSuffix}`,i=[];t.listBackground&&i.push(`.monaco-list${e} .monaco-list-rows { background: ${t.listBackground}; }`),t.listFocusBackground&&(i.push(`.monaco-list${e}:focus .monaco-list-row.focused { background-color: ${t.listFocusBackground}; }`),i.push(`.monaco-list${e}:focus .monaco-list-row.focused:hover { background-color: ${t.listFocusBackground}; }`)),t.listFocusForeground&&i.push(`.monaco-list${e}:focus .monaco-list-row.focused { color: ${t.listFocusForeground}; }`),t.listActiveSelectionBackground&&(i.push(`.monaco-list${e}:focus .monaco-list-row.selected { background-color: ${t.listActiveSelectionBackground}; }`),i.push(`.monaco-list${e}:focus .monaco-list-row.selected:hover { background-color: ${t.listActiveSelectionBackground}; }`)),t.listActiveSelectionForeground&&i.push(`.monaco-list${e}:focus .monaco-list-row.selected { color: ${t.listActiveSelectionForeground}; }`),t.listActiveSelectionIconForeground&&i.push(`.monaco-list${e}:focus .monaco-list-row.selected .codicon { color: ${t.listActiveSelectionIconForeground}; }`),t.listFocusAndSelectionBackground&&i.push(`\n\t\t\t\t.monaco-drag-image,\n\t\t\t\t.monaco-list${e}:focus .monaco-list-row.selected.focused { background-color: ${t.listFocusAndSelectionBackground}; }\n\t\t\t`),t.listFocusAndSelectionForeground&&i.push(`\n\t\t\t\t.monaco-drag-image,\n\t\t\t\t.monaco-list${e}:focus .monaco-list-row.selected.focused { color: ${t.listFocusAndSelectionForeground}; }\n\t\t\t`),t.listInactiveFocusForeground&&(i.push(`.monaco-list${e} .monaco-list-row.focused { color:  ${t.listInactiveFocusForeground}; }`),i.push(`.monaco-list${e} .monaco-list-row.focused:hover { color:  ${t.listInactiveFocusForeground}; }`)),t.listInactiveSelectionIconForeground&&i.push(`.monaco-list${e} .monaco-list-row.focused .codicon { color:  ${t.listInactiveSelectionIconForeground}; }`),t.listInactiveFocusBackground&&(i.push(`.monaco-list${e} .monaco-list-row.focused { background-color:  ${t.listInactiveFocusBackground}; }`),i.push(`.monaco-list${e} .monaco-list-row.focused:hover { background-color:  ${t.listInactiveFocusBackground}; }`)),t.listInactiveSelectionBackground&&(i.push(`.monaco-list${e} .monaco-list-row.selected { background-color:  ${t.listInactiveSelectionBackground}; }`),i.push(`.monaco-list${e} .monaco-list-row.selected:hover { background-color:  ${t.listInactiveSelectionBackground}; }`)),t.listInactiveSelectionForeground&&i.push(`.monaco-list${e} .monaco-list-row.selected { color: ${t.listInactiveSelectionForeground}; }`),t.listHoverBackground&&i.push(`.monaco-list${e}:not(.drop-target):not(.dragging) .monaco-list-row:hover:not(.selected):not(.focused) { background-color: ${t.listHoverBackground}; }`),t.listHoverForeground&&i.push(`.monaco-list${e}:not(.drop-target):not(.dragging) .monaco-list-row:hover:not(.selected):not(.focused) { color:  ${t.listHoverForeground}; }`);const o=(0,s.gI)(t.listFocusAndSelectionOutline,(0,s.gI)(t.listSelectionOutline,t.listFocusOutline??""));o&&i.push(`.monaco-list${e}:focus .monaco-list-row.focused.selected { outline: 1px solid ${o}; outline-offset: -1px;}`),t.listFocusOutline&&i.push(`\n\t\t\t\t.monaco-drag-image,\n\t\t\t\t.monaco-list${e}:focus .monaco-list-row.focused { outline: 1px solid ${t.listFocusOutline}; outline-offset: -1px; }\n\t\t\t\t.monaco-workbench.context-menu-visible .monaco-list${e}.last-focused .monaco-list-row.focused { outline: 1px solid ${t.listFocusOutline}; outline-offset: -1px; }\n\t\t\t`);const n=(0,s.gI)(t.listSelectionOutline,t.listInactiveFocusOutline??"");n&&i.push(`.monaco-list${e} .monaco-list-row.focused.selected { outline: 1px dotted ${n}; outline-offset: -1px; }`),t.listSelectionOutline&&i.push(`.monaco-list${e} .monaco-list-row.selected { outline: 1px dotted ${t.listSelectionOutline}; outline-offset: -1px; }`),t.listInactiveFocusOutline&&i.push(`.monaco-list${e} .monaco-list-row.focused { outline: 1px dotted ${t.listInactiveFocusOutline}; outline-offset: -1px; }`),t.listHoverOutline&&i.push(`.monaco-list${e} .monaco-list-row:hover { outline: 1px dashed ${t.listHoverOutline}; outline-offset: -1px; }`),t.listDropOverBackground&&i.push(`\n\t\t\t\t.monaco-list${e}.drop-target,\n\t\t\t\t.monaco-list${e} .monaco-list-rows.drop-target,\n\t\t\t\t.monaco-list${e} .monaco-list-row.drop-target { background-color: ${t.listDropOverBackground} !important; color: inherit !important; }\n\t\t\t`),t.listDropBetweenBackground&&(i.push(`\n\t\t\t.monaco-list${e} .monaco-list-rows.drop-target-before .monaco-list-row:first-child::before,\n\t\t\t.monaco-list${e} .monaco-list-row.drop-target-before::before {\n\t\t\t\tcontent: ""; position: absolute; top: 0px; left: 0px; width: 100%; height: 1px;\n\t\t\t\tbackground-color: ${t.listDropBetweenBackground};\n\t\t\t}`),i.push(`\n\t\t\t.monaco-list${e} .monaco-list-rows.drop-target-after .monaco-list-row:last-child::after,\n\t\t\t.monaco-list${e} .monaco-list-row.drop-target-after::after {\n\t\t\t\tcontent: ""; position: absolute; bottom: 0px; left: 0px; width: 100%; height: 1px;\n\t\t\t\tbackground-color: ${t.listDropBetweenBackground};\n\t\t\t}`)),t.tableColumnsBorder&&i.push(`\n\t\t\t\t.monaco-table > .monaco-split-view2,\n\t\t\t\t.monaco-table > .monaco-split-view2 .monaco-sash.vertical::before,\n\t\t\t\t.monaco-workbench:not(.reduce-motion) .monaco-table:hover > .monaco-split-view2,\n\t\t\t\t.monaco-workbench:not(.reduce-motion) .monaco-table:hover > .monaco-split-view2 .monaco-sash.vertical::before {\n\t\t\t\t\tborder-color: ${t.tableColumnsBorder};\n\t\t\t\t}\n\n\t\t\t\t.monaco-workbench:not(.reduce-motion) .monaco-table > .monaco-split-view2,\n\t\t\t\t.monaco-workbench:not(.reduce-motion) .monaco-table > .monaco-split-view2 .monaco-sash.vertical::before {\n\t\t\t\t\tborder-color: transparent;\n\t\t\t\t}\n\t\t\t`),t.tableOddRowsBackgroundColor&&i.push(`\n\t\t\t\t.monaco-table .monaco-list-row[data-parity=odd]:not(.focused):not(.selected):not(:hover) .monaco-table-tr,\n\t\t\t\t.monaco-table .monaco-list:not(:focus) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr,\n\t\t\t\t.monaco-table .monaco-list:not(.focused) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr {\n\t\t\t\t\tbackground-color: ${t.tableOddRowsBackgroundColor};\n\t\t\t\t}\n\t\t\t`),this.styleElement.textContent=i.join("\n")}}const q={listFocusBackground:"#7FB0D0",listActiveSelectionBackground:"#0E639C",listActiveSelectionForeground:"#FFFFFF",listActiveSelectionIconForeground:"#FFFFFF",listFocusAndSelectionOutline:"#90C2F9",listFocusAndSelectionBackground:"#094771",listFocusAndSelectionForeground:"#FFFFFF",listInactiveSelectionBackground:"#3F3F46",listInactiveSelectionIconForeground:"#FFFFFF",listHoverBackground:"#2A2D2E",listDropOverBackground:"#383B3D",listDropBetweenBackground:"#EEEEEE",treeIndentGuidesStroke:"#a9a9a9",treeInactiveIndentGuidesStroke:d.Q1.fromHex("#a9a9a9").transparent(.4).toString(),tableColumnsBorder:d.Q1.fromHex("#cccccc").transparent(.2).toString(),tableOddRowsBackgroundColor:d.Q1.fromHex("#cccccc").transparent(.04).toString(),listBackground:void 0,listFocusForeground:void 0,listInactiveSelectionForeground:void 0,listInactiveFocusForeground:void 0,listInactiveFocusBackground:void 0,listHoverForeground:void 0,listFocusOutline:void 0,listInactiveFocusOutline:void 0,listSelectionOutline:void 0,listHoverOutline:void 0,treeStickyScrollBackground:void 0,treeStickyScrollBorder:void 0,treeStickyScrollShadow:void 0},j={keyboardSupport:!0,mouseSupport:!0,multipleSelectionSupport:!0,dnd:{getDragURI:()=>null,onDragStart(){},onDragOver:()=>!1,drop(){},dispose(){}}};function V(t,e){const i=[];let s=0,o=0;for(;s<t.length||o<e.length;)if(s>=t.length)i.push(e[o++]);else if(o>=e.length)i.push(t[s++]);else{if(t[s]===e[o]){i.push(t[s]),s++,o++;continue}t[s]<e[o]?i.push(t[s++]):i.push(e[o++])}return i}const G=(t,e)=>t-e;class Y{constructor(t,e){this._templateId=t,this.renderers=e}get templateId(){return this._templateId}renderTemplate(t){return this.renderers.map((e=>e.renderTemplate(t)))}renderElement(t,e,i,s){let o=0;for(const n of this.renderers)n.renderElement(t,e,i[o++],s)}disposeElement(t,e,i,s){let o=0;for(const n of this.renderers)n.disposeElement?.(t,e,i[o],s),o+=1}disposeTemplate(t){let e=0;for(const i of this.renderers)i.disposeTemplate(t[e++])}}class Z{constructor(t){this.accessibilityProvider=t,this.templateId="a18n"}renderTemplate(t){return{container:t,disposables:new g.Cm}}renderElement(t,e,i){const s=this.accessibilityProvider.getAriaLabel(t),o=s&&"string"!=typeof s?s:(0,E.lk)(s);i.disposables.add((0,E.fm)((t=>{this.setAriaLabel(t.readObservable(o),i.container)})));const n=this.accessibilityProvider.getAriaLevel&&this.accessibilityProvider.getAriaLevel(t);"number"==typeof n?i.container.setAttribute("aria-level",`${n}`):i.container.removeAttribute("aria-level")}setAriaLabel(t,e){t?e.setAttribute("aria-label",t):e.removeAttribute("aria-label")}disposeElement(t,e,i,s){i.disposables.clear()}disposeTemplate(t){t.disposables.dispose()}}class X{constructor(t,e){this.list=t,this.dnd=e}getDragElements(t){const e=this.list.getSelectedElements();return e.indexOf(t)>-1?e:[t]}getDragURI(t){return this.dnd.getDragURI(t)}getDragLabel(t,e){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(t,e)}onDragStart(t,e){this.dnd.onDragStart?.(t,e)}onDragOver(t,e,i,s,o){return this.dnd.onDragOver(t,e,i,s,o)}onDragLeave(t,e,i,s){this.dnd.onDragLeave?.(t,e,i,s)}onDragEnd(t){this.dnd.onDragEnd?.(t)}drop(t,e,i,s,o){this.dnd.drop(t,e,i,s,o)}dispose(){this.dnd.dispose()}}class tt{get onDidChangeFocus(){return m.Jh.map(this.eventBufferer.wrapEvent(this.focus.onChange),(t=>this.toListEvent(t)),this.disposables)}get onDidChangeSelection(){return m.Jh.map(this.eventBufferer.wrapEvent(this.selection.onChange),(t=>this.toListEvent(t)),this.disposables)}get domId(){return this.view.domId}get onDidScroll(){return this.view.onDidScroll}get onMouseClick(){return this.view.onMouseClick}get onMouseDblClick(){return this.view.onMouseDblClick}get onMouseMiddleClick(){return this.view.onMouseMiddleClick}get onPointer(){return this.mouseController.onPointer}get onMouseDown(){return this.view.onMouseDown}get onMouseOver(){return this.view.onMouseOver}get onMouseOut(){return this.view.onMouseOut}get onTouchStart(){return this.view.onTouchStart}get onTap(){return this.view.onTap}get onContextMenu(){let t=!1;const e=m.Jh.chain(this.disposables.add(new o.f(this.view.domNode,"keydown")).event,(e=>e.map((t=>new n.Z(t))).filter((e=>t=58===e.keyCode||e.shiftKey&&68===e.keyCode)).map((t=>s.fs.stop(t,!0))).filter((()=>!1)))),i=m.Jh.chain(this.disposables.add(new o.f(this.view.domNode,"keyup")).event,(e=>e.forEach((()=>t=!1)).map((t=>new n.Z(t))).filter((t=>58===t.keyCode||t.shiftKey&&68===t.keyCode)).map((t=>s.fs.stop(t,!0))).map((({browserEvent:t})=>{const e=this.getFocus(),i=e.length?e[0]:void 0;return{index:i,element:void 0!==i?this.view.element(i):void 0,anchor:void 0!==i?this.view.domElement(i):this.view.domNode,browserEvent:t}})))),r=m.Jh.chain(this.view.onContextMenu,(e=>e.filter((e=>!t)).map((({element:t,index:e,browserEvent:i})=>({element:t,index:e,anchor:new x.P((0,s.zk)(this.view.domNode),i),browserEvent:i})))));return m.Jh.any(e,i,r)}get onKeyDown(){return this.disposables.add(new o.f(this.view.domNode,"keydown")).event}get onDidFocus(){return m.Jh.signal(this.disposables.add(new o.f(this.view.domNode,"focus",!0)).event)}get onDidBlur(){return m.Jh.signal(this.disposables.add(new o.f(this.view.domNode,"blur",!0)).event)}constructor(t,e,i,o,n=j){this.user=t,this._options=n,this.focus=new I("focused"),this.anchor=new I("anchor"),this.eventBufferer=new m.at,this._ariaLabel="",this.disposables=new g.Cm,this._onDidDispose=new m.vl,this.onDidDispose=this._onDidDispose.event;const r=this._options.accessibilityProvider&&this._options.accessibilityProvider.getWidgetRole?this._options.accessibilityProvider?.getWidgetRole():"list";this.selection=new N("listbox"!==r);const a=[this.focus.renderer,this.selection.renderer];this.accessibilityProvider=n.accessibilityProvider,this.accessibilityProvider&&(a.push(new Z(this.accessibilityProvider)),this.accessibilityProvider.onDidChangeActiveDescendant?.(this.onDidChangeActiveDescendant,this,this.disposables)),o=o.map((t=>new Y(t.templateId,[...a,t])));const c={...n,dnd:n.dnd&&new X(this,n.dnd)};if(this.view=this.createListView(e,i,o,c),this.view.domNode.setAttribute("role",r),n.styleController)this.styleController=n.styleController(this.view.domId);else{const t=(0,s.li)(this.view.domNode);this.styleController=new Q(t,this.view.domId)}if(this.spliceable=new l([new A(this.focus,this.view,n.identityProvider),new A(this.selection,this.view,n.identityProvider),new A(this.anchor,this.view,n.identityProvider),this.view]),this.disposables.add(this.focus),this.disposables.add(this.selection),this.disposables.add(this.anchor),this.disposables.add(this.view),this.disposables.add(this._onDidDispose),this.disposables.add(new z(this,this.view)),("boolean"!=typeof n.keyboardSupport||n.keyboardSupport)&&(this.keyboardController=new H(this,this.view,n),this.disposables.add(this.keyboardController)),n.keyboardNavigationLabelProvider){const t=n.keyboardNavigationDelegate||$;this.typeNavigationController=new R(this,this.view,n.keyboardNavigationLabelProvider,n.keyboardNavigationEventFilter??(()=>!0),t),this.disposables.add(this.typeNavigationController)}this.mouseController=this.createMouseController(n),this.disposables.add(this.mouseController),this.onDidChangeFocus(this._onFocusChange,this,this.disposables),this.onDidChangeSelection(this._onSelectionChange,this,this.disposables),this.accessibilityProvider&&(this.ariaLabel=this.accessibilityProvider.getWidgetAriaLabel()),!1!==this._options.multipleSelectionSupport&&this.view.domNode.setAttribute("aria-multiselectable","true")}createListView(t,e,i,s){return new S.uO(t,e,i,s)}createMouseController(t){return new J(this)}updateOptions(t={}){this._options={...this._options,...t},this.typeNavigationController?.updateOptions(this._options),void 0!==this._options.multipleSelectionController&&(this._options.multipleSelectionSupport?this.view.domNode.setAttribute("aria-multiselectable","true"):this.view.domNode.removeAttribute("aria-multiselectable")),this.mouseController.updateOptions(t),this.keyboardController?.updateOptions(t),this.view.updateOptions(t)}get options(){return this._options}splice(t,e,i=[]){if(t<0||t>this.view.length)throw new w(this.user,`Invalid start index: ${t}`);if(e<0)throw new w(this.user,`Invalid delete count: ${e}`);0===e&&0===i.length||this.eventBufferer.bufferEvents((()=>this.spliceable.splice(t,e,i)))}rerender(){this.view.rerender()}element(t){return this.view.element(t)}indexOf(t){return this.view.indexOf(t)}indexAt(t){return this.view.indexAt(t)}get length(){return this.view.length}get contentHeight(){return this.view.contentHeight}get onDidChangeContentHeight(){return this.view.onDidChangeContentHeight}get scrollTop(){return this.view.getScrollTop()}set scrollTop(t){this.view.setScrollTop(t)}get scrollHeight(){return this.view.scrollHeight}get renderHeight(){return this.view.renderHeight}get firstVisibleIndex(){return this.view.firstVisibleIndex}get ariaLabel(){return this._ariaLabel}set ariaLabel(t){this._ariaLabel=t,this.view.domNode.setAttribute("aria-label",t)}domFocus(){this.view.domNode.focus({preventScroll:!0})}layout(t,e){this.view.layout(t,e)}setSelection(t,e){for(const e of t)if(e<0||e>=this.length)throw new w(this.user,`Invalid index ${e}`);this.selection.set(t,e)}getSelection(){return this.selection.get()}getSelectedElements(){return this.getSelection().map((t=>this.view.element(t)))}setAnchor(t){if(void 0!==t){if(t<0||t>=this.length)throw new w(this.user,`Invalid index ${t}`);this.anchor.set([t])}else this.anchor.set([])}getAnchor(){return(0,c.Fy)(this.anchor.get(),void 0)}getAnchorElement(){const t=this.getAnchor();return void 0===t?void 0:this.element(t)}setFocus(t,e){for(const e of t)if(e<0||e>=this.length)throw new w(this.user,`Invalid index ${e}`);this.focus.set(t,e)}focusNext(t=1,e=!1,i,s){if(0===this.length)return;const o=this.focus.get(),n=this.findNextIndex(o.length>0?o[0]+t:0,e,s);n>-1&&this.setFocus([n],i)}focusPrevious(t=1,e=!1,i,s){if(0===this.length)return;const o=this.focus.get(),n=this.findPreviousIndex(o.length>0?o[0]-t:0,e,s);n>-1&&this.setFocus([n],i)}async focusNextPage(t,e){let i=this.view.indexAt(this.view.getScrollTop()+this.view.renderHeight);i=0===i?0:i-1;const s=this.getFocus()[0];if(s!==i&&(void 0===s||i>s)){const o=this.findPreviousIndex(i,!1,e);o>-1&&s!==o?this.setFocus([o],t):this.setFocus([i],t)}else{const o=this.view.getScrollTop();let n=o+this.view.renderHeight;i>s&&(n-=this.view.elementHeight(i)),this.view.setScrollTop(n),this.view.getScrollTop()!==o&&(this.setFocus([]),await(0,h.wR)(0),await this.focusNextPage(t,e))}}async focusPreviousPage(t,e,i=()=>0){let s;const o=i(),n=this.view.getScrollTop()+o;s=0===n?this.view.indexAt(n):this.view.indexAfter(n-1);const r=this.getFocus()[0];if(r!==s&&(void 0===r||r>=s)){const i=this.findNextIndex(s,!1,e);i>-1&&r!==i?this.setFocus([i],t):this.setFocus([s],t)}else{const s=n;this.view.setScrollTop(n-this.view.renderHeight-o),this.view.getScrollTop()+i()!==s&&(this.setFocus([]),await(0,h.wR)(0),await this.focusPreviousPage(t,e,i))}}focusLast(t,e){if(0===this.length)return;const i=this.findPreviousIndex(this.length-1,!1,e);i>-1&&this.setFocus([i],t)}focusFirst(t,e){this.focusNth(0,t,e)}focusNth(t,e,i){if(0===this.length)return;const s=this.findNextIndex(t,!1,i);s>-1&&this.setFocus([s],e)}findNextIndex(t,e=!1,i){for(let s=0;s<this.length;s++){if(t>=this.length&&!e)return-1;if(t%=this.length,!i||i(this.element(t)))return t;t++}return-1}findPreviousIndex(t,e=!1,i){for(let s=0;s<this.length;s++){if(t<0&&!e)return-1;if(t=(this.length+t%this.length)%this.length,!i||i(this.element(t)))return t;t--}return-1}getFocus(){return this.focus.get()}getFocusedElements(){return this.getFocus().map((t=>this.view.element(t)))}reveal(t,e,i=0){if(t<0||t>=this.length)throw new w(this.user,`Invalid index ${t}`);const s=this.view.getScrollTop(),o=this.view.elementTop(t),n=this.view.elementHeight(t);if((0,f.Et)(e)){const t=n-this.view.renderHeight+i;this.view.setScrollTop(t*(0,b.qE)(e,0,1)+o-i)}else{const t=o+n,e=s+this.view.renderHeight;o<s+i&&t>=e||(o<s+i||t>=e&&n>=this.view.renderHeight?this.view.setScrollTop(o-i):t>=e&&this.view.setScrollTop(t-this.view.renderHeight))}}getRelativeTop(t,e=0){if(t<0||t>=this.length)throw new w(this.user,`Invalid index ${t}`);const i=this.view.getScrollTop(),s=this.view.elementTop(t),o=this.view.elementHeight(t);if(s<i+e||s+o>i+this.view.renderHeight)return null;const n=o-this.view.renderHeight+e;return Math.abs((i+e-s)/n)}getHTMLElement(){return this.view.domNode}getScrollableElement(){return this.view.scrollableElementDomNode}getElementID(t){return this.view.getElementDomId(t)}getElementTop(t){return this.view.elementTop(t)}style(t){this.styleController.style(t)}toListEvent({indexes:t,browserEvent:e}){return{indexes:t,elements:t.map((t=>this.view.element(t))),browserEvent:e}}_onFocusChange(){const t=this.focus.get();this.view.domNode.classList.toggle("element-focused",t.length>0),this.onDidChangeActiveDescendant()}onDidChangeActiveDescendant(){const t=this.focus.get();if(t.length>0){let e;this.accessibilityProvider?.getActiveDescendantId&&(e=this.accessibilityProvider.getActiveDescendantId(this.view.element(t[0]))),this.view.domNode.setAttribute("aria-activedescendant",e||this.view.getElementDomId(t[0]))}else this.view.domNode.removeAttribute("aria-activedescendant")}_onSelectionChange(){const t=this.selection.get();this.view.domNode.classList.toggle("selection-none",0===t.length),this.view.domNode.classList.toggle("selection-single",1===t.length),this.view.domNode.classList.toggle("selection-multiple",t.length>1)}dispose(){this._onDidDispose.fire(),this.disposables.dispose(),this._onDidDispose.dispose()}}C([u.B],tt.prototype,"onDidChangeFocus",null),C([u.B],tt.prototype,"onDidChangeSelection",null),C([u.B],tt.prototype,"onContextMenu",null),C([u.B],tt.prototype,"onKeyDown",null),C([u.B],tt.prototype,"onDidFocus",null),C([u.B],tt.prototype,"onDidBlur",null)},41575:(t,e,i)=>{i.d(e,{W1:()=>C});var s=i(55893),o=i(30474),n=i(14333),r=i(87594),a=i(9715),l=i(77439),c=i(23473),h=i(84451),d=i(58354),u=i(27969),m=i(65958),p=i(5915),g=i(19892),b=i(58881),v=i(24594),f=i(10998),w=i(63339),y=i(16844);const D=/\(&([^\s&])\)|(^|[^&])&([^\s&])/,S=/(&amp;)?(&amp;)([^\s&])/g;var x,E;!function(t){t[t.Right=0]="Right",t[t.Left=1]="Left"}(x||(x={})),function(t){t[t.Above=0]="Above",t[t.Below=1]="Below"}(E||(E={}));class C extends l.E{constructor(t,e,i,s){t.classList.add("monaco-menu-container"),t.setAttribute("role","presentation");const a=document.createElement("div");a.classList.add("monaco-menu"),a.setAttribute("role","presentation"),super(a,{orientation:1,actionViewItemProvider:t=>this.doGetActionViewItem(t,i,l),context:i.context,actionRunner:i.actionRunner,ariaLabel:i.ariaLabel,ariaRole:"menu",focusOnlyEnabledItems:!0,triggerKeys:{keys:[3,...w.zx||w.j9?[10]:[]],keyDown:!0}}),this.menuStyles=s,this.menuElement=a,this.actionsList.tabIndex=0,this.initializeOrUpdateStyleSheet(t,s),this._register(o.q.addTarget(a)),this._register((0,n.ko)(a,n.Bx.KEY_DOWN,(t=>{new r.Z(t).equals(2)&&t.preventDefault()}))),i.enableMnemonics&&this._register((0,n.ko)(a,n.Bx.KEY_DOWN,(t=>{const e=t.key.toLocaleLowerCase();if(this.mnemonics.has(e)){n.fs.stop(t,!0);const i=this.mnemonics.get(e);if(1===i.length&&(i[0]instanceof I&&i[0].container&&this.focusItemByElement(i[0].container),i[0].onClick(t)),i.length>1){const t=i.shift();t&&t.container&&(this.focusItemByElement(t.container),i.push(t)),this.mnemonics.set(e,i)}}}))),w.j9&&this._register((0,n.ko)(a,n.Bx.KEY_DOWN,(t=>{const e=new r.Z(t);e.equals(14)||e.equals(11)?(this.focusedItem=this.viewItems.length-1,this.focusNext(),n.fs.stop(t,!0)):(e.equals(13)||e.equals(12))&&(this.focusedItem=0,this.focusPrevious(),n.fs.stop(t,!0))}))),this._register((0,n.ko)(this.domNode,n.Bx.MOUSE_OUT,(t=>{const e=t.relatedTarget;(0,n.QX)(e,this.domNode)||(this.focusedItem=void 0,this.updateFocus(),t.stopPropagation())}))),this._register((0,n.ko)(this.actionsList,n.Bx.MOUSE_OVER,(t=>{let e=t.target;if(e&&(0,n.QX)(e,this.actionsList)&&e!==this.actionsList){for(;e.parentElement!==this.actionsList&&null!==e.parentElement;)e=e.parentElement;if(e.classList.contains("action-item")){const t=this.focusedItem;this.setFocusedItem(e),t!==this.focusedItem&&this.updateFocus()}}}))),this._register(o.q.addTarget(this.actionsList)),this._register((0,n.ko)(this.actionsList,o.B.Tap,(t=>{let e=t.initialTarget;if(e&&(0,n.QX)(e,this.actionsList)&&e!==this.actionsList){for(;e.parentElement!==this.actionsList&&null!==e.parentElement;)e=e.parentElement;if(e.classList.contains("action-item")){const t=this.focusedItem;this.setFocusedItem(e),t!==this.focusedItem&&this.updateFocus()}}})));const l={parent:this};this.mnemonics=new Map,this.scrollableElement=this._register(new d.MU(a,{alwaysConsumeMouseWheel:!0,horizontal:2,vertical:3,verticalScrollbarSize:7,handleMouseWheel:!0,useShadows:!0}));const c=this.scrollableElement.getDomNode();c.style.position="",this.styleScrollElement(c,s),this._register((0,n.ko)(a,o.B.Change,(t=>{n.fs.stop(t,!0);const e=this.scrollableElement.getScrollPosition().scrollTop;this.scrollableElement.setScrollPosition({scrollTop:e-t.translationY})}))),this._register((0,n.ko)(c,n.Bx.MOUSE_UP,(t=>{t.preventDefault()})));const h=(0,n.zk)(t);a.style.maxHeight=`${Math.max(10,h.innerHeight-t.getBoundingClientRect().top-35)}px`,e=e.filter(((t,s)=>{if(i.submenuIds?.has(t.id))return console.warn(`Found submenu cycle: ${t.id}`),!1;if(t instanceof u.wv){if(s===e.length-1||0===s)return!1;if(e[s-1]instanceof u.wv)return!1}return!0})),this.push(e,{icon:!0,label:!0,isMenu:!0}),t.appendChild(this.scrollableElement.getDomNode()),this.scrollableElement.scanDomNode(),this.viewItems.filter((t=>!(t instanceof N))).forEach(((t,e,i)=>{t.updatePositionInSet(e+1,i.length)}))}initializeOrUpdateStyleSheet(t,e){this.styleSheet||((0,n.Cl)(t)?this.styleSheet=(0,n.li)(t):(C.globalStyleSheet||(C.globalStyleSheet=(0,n.li)()),this.styleSheet=C.globalStyleSheet)),this.styleSheet.textContent=function(t,e){let i=`\n.monaco-menu {\n\tfont-size: 13px;\n\tborder-radius: 5px;\n\tmin-width: 160px;\n}\n\n${A(p.W.menuSelection)}\n${A(p.W.menuSubmenu)}\n\n.monaco-menu .monaco-action-bar {\n\ttext-align: right;\n\toverflow: hidden;\n\twhite-space: nowrap;\n}\n\n.monaco-menu .monaco-action-bar .actions-container {\n\tdisplay: flex;\n\tmargin: 0 auto;\n\tpadding: 0;\n\twidth: 100%;\n\tjustify-content: flex-end;\n}\n\n.monaco-menu .monaco-action-bar.vertical .actions-container {\n\tdisplay: inline-block;\n}\n\n.monaco-menu .monaco-action-bar.reverse .actions-container {\n\tflex-direction: row-reverse;\n}\n\n.monaco-menu .monaco-action-bar .action-item {\n\tcursor: pointer;\n\tdisplay: inline-block;\n\ttransition: transform 50ms ease;\n\tposition: relative;  /* DO NOT REMOVE - this is the key to preventing the ghosting icon bug in Chrome 42 */\n}\n\n.monaco-menu .monaco-action-bar .action-item.disabled {\n\tcursor: default;\n}\n\n.monaco-menu .monaco-action-bar .action-item .icon,\n.monaco-menu .monaco-action-bar .action-item .codicon {\n\tdisplay: inline-block;\n}\n\n.monaco-menu .monaco-action-bar .action-item .codicon {\n\tdisplay: flex;\n\talign-items: center;\n}\n\n.monaco-menu .monaco-action-bar .action-label {\n\tfont-size: 11px;\n\tmargin-right: 4px;\n}\n\n.monaco-menu .monaco-action-bar .action-item.disabled .action-label,\n.monaco-menu .monaco-action-bar .action-item.disabled .action-label:hover {\n\tcolor: var(--vscode-disabledForeground);\n}\n\n/* Vertical actions */\n\n.monaco-menu .monaco-action-bar.vertical {\n\ttext-align: left;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item {\n\tdisplay: block;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label.separator {\n\tdisplay: block;\n\tborder-bottom: 1px solid var(--vscode-menu-separatorBackground);\n\tpadding-top: 1px;\n\tpadding: 30px;\n}\n\n.monaco-menu .secondary-actions .monaco-action-bar .action-label {\n\tmargin-left: 6px;\n}\n\n/* Action Items */\n.monaco-menu .monaco-action-bar .action-item.select-container {\n\toverflow: hidden; /* somehow the dropdown overflows its container, we prevent it here to not push */\n\tflex: 1;\n\tmax-width: 170px;\n\tmin-width: 60px;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tmargin-right: 10px;\n}\n\n.monaco-menu .monaco-action-bar.vertical {\n\tmargin-left: 0;\n\toverflow: visible;\n}\n\n.monaco-menu .monaco-action-bar.vertical .actions-container {\n\tdisplay: block;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item {\n\tpadding: 0;\n\ttransform: none;\n\tdisplay: flex;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item.active {\n\ttransform: none;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-menu-item {\n\tflex: 1 1 auto;\n\tdisplay: flex;\n\theight: 2em;\n\talign-items: center;\n\tposition: relative;\n\tmargin: 0 4px;\n\tborder-radius: 4px;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-menu-item:hover .keybinding,\n.monaco-menu .monaco-action-bar.vertical .action-menu-item:focus .keybinding {\n\topacity: unset;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label {\n\tflex: 1 1 auto;\n\ttext-decoration: none;\n\tpadding: 0 1em;\n\tbackground: none;\n\tfont-size: 12px;\n\tline-height: 1;\n}\n\n.monaco-menu .monaco-action-bar.vertical .keybinding,\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator {\n\tdisplay: inline-block;\n\tflex: 2 1 auto;\n\tpadding: 0 1em;\n\ttext-align: right;\n\tfont-size: 12px;\n\tline-height: 1;\n}\n\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator {\n\theight: 100%;\n}\n\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon {\n\tfont-size: 16px !important;\n\tdisplay: flex;\n\talign-items: center;\n}\n\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon::before {\n\tmargin-left: auto;\n\tmargin-right: -20px;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item.disabled .keybinding,\n.monaco-menu .monaco-action-bar.vertical .action-item.disabled .submenu-indicator {\n\topacity: 0.4;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator) {\n\tdisplay: inline-block;\n\tbox-sizing: border-box;\n\tmargin: 0;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item {\n\tposition: static;\n\toverflow: visible;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item .monaco-submenu {\n\tposition: absolute;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label.separator {\n\twidth: 100%;\n\theight: 0px !important;\n\topacity: 1;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label.separator.text {\n\tpadding: 0.7em 1em 0.1em 1em;\n\tfont-weight: bold;\n\topacity: 1;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label:hover {\n\tcolor: inherit;\n}\n\n.monaco-menu .monaco-action-bar.vertical .menu-item-check {\n\tposition: absolute;\n\tvisibility: hidden;\n\twidth: 1em;\n\theight: 100%;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-menu-item.checked .menu-item-check {\n\tvisibility: visible;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n}\n\n/* Context Menu */\n\n.context-view.monaco-menu-container {\n\toutline: 0;\n\tborder: none;\n\tanimation: fadeIn 0.083s linear;\n\t-webkit-app-region: no-drag;\n}\n\n.context-view.monaco-menu-container :focus,\n.context-view.monaco-menu-container .monaco-action-bar.vertical:focus,\n.context-view.monaco-menu-container .monaco-action-bar.vertical :focus {\n\toutline: 0;\n}\n\n.hc-black .context-view.monaco-menu-container,\n.hc-light .context-view.monaco-menu-container,\n:host-context(.hc-black) .context-view.monaco-menu-container,\n:host-context(.hc-light) .context-view.monaco-menu-container {\n\tbox-shadow: none;\n}\n\n.hc-black .monaco-menu .monaco-action-bar.vertical .action-item.focused,\n.hc-light .monaco-menu .monaco-action-bar.vertical .action-item.focused,\n:host-context(.hc-black) .monaco-menu .monaco-action-bar.vertical .action-item.focused,\n:host-context(.hc-light) .monaco-menu .monaco-action-bar.vertical .action-item.focused {\n\tbackground: none;\n}\n\n/* Vertical Action Bar Styles */\n\n.monaco-menu .monaco-action-bar.vertical {\n\tpadding: 4px 0;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-menu-item {\n\theight: 2em;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator),\n.monaco-menu .monaco-action-bar.vertical .keybinding {\n\tfont-size: inherit;\n\tpadding: 0 2em;\n\tmax-height: 100%;\n}\n\n.monaco-menu .monaco-action-bar.vertical .menu-item-check {\n\tfont-size: inherit;\n\twidth: 2em;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label.separator {\n\tfont-size: inherit;\n\tmargin: 5px 0 !important;\n\tpadding: 0;\n\tborder-radius: 0;\n}\n\n.linux .monaco-menu .monaco-action-bar.vertical .action-label.separator,\n:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .action-label.separator {\n\tmargin-left: 0;\n\tmargin-right: 0;\n}\n\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator {\n\tfont-size: 60%;\n\tpadding: 0 1.8em;\n}\n\n.linux .monaco-menu .monaco-action-bar.vertical .submenu-indicator,\n:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .submenu-indicator {\n\theight: 100%;\n\tmask-size: 10px 10px;\n\t-webkit-mask-size: 10px 10px;\n}\n\n.monaco-menu .action-item {\n\tcursor: default;\n}`;if(e){i+="\n\t\t\t/* Arrows */\n\t\t\t.monaco-scrollable-element > .scrollbar > .scra {\n\t\t\t\tcursor: pointer;\n\t\t\t\tfont-size: 11px !important;\n\t\t\t}\n\n\t\t\t.monaco-scrollable-element > .visible {\n\t\t\t\topacity: 1;\n\n\t\t\t\t/* Background rule added for IE9 - to allow clicks on dom node */\n\t\t\t\tbackground:rgba(0,0,0,0);\n\n\t\t\t\ttransition: opacity 100ms linear;\n\t\t\t}\n\t\t\t.monaco-scrollable-element > .invisible {\n\t\t\t\topacity: 0;\n\t\t\t\tpointer-events: none;\n\t\t\t}\n\t\t\t.monaco-scrollable-element > .invisible.fade {\n\t\t\t\ttransition: opacity 800ms linear;\n\t\t\t}\n\n\t\t\t/* Scrollable Content Inset Shadow */\n\t\t\t.monaco-scrollable-element > .shadow {\n\t\t\t\tposition: absolute;\n\t\t\t\tdisplay: none;\n\t\t\t}\n\t\t\t.monaco-scrollable-element > .shadow.top {\n\t\t\t\tdisplay: block;\n\t\t\t\ttop: 0;\n\t\t\t\tleft: 3px;\n\t\t\t\theight: 3px;\n\t\t\t\twidth: 100%;\n\t\t\t}\n\t\t\t.monaco-scrollable-element > .shadow.left {\n\t\t\t\tdisplay: block;\n\t\t\t\ttop: 3px;\n\t\t\t\tleft: 0;\n\t\t\t\theight: 100%;\n\t\t\t\twidth: 3px;\n\t\t\t}\n\t\t\t.monaco-scrollable-element > .shadow.top-left-corner {\n\t\t\t\tdisplay: block;\n\t\t\t\ttop: 0;\n\t\t\t\tleft: 0;\n\t\t\t\theight: 3px;\n\t\t\t\twidth: 3px;\n\t\t\t}\n\t\t";const e=t.scrollbarShadow;e&&(i+=`\n\t\t\t\t.monaco-scrollable-element > .shadow.top {\n\t\t\t\t\tbox-shadow: ${e} 0 6px 6px -6px inset;\n\t\t\t\t}\n\n\t\t\t\t.monaco-scrollable-element > .shadow.left {\n\t\t\t\t\tbox-shadow: ${e} 6px 0 6px -6px inset;\n\t\t\t\t}\n\n\t\t\t\t.monaco-scrollable-element > .shadow.top.left {\n\t\t\t\t\tbox-shadow: ${e} 6px 6px 6px -6px inset;\n\t\t\t\t}\n\t\t\t`);const s=t.scrollbarSliderBackground;s&&(i+=`\n\t\t\t\t.monaco-scrollable-element > .scrollbar > .slider {\n\t\t\t\t\tbackground: ${s};\n\t\t\t\t}\n\t\t\t`);const o=t.scrollbarSliderHoverBackground;o&&(i+=`\n\t\t\t\t.monaco-scrollable-element > .scrollbar > .slider:hover {\n\t\t\t\t\tbackground: ${o};\n\t\t\t\t}\n\t\t\t`);const n=t.scrollbarSliderActiveBackground;n&&(i+=`\n\t\t\t\t.monaco-scrollable-element > .scrollbar > .slider.active {\n\t\t\t\t\tbackground: ${n};\n\t\t\t\t}\n\t\t\t`)}return i}(e,(0,n.Cl)(t))}styleScrollElement(t,e){const i=e.foregroundColor??"",s=e.backgroundColor??"",o=e.borderColor?`1px solid ${e.borderColor}`:"",n=e.shadowColor?`0 2px 8px ${e.shadowColor}`:"";t.style.outline=o,t.style.borderRadius="5px",t.style.color=i,t.style.backgroundColor=s,t.style.boxShadow=n}getContainer(){return this.scrollableElement.getDomNode()}get onScroll(){return this.scrollableElement.onScroll}focusItemByElement(t){const e=this.focusedItem;this.setFocusedItem(t),e!==this.focusedItem&&this.updateFocus()}setFocusedItem(t){for(let e=0;e<this.actionsList.children.length;e++)if(t===this.actionsList.children[e]){this.focusedItem=e;break}}updateFocus(t){super.updateFocus(t,!0,!0),void 0!==this.focusedItem&&this.scrollableElement.setScrollPosition({scrollTop:Math.round(this.menuElement.scrollTop)})}doGetActionViewItem(t,e,i){if(t instanceof u.wv)return new N(e.context,t,{icon:!0},this.menuStyles);if(t instanceof u.YH){const s=new I(t,t.actions,i,{...e,submenuIds:new Set([...e.submenuIds||[],t.id])},this.menuStyles);if(e.enableMnemonics){const t=s.getMnemonic();if(t&&s.isEnabled()){let e=[];this.mnemonics.has(t)&&(e=this.mnemonics.get(t)),e.push(s),this.mnemonics.set(t,e)}}return s}{const i={enableMnemonics:e.enableMnemonics,useEventAsContext:e.useEventAsContext};if(e.getKeyBinding){const s=e.getKeyBinding(t);if(s){const t=s.getLabel();t&&(i.keybinding=t)}}const s=new k(e.context,t,i,this.menuStyles);if(e.enableMnemonics){const t=s.getMnemonic();if(t&&s.isEnabled()){let e=[];this.mnemonics.has(t)&&(e=this.mnemonics.get(t)),e.push(s),this.mnemonics.set(t,e)}}return s}}}class k extends c.EH{constructor(t,e,i,o){if(i.isMenu=!0,super(e,e,i),this.menuStyle=o,this.options=i,this.options.icon=void 0!==i.icon&&i.icon,this.options.label=void 0===i.label||i.label,this.cssClass="",this.options.label&&i.enableMnemonics){const t=this.action.label;if(t){const e=D.exec(t);e&&(this.mnemonic=(e[1]?e[1]:e[3]).toLocaleLowerCase())}}this.runOnceToEnableMouseUp=new m.uC((()=>{this.element&&(this._register((0,n.ko)(this.element,n.Bx.MOUSE_UP,(t=>{if(n.fs.stop(t,!0),s.gm){if(new a.P((0,n.zk)(this.element),t).rightButton)return;this.onClick(t)}else setTimeout((()=>{this.onClick(t)}),0)}))),this._register((0,n.ko)(this.element,n.Bx.CONTEXT_MENU,(t=>{n.fs.stop(t,!0)}))))}),100),this._register(this.runOnceToEnableMouseUp)}render(t){super.render(t),this.element&&(this.container=t,this.item=(0,n.BC)(this.element,(0,n.$)("a.action-menu-item")),this._action.id===u.wv.ID?this.item.setAttribute("role","presentation"):(this.item.setAttribute("role","menuitem"),this.mnemonic&&this.item.setAttribute("aria-keyshortcuts",`${this.mnemonic}`)),this.check=(0,n.BC)(this.item,(0,n.$)("span.menu-item-check"+b.L.asCSSSelector(p.W.menuSelection))),this.check.setAttribute("role","none"),this.label=(0,n.BC)(this.item,(0,n.$)("span.action-label")),this.options.label&&this.options.keybinding&&((0,n.BC)(this.item,(0,n.$)("span.keybinding")).textContent=this.options.keybinding),this.runOnceToEnableMouseUp.schedule(),this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked(),this.applyStyle())}blur(){super.blur(),this.applyStyle()}focus(){super.focus(),this.item?.focus(),this.applyStyle()}updatePositionInSet(t,e){this.item&&(this.item.setAttribute("aria-posinset",`${t}`),this.item.setAttribute("aria-setsize",`${e}`))}updateLabel(){if(this.label&&this.options.label){(0,n.w_)(this.label);let t=(0,v.pS)(this.action.label);if(t){const e=function(t){const e=D,i=e.exec(t);if(!i)return t;const s=!i[1];return t.replace(e,s?"$2$3":"").trim()}(t);this.options.enableMnemonics||(t=e),this.label.setAttribute("aria-label",e.replace(/&&/g,"&"));const i=D.exec(t);if(i){t=y.ih(t),S.lastIndex=0;let e=S.exec(t);for(;e&&e[1];)e=S.exec(t);const s=t=>t.replace(/&amp;&amp;/g,"&amp;");e?this.label.append(y.NB(s(t.substr(0,e.index))," "),(0,n.$)("u",{"aria-hidden":"true"},e[3]),y.BO(s(t.substr(e.index+e[0].length))," ")):this.label.innerText=s(t).trim(),this.item?.setAttribute("aria-keyshortcuts",(i[1]?i[1]:i[3]).toLocaleLowerCase())}else this.label.innerText=t.replace(/&&/g,"&").trim()}}}updateTooltip(){}updateClass(){this.cssClass&&this.item&&this.item.classList.remove(...this.cssClass.split(" ")),this.options.icon&&this.label?(this.cssClass=this.action.class||"",this.label.classList.add("icon"),this.cssClass&&this.label.classList.add(...this.cssClass.split(" ")),this.updateEnabled()):this.label&&this.label.classList.remove("icon")}updateEnabled(){this.action.enabled?(this.element&&(this.element.classList.remove("disabled"),this.element.removeAttribute("aria-disabled")),this.item&&(this.item.classList.remove("disabled"),this.item.removeAttribute("aria-disabled"),this.item.tabIndex=0)):(this.element&&(this.element.classList.add("disabled"),this.element.setAttribute("aria-disabled","true")),this.item&&(this.item.classList.add("disabled"),this.item.setAttribute("aria-disabled","true")))}updateChecked(){if(!this.item)return;const t=this.action.checked;this.item.classList.toggle("checked",!!t),void 0!==t?(this.item.setAttribute("role","menuitemcheckbox"),this.item.setAttribute("aria-checked",t?"true":"false")):(this.item.setAttribute("role","menuitem"),this.item.setAttribute("aria-checked",""))}getMnemonic(){return this.mnemonic}applyStyle(){const t=this.element&&this.element.classList.contains("focused"),e=t&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor,i=t&&this.menuStyle.selectionBackgroundColor?this.menuStyle.selectionBackgroundColor:void 0,s=t&&this.menuStyle.selectionBorderColor?`1px solid ${this.menuStyle.selectionBorderColor}`:"",o=t&&this.menuStyle.selectionBorderColor?"-1px":"";this.item&&(this.item.style.color=e??"",this.item.style.backgroundColor=i??"",this.item.style.outline=s,this.item.style.outlineOffset=o),this.check&&(this.check.style.color=e??"")}}class I extends k{constructor(t,e,i,s,o){super(t,t,s,o),this.submenuActions=e,this.parentData=i,this.submenuOptions=s,this.mysubmenu=null,this.submenuDisposables=this._register(new f.Cm),this.mouseOver=!1,this.expandDirection=s&&void 0!==s.expandDirection?s.expandDirection:{horizontal:x.Right,vertical:E.Below},this.showScheduler=new m.uC((()=>{this.mouseOver&&(this.cleanupExistingSubmenu(!1),this.createSubmenu(!1))}),250),this.hideScheduler=new m.uC((()=>{this.element&&!(0,n.QX)((0,n.bq)(),this.element)&&this.parentData.submenu===this.mysubmenu&&(this.parentData.parent.focus(!1),this.cleanupExistingSubmenu(!0))}),750)}render(t){super.render(t),this.element&&(this.item&&(this.item.classList.add("monaco-submenu-item"),this.item.tabIndex=0,this.item.setAttribute("aria-haspopup","true"),this.updateAriaExpanded("false"),this.submenuIndicator=(0,n.BC)(this.item,(0,n.$)("span.submenu-indicator"+b.L.asCSSSelector(p.W.menuSubmenu))),this.submenuIndicator.setAttribute("aria-hidden","true")),this._register((0,n.ko)(this.element,n.Bx.KEY_UP,(t=>{const e=new r.Z(t);(e.equals(17)||e.equals(3))&&(n.fs.stop(t,!0),this.createSubmenu(!0))}))),this._register((0,n.ko)(this.element,n.Bx.KEY_DOWN,(t=>{const e=new r.Z(t);(0,n.bq)()===this.item&&(e.equals(17)||e.equals(3))&&n.fs.stop(t,!0)}))),this._register((0,n.ko)(this.element,n.Bx.MOUSE_OVER,(t=>{this.mouseOver||(this.mouseOver=!0,this.showScheduler.schedule())}))),this._register((0,n.ko)(this.element,n.Bx.MOUSE_LEAVE,(t=>{this.mouseOver=!1}))),this._register((0,n.ko)(this.element,n.Bx.FOCUS_OUT,(t=>{this.element&&!(0,n.QX)((0,n.bq)(),this.element)&&this.hideScheduler.schedule()}))),this._register(this.parentData.parent.onScroll((()=>{this.parentData.submenu===this.mysubmenu&&(this.parentData.parent.focus(!1),this.cleanupExistingSubmenu(!0))}))))}updateEnabled(){}onClick(t){n.fs.stop(t,!0),this.cleanupExistingSubmenu(!1),this.createSubmenu(!0)}cleanupExistingSubmenu(t){if(this.parentData.submenu&&(t||this.parentData.submenu!==this.mysubmenu)){try{this.parentData.submenu.dispose()}catch{}this.parentData.submenu=void 0,this.updateAriaExpanded("false"),this.submenuContainer&&(this.submenuDisposables.clear(),this.submenuContainer=void 0)}}calculateSubmenuMenuLayout(t,e,i,s){const o={top:0,left:0};return o.left=(0,h.Zp)(t.width,e.width,{position:s.horizontal===x.Right?0:1,offset:i.left,size:i.width}),o.left>=i.left&&o.left<i.left+i.width&&(i.left+10+e.width<=t.width&&(o.left=i.left+10),i.top+=10,i.height=0),o.top=(0,h.Zp)(t.height,e.height,{position:0,offset:i.top,size:0}),o.top+e.height===i.top&&o.top+i.height+e.height<=t.height&&(o.top+=i.height),o}createSubmenu(t=!0){if(this.element)if(this.parentData.submenu)this.parentData.submenu.focus(!1);else{this.updateAriaExpanded("true"),this.submenuContainer=(0,n.BC)(this.element,(0,n.$)("div.monaco-submenu")),this.submenuContainer.classList.add("menubar-menu-items-holder","context-view");const e=(0,n.zk)(this.parentData.parent.domNode).getComputedStyle(this.parentData.parent.domNode),i=parseFloat(e.paddingTop||"0")||0;this.submenuContainer.style.zIndex="1",this.submenuContainer.style.position="fixed",this.submenuContainer.style.top="0",this.submenuContainer.style.left="0",this.parentData.submenu=new C(this.submenuContainer,this.submenuActions.length?this.submenuActions:[new u.HJ],this.submenuOptions,this.menuStyle);const s=this.element.getBoundingClientRect(),o={top:s.top-i,left:s.left,height:s.height+2*i,width:s.width},a=this.submenuContainer.getBoundingClientRect(),l=(0,n.zk)(this.element),{top:c,left:h}=this.calculateSubmenuMenuLayout(new n.fg(l.innerWidth,l.innerHeight),n.fg.lift(a),o,this.expandDirection);this.submenuContainer.style.left=h-a.left+"px",this.submenuContainer.style.top=c-a.top+"px",this.submenuDisposables.add((0,n.ko)(this.submenuContainer,n.Bx.KEY_UP,(t=>{new r.Z(t).equals(15)&&(n.fs.stop(t,!0),this.parentData.parent.focus(),this.cleanupExistingSubmenu(!0))}))),this.submenuDisposables.add((0,n.ko)(this.submenuContainer,n.Bx.KEY_DOWN,(t=>{new r.Z(t).equals(15)&&n.fs.stop(t,!0)}))),this.submenuDisposables.add(this.parentData.submenu.onDidCancel((()=>{this.parentData.parent.focus(),this.cleanupExistingSubmenu(!0)}))),this.parentData.submenu.focus(t),this.mysubmenu=this.parentData.submenu}}updateAriaExpanded(t){this.item&&this.item?.setAttribute("aria-expanded",t)}applyStyle(){super.applyStyle();const t=this.element&&this.element.classList.contains("focused")&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor;this.submenuIndicator&&(this.submenuIndicator.style.color=t??"")}dispose(){super.dispose(),this.hideScheduler.dispose(),this.mysubmenu&&(this.mysubmenu.dispose(),this.mysubmenu=null),this.submenuContainer&&(this.submenuContainer=void 0)}}class N extends c.Z4{constructor(t,e,i,s){super(t,e,i),this.menuStyles=s}render(t){super.render(t),this.label&&(this.label.style.borderBottomColor=this.menuStyles.separatorColor?`${this.menuStyles.separatorColor}`:"")}}function A(t){const e=(0,g.J)()[t.id];return`.codicon-${t.id}:before { content: '\\${e.toString(16)}'; }`}}}]);