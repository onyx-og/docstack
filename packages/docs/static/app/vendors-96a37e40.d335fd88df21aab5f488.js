"use strict";(self.webpackChunk_docstack_ui=self.webpackChunk_docstack_ui||[]).push([[7536],{9517:(e,t,n)=>{n.d(t,{y:()=>d});var i=n(85374),r=n(60891),s=n(60926),o=n(55818),a=n(41422);class d extends i.F{constructor(e){super(),this._context=e,this._options=new h(this._context.configuration),this._selection=[],this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=new h(this._context.configuration);return this._options.equals(t)?e.hasChanged(146):(this._options=t,!0)}onCursorStateChanged(e){return this._selection=e.selections,"selection"===this._options.renderWhitespace}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}prepareRender(e){if("none"===this._options.renderWhitespace)return void(this._renderResult=null);const t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber-t+1,i=new Array(n);for(let e=0;e<n;e++)i[e]=!0;const r=this._context.viewModel.getMinimapLinesRenderingData(e.viewportData.startLineNumber,e.viewportData.endLineNumber,i);this._renderResult=[];for(let t=e.viewportData.startLineNumber;t<=e.viewportData.endLineNumber;t++){const n=t-e.viewportData.startLineNumber,i=r.data[n];let o=null;if("selection"===this._options.renderWhitespace){const e=this._selection;for(const n of e){if(n.endLineNumber<t||n.startLineNumber>t)continue;const e=n.startLineNumber===t?n.startColumn:i.minColumn,r=n.endLineNumber===t?n.endColumn:i.maxColumn;e<r&&(o||(o=[]),o.push(new s.MT(e-1,r-1)))}}this._renderResult[n]=this._applyRenderWhitespace(e,t,o,i)}}_applyRenderWhitespace(e,t,n,i){if("selection"===this._options.renderWhitespace&&!n)return"";if("trailing"===this._options.renderWhitespace&&i.continuesWithWrappedLine)return"";const s=this._context.theme.getColor(a.w4),d=this._options.renderWithSVG,h=i.content,l=-1===this._options.stopRenderingLineAfter?h.length:Math.min(this._options.stopRenderingLineAfter,h.length),c=i.continuesWithWrappedLine,p=i.minColumn-1,u="boundary"===this._options.renderWhitespace,g="trailing"===this._options.renderWhitespace,f=this._options.lineHeight,w=this._options.middotWidth,x=this._options.wsmiddotWidth,m=this._options.spaceWidth,C=Math.abs(x-m)<Math.abs(w-m)?11825:183,y=this._options.canUseHalfwidthRightwardsArrow;let W,_="",b=!1,v=r.HG(h);-1===v?(b=!0,v=l,W=l):W=r.lT(h);let S=0,R=n&&n[S],L=0;for(let i=p;i<l;i++){const r=h.charCodeAt(i);if(R&&i>=R.endOffset&&(S++,R=n&&n[S]),9!==r&&32!==r)continue;if(g&&!b&&i<=W)continue;if(u&&i>=v&&i<=W&&32===r){const e=i-1>=0?h.charCodeAt(i-1):0,t=i+1<l?h.charCodeAt(i+1):0;if(32!==e&&32!==t)continue}if(u&&c&&i===l-1){const e=i-1>=0?h.charCodeAt(i-1):0;if(32===r&&32!==e&&9!==e)continue}if(n&&(!R||R.startOffset>i||R.endOffset<=i))continue;const s=e.visibleRangeForPosition(new o.y(t,i+1));s&&(d?(L=Math.max(L,s.left),_+=9===r?this._renderArrow(f,m,s.left):`<circle cx="${(s.left+m/2).toFixed(2)}" cy="${(f/2).toFixed(2)}" r="${(m/7).toFixed(2)}" />`):_+=9===r?`<div class="mwh" style="left:${s.left}px;height:${f}px;">${y?String.fromCharCode(65515):String.fromCharCode(8594)}</div>`:`<div class="mwh" style="left:${s.left}px;height:${f}px;">${String.fromCharCode(C)}</div>`)}return d?(L=Math.round(L+m),`<svg style="bottom:0;position:absolute;width:${L}px;height:${f}px" viewBox="0 0 ${L} ${f}" xmlns="http://www.w3.org/2000/svg" fill="${s}">`+_+"</svg>"):_}_renderArrow(e,t,n){const i=e/2,r=n,s={x:0,y:t/7/2},o={x:.8*t,y:s.y},a={x:o.x-.2*o.x,y:o.y+.2*o.x},d={x:a.x+.1*o.x,y:a.y+.1*o.x},h={x:d.x+.35*o.x,y:d.y-.35*o.x};return`<path d="M ${[s,o,a,d,h,{x:h.x,y:-h.y},{x:d.x,y:-d.y},{x:a.x,y:-a.y},{x:o.x,y:-o.y},{x:s.x,y:-s.y}].map(e=>`${(r+e.x).toFixed(2)} ${(i+e.y).toFixed(2)}`).join(" L ")}" />`}render(e,t){if(!this._renderResult)return"";const n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}}class h{constructor(e){const t=e.options,n=t.get(50),i=t.get(38);"off"===i?(this.renderWhitespace="none",this.renderWithSVG=!1):"svg"===i?(this.renderWhitespace=t.get(100),this.renderWithSVG=!0):(this.renderWhitespace=t.get(100),this.renderWithSVG=!1),this.spaceWidth=n.spaceWidth,this.middotWidth=n.middotWidth,this.wsmiddotWidth=n.wsmiddotWidth,this.canUseHalfwidthRightwardsArrow=n.canUseHalfwidthRightwardsArrow,this.lineHeight=t.get(67),this.stopRenderingLineAfter=t.get(118)}equals(e){return this.renderWhitespace===e.renderWhitespace&&this.renderWithSVG===e.renderWithSVG&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineHeight===e.lineHeight&&this.stopRenderingLineAfter===e.stopRenderingLineAfter}}},84167:(e,t,n)=>{n.d(t,{K:()=>c});var i=n(46442),r=n(60891),s=n(69708),o=n(19258),a=n(15801),d=n(16071),h=n(2520);const l=(0,i.H)("domLineBreaksComputer",{createHTML:e=>e});class c{static create(e){return new c(new WeakRef(e))}constructor(e){this.targetWindow=e}createLineBreaksComputer(e,t,n,i,c){const g=[],f=[];return{addRequest:(e,t,n)=>{g.push(e),f.push(t)},finalize:()=>function(e,t,n,i,s,c,g,f){function w(e){const n=f[e];if(n){const i=h.uK.applyInjectedText(t[e],n),r=n.map(e=>e.options),s=n.map(e=>e.column-1);return new d.R_(s,r,[i.length],[],0)}return null}if(-1===s){const e=[];for(let n=0,i=t.length;n<i;n++)e[n]=w(n);return e}const x=Math.round(s*n.typicalHalfwidthCharacterWidth),m=3===c?2:2===c?1:0,C=Math.round(i*m),y=Math.ceil(n.spaceWidth*C),W=document.createElement("div");(0,o.M)(W,n);const _=new a.fe(1e4),b=[],v=[],S=[],R=[],L=[];for(let e=0;e<t.length;e++){const s=h.uK.applyInjectedText(t[e],f[e]);let o=0,a=0,d=x;if(0!==c)if(o=r.HG(s),-1===o)o=0;else{for(let e=0;e<o;e++)a+=9===s.charCodeAt(e)?i-a%i:1;const e=Math.ceil(n.spaceWidth*a);e+n.typicalFullwidthCharacterWidth>x?(o=0,a=0):d=x-e}const l=s.substr(o),u=p(l,a,i,d,_,y);b[e]=o,v[e]=a,S[e]=l,R[e]=u[0],L[e]=u[1]}const A=_.build(),k=l?.createHTML(A)??A;W.innerHTML=k,W.style.position="absolute",W.style.top="10000","keepAll"===g?(W.style.wordBreak="keep-all",W.style.overflowWrap="anywhere"):(W.style.wordBreak="inherit",W.style.overflowWrap="break-word"),e.document.body.appendChild(W);const H=document.createRange(),M=Array.prototype.slice.call(W.children,0),$=[];for(let e=0;e<t.length;e++){const t=u(H,M[e],S[e],R[e]);if(null===t){$[e]=w(e);continue}const n=b[e],i=v[e]+C,r=L[e],s=[];for(let e=0,n=t.length;e<n;e++)s[e]=r[t[e]];if(0!==n)for(let e=0,i=t.length;e<i;e++)t[e]+=n;let o,a;const h=f[e];h?(o=h.map(e=>e.options),a=h.map(e=>e.column-1)):(o=null,a=null),$[e]=new d.R_(a,o,t,s,i)}return W.remove(),$}((0,s.eU)(this.targetWindow.deref()),g,e,t,n,i,c,f)}}}function p(e,t,n,i,s,o){if(0!==o){const e=String(o);s.appendString('<div style="text-indent: -'),s.appendString(e),s.appendString("px; padding-left: "),s.appendString(e),s.appendString("px; box-sizing: border-box; width:")}else s.appendString('<div style="width:');s.appendString(String(i)),s.appendString('px;">');const a=e.length;let d=t,h=0;const l=[],c=[];let p=0<a?e.charCodeAt(0):0;s.appendString("<span>");for(let t=0;t<a;t++){0!==t&&t%16384==0&&s.appendString("</span><span>"),l[t]=h,c[t]=d;const i=p;p=t+1<a?e.charCodeAt(t+1):0;let o=1,u=1;switch(i){case 9:o=n-d%n,u=o;for(let e=1;e<=o;e++)e<o?s.appendCharCode(160):s.appendASCIICharCode(32);break;case 32:32===p?s.appendCharCode(160):s.appendASCIICharCode(32);break;case 60:s.appendString("&lt;");break;case 62:s.appendString("&gt;");break;case 38:s.appendString("&amp;");break;case 0:s.appendString("&#00;");break;case 65279:case 8232:case 8233:case 133:s.appendCharCode(65533);break;default:r.ne(i)&&u++,i<32?s.appendCharCode(9216+i):s.appendCharCode(i)}h+=o,d+=u}return s.appendString("</span>"),l[e.length]=h,c[e.length]=d,s.appendString("</div>"),[l,c]}function u(e,t,n,i){if(n.length<=1)return null;const r=Array.prototype.slice.call(t.children,0),s=[];try{g(e,r,i,0,null,n.length-1,null,s)}catch(e){return console.log(e),null}return 0===s.length?null:(s.push(n.length),s)}function g(e,t,n,i,r,s,o,a){if(i===s)return;if(r=r||f(e,t,n[i],n[i+1]),o=o||f(e,t,n[s],n[s+1]),Math.abs(r[0].top-o[0].top)<=.1)return;if(i+1===s)return void a.push(s);const d=i+(s-i)/2|0,h=f(e,t,n[d],n[d+1]);g(e,t,n,i,r,d,h,a),g(e,t,n,d,h,s,o,a)}function f(e,t,n,i){return e.setStart(t[n/16384|0].firstChild,n%16384),e.setEnd(t[i/16384|0].firstChild,i%16384),e.getClientRects()}},85374:(e,t,n)=>{n.d(t,{F:()=>r});var i=n(78308);class r extends i.i{}}}]);