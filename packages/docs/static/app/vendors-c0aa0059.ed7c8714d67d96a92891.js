"use strict";(self.webpackChunk_docstack_ui=self.webpackChunk_docstack_ui||[]).push([[2708],{26352:(e,t,i)=>{i.d(t,{P:()=>P});var o=i(19746),r=i(55893),s=i(5043),n=i(63339),a=i(16844),c=i(25837),l=i(93344),d=i(13377),h=i(99815),u=i(17316),p=i(61234),g=i(66476),_=i(82862),m=i(15365),v=i(28061),C=i(93702),f=i(68107),S=i(47317),w=i(94901),x=i(37043),y=i(56071),b=i(82399),E=function(e,t){return function(i,o){t(i,o,e)}};class k{constructor(e,t,i,o,r){this._context=e,this.modelLineNumber=t,this.distanceToModelLineStart=i,this.widthOfHiddenLineTextBefore=o,this.distanceToModelLineEnd=r,this._visibleTextAreaBrand=void 0,this.startPosition=null,this.endPosition=null,this.visibleTextareaStart=null,this.visibleTextareaEnd=null,this._previousPresentation=null}prepareRender(e){const t=new m.y(this.modelLineNumber,this.distanceToModelLineStart+1),i=new m.y(this.modelLineNumber,this._context.viewModel.model.getLineMaxColumn(this.modelLineNumber)-this.distanceToModelLineEnd);this.startPosition=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(t),this.endPosition=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(i),this.startPosition.lineNumber===this.endPosition.lineNumber?(this.visibleTextareaStart=e.visibleRangeForPosition(this.startPosition),this.visibleTextareaEnd=e.visibleRangeForPosition(this.endPosition)):(this.visibleTextareaStart=null,this.visibleTextareaEnd=null)}definePresentation(e){return this._previousPresentation||(this._previousPresentation=e||{foreground:1,italic:!1,bold:!1,underline:!1,strikethrough:!1}),this._previousPresentation}}const A=r.gm;let P=class extends h.p{constructor(e,t,i,a,u){super(e),this._keybindingService=a,this._instantiationService=u,this._primaryCursorPosition=new m.y(1,1),this._primaryCursorVisibleRange=null,this._viewController=t,this._visibleRangeProvider=i,this._scrollLeft=0,this._scrollTop=0;const p=this._context.configuration.options,g=p.get(146);this._setAccessibilityOptions(p),this._contentLeft=g.contentLeft,this._contentWidth=g.contentWidth,this._contentHeight=g.height,this._fontInfo=p.get(50),this._lineHeight=p.get(67),this._emptySelectionClipboard=p.get(37),this._copyWithSyntaxHighlighting=p.get(25),this._visibleTextArea=null,this._selections=[new C.L(1,1,1,1)],this._modelSelections=[new C.L(1,1,1,1)],this._lastRenderPosition=null,this.textArea=(0,s.Z)(document.createElement("textarea")),h.L.write(this.textArea,7),this.textArea.setClassName(`inputarea ${f.S}`),this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off");const{tabSize:_}=this._context.viewModel.model.getOptions();this.textArea.domNode.style.tabSize=_*this._fontInfo.spaceWidth+"px",this.textArea.setAttribute("autocorrect","off"),this.textArea.setAttribute("autocapitalize","off"),this.textArea.setAttribute("autocomplete","off"),this.textArea.setAttribute("spellcheck","false"),this.textArea.setAttribute("aria-label",this._getAriaLabel(p)),this.textArea.setAttribute("aria-required",p.get(5)?"true":"false"),this.textArea.setAttribute("tabindex",String(p.get(125))),this.textArea.setAttribute("role","textbox"),this.textArea.setAttribute("aria-roledescription",o.kg("editor","editor")),this.textArea.setAttribute("aria-multiline","true"),this.textArea.setAttribute("aria-autocomplete",p.get(92)?"none":"both"),this._ensureReadOnlyAttribute(),this.textAreaCover=(0,s.Z)(document.createElement("div")),this.textAreaCover.setPosition("absolute");const S={getLineCount:()=>this._context.viewModel.getLineCount(),getLineMaxColumn:e=>this._context.viewModel.getLineMaxColumn(e),getValueInRange:(e,t)=>this._context.viewModel.getValueInRange(e,t),getValueLengthInRange:(e,t)=>this._context.viewModel.getValueLengthInRange(e,t),modifyPosition:(e,t)=>this._context.viewModel.modifyPosition(e,t)},w={getDataToCopy:()=>{const e=this._context.viewModel.getPlainTextToCopy(this._modelSelections,this._emptySelectionClipboard,n.uF),t=this._context.viewModel.model.getEOL(),i=this._emptySelectionClipboard&&1===this._modelSelections.length&&this._modelSelections[0].isEmpty(),o=Array.isArray(e)?e:null,r=Array.isArray(e)?e.join(t):e;let s,a=null;if(l.Eq.forceCopyWithSyntaxHighlighting||this._copyWithSyntaxHighlighting&&r.length<65536){const e=this._context.viewModel.getRichTextToCopy(this._modelSelections,this._emptySelectionClipboard);e&&(s=e.html,a=e.mode)}return{isFromEmptySelection:i,multicursorText:o,text:r,html:s,mode:a}},getScreenReaderContent:()=>{if(1===this._accessibilitySupport){const e=this._selections[0];if(n.zx&&e.isEmpty()){const t=e.getStartPosition();let i=this._getWordBeforePosition(t);if(0===i.length&&(i=this._getCharacterBeforePosition(t)),i.length>0)return new d._O(i,i.length,i.length,v.Q.fromPositions(t),0)}const t=500;if(n.zx&&!e.isEmpty()&&S.getValueLengthInRange(e,0)<t){const t=S.getValueInRange(e,0);return new d._O(t,0,t.length,e,0)}if(r.nr&&!e.isEmpty()){const e="vscode-placeholder";return new d._O(e,0,e.length,null,void 0)}return d._O.EMPTY}if(r.m0){const e=this._selections[0];if(e.isEmpty()){const t=e.getStartPosition(),[i,o]=this._getAndroidWordAtPosition(t);if(i.length>0)return new d._O(i,o,o,v.Q.fromPositions(t),0)}return d._O.EMPTY}return d.Al.fromEditorSelection(S,this._selections[0],this._accessibilityPageSize,0===this._accessibilitySupport)},deduceModelPosition:(e,t,i)=>this._context.viewModel.deduceModelPositionRelativeToViewPosition(e,t,i)},y=this._register(new l.M0(this.textArea.domNode));this._textAreaInput=this._register(this._instantiationService.createInstance(l.No,w,y,n.OS,{isAndroid:r.m0,isChrome:r.H8,isFirefox:r.gm,isSafari:r.nr})),this._register(this._textAreaInput.onKeyDown((e=>{this._viewController.emitKeyDown(e)}))),this._register(this._textAreaInput.onKeyUp((e=>{this._viewController.emitKeyUp(e)}))),this._register(this._textAreaInput.onPaste((e=>{let t=!1,i=null,o=null;e.metadata&&(t=this._emptySelectionClipboard&&!!e.metadata.isFromEmptySelection,i=void 0!==e.metadata.multicursorText?e.metadata.multicursorText:null,o=e.metadata.mode),this._viewController.paste(e.text,t,i,o)}))),this._register(this._textAreaInput.onCut((()=>{this._viewController.cut()}))),this._register(this._textAreaInput.onType((e=>{e.replacePrevCharCnt||e.replaceNextCharCnt||e.positionDelta?(d.Hf&&console.log(` => compositionType: <<${e.text}>>, ${e.replacePrevCharCnt}, ${e.replaceNextCharCnt}, ${e.positionDelta}`),this._viewController.compositionType(e.text,e.replacePrevCharCnt,e.replaceNextCharCnt,e.positionDelta)):(d.Hf&&console.log(` => type: <<${e.text}>>`),this._viewController.type(e.text))}))),this._register(this._textAreaInput.onSelectionChangeRequest((e=>{this._viewController.setSelection(e)}))),this._register(this._textAreaInput.onCompositionStart((e=>{const t=this.textArea.domNode,i=this._modelSelections[0],{distanceToModelLineStart:o,widthOfHiddenTextBefore:r}=(()=>{const e=t.value.substring(0,Math.min(t.selectionStart,t.selectionEnd)),o=e.lastIndexOf("\n"),r=e.substring(o+1),s=r.lastIndexOf("\t"),n=r.length-s-1,a=i.getStartPosition(),l=Math.min(a.column-1,n),d=a.column-1-l,h=r.substring(0,r.length-l),{tabSize:u}=this._context.viewModel.model.getOptions(),p=function(e,t,i,o){if(0===t.length)return 0;const r=e.createElement("div");r.style.position="absolute",r.style.top="-50000px",r.style.width="50000px";const s=e.createElement("span");(0,c.M)(s,i),s.style.whiteSpace="pre",s.style.tabSize=o*i.spaceWidth+"px",s.append(t),r.appendChild(s),e.body.appendChild(r);const n=s.offsetWidth;return r.remove(),n}(this.textArea.domNode.ownerDocument,h,this._fontInfo,u);return{distanceToModelLineStart:d,widthOfHiddenTextBefore:p}})(),{distanceToModelLineEnd:s}=(()=>{const e=t.value.substring(Math.max(t.selectionStart,t.selectionEnd)),o=e.indexOf("\n"),r=-1===o?e:e.substring(0,o),s=r.indexOf("\t"),n=-1===s?r.length:r.length-s-1,a=i.getEndPosition(),c=Math.min(this._context.viewModel.model.getLineMaxColumn(a.lineNumber)-a.column,n);return{distanceToModelLineEnd:this._context.viewModel.model.getLineMaxColumn(a.lineNumber)-a.column-c}})();this._context.viewModel.revealRange("keyboard",!0,v.Q.fromPositions(this._selections[0].getStartPosition()),0,1),this._visibleTextArea=new k(this._context,i.startLineNumber,o,r,s),this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off"),this._visibleTextArea.prepareRender(this._visibleRangeProvider),this._render(),this.textArea.setClassName(`inputarea ${f.S} ime-input`),this._viewController.compositionStart(),this._context.viewModel.onCompositionStart()}))),this._register(this._textAreaInput.onCompositionUpdate((e=>{this._visibleTextArea&&(this._visibleTextArea.prepareRender(this._visibleRangeProvider),this._render())}))),this._register(this._textAreaInput.onCompositionEnd((()=>{this._visibleTextArea=null,this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off"),this._render(),this.textArea.setClassName(`inputarea ${f.S}`),this._viewController.compositionEnd(),this._context.viewModel.onCompositionEnd()}))),this._register(this._textAreaInput.onFocus((()=>{this._context.viewModel.setHasFocus(!0)}))),this._register(this._textAreaInput.onBlur((()=>{this._context.viewModel.setHasFocus(!1)}))),this._register(x.M.onDidChange((()=>{this._ensureReadOnlyAttribute()})))}writeScreenReaderContent(e){this._textAreaInput.writeNativeTextAreaContent(e)}dispose(){super.dispose()}_getAndroidWordAtPosition(e){const t=this._context.viewModel.getLineContent(e.lineNumber),i=(0,_.i)('`~!@#$%^&*()-=+[{]}\\|;:",.<>/?',[]);let o=!0,r=e.column,s=!0,n=e.column,a=0;for(;a<50&&(o||s);){if(o&&r<=1&&(o=!1),o){const e=t.charCodeAt(r-2);0!==i.get(e)?o=!1:r--}if(s&&n>t.length&&(s=!1),s){const e=t.charCodeAt(n-1);0!==i.get(e)?s=!1:n++}a++}return[t.substring(r-1,n-1),e.column-r]}_getWordBeforePosition(e){const t=this._context.viewModel.getLineContent(e.lineNumber),i=(0,_.i)(this._context.configuration.options.get(132),[]);let o=e.column,r=0;for(;o>1;){const s=t.charCodeAt(o-2);if(0!==i.get(s)||r>50)return t.substring(o-1,e.column-1);r++,o--}return t.substring(0,e.column-1)}_getCharacterBeforePosition(e){if(e.column>1){const t=this._context.viewModel.getLineContent(e.lineNumber).charAt(e.column-2);if(!a.pc(t.charCodeAt(0)))return t}return""}_getAriaLabel(e){if(1===e.get(2)){const e=this._keybindingService.lookupKeybinding("editor.action.toggleScreenReaderAccessibilityMode")?.getAriaLabel(),t=this._keybindingService.lookupKeybinding("workbench.action.showCommands")?.getAriaLabel(),i=this._keybindingService.lookupKeybinding("workbench.action.openGlobalKeybindings")?.getAriaLabel(),r=o.kg("accessibilityModeOff","The editor is not accessible at this time.");return e?o.kg("accessibilityOffAriaLabel","{0} To enable screen reader optimized mode, use {1}",r,e):t?o.kg("accessibilityOffAriaLabelNoKb","{0} To enable screen reader optimized mode, open the quick pick with {1} and run the command Toggle Screen Reader Accessibility Mode, which is currently not triggerable via keyboard.",r,t):i?o.kg("accessibilityOffAriaLabelNoKbs","{0} Please assign a keybinding for the command Toggle Screen Reader Accessibility Mode by accessing the keybindings editor with {1} and run it.",r,i):r}return e.get(4)}_setAccessibilityOptions(e){this._accessibilitySupport=e.get(2);const t=e.get(3);2===this._accessibilitySupport&&t===g.qB.accessibilityPageSize.defaultValue?this._accessibilityPageSize=500:this._accessibilityPageSize=t;const i=e.get(146).wrappingColumn;if(-1!==i&&1!==this._accessibilitySupport){const t=e.get(50);this._textAreaWrapping=!0,this._textAreaWidth=Math.round(i*t.typicalHalfwidthCharacterWidth)}else this._textAreaWrapping=!1,this._textAreaWidth=A?0:1}onConfigurationChanged(e){const t=this._context.configuration.options,i=t.get(146);this._setAccessibilityOptions(t),this._contentLeft=i.contentLeft,this._contentWidth=i.contentWidth,this._contentHeight=i.height,this._fontInfo=t.get(50),this._lineHeight=t.get(67),this._emptySelectionClipboard=t.get(37),this._copyWithSyntaxHighlighting=t.get(25),this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off");const{tabSize:o}=this._context.viewModel.model.getOptions();return this.textArea.domNode.style.tabSize=o*this._fontInfo.spaceWidth+"px",this.textArea.setAttribute("aria-label",this._getAriaLabel(t)),this.textArea.setAttribute("aria-required",t.get(5)?"true":"false"),this.textArea.setAttribute("tabindex",String(t.get(125))),(e.hasChanged(34)||e.hasChanged(92))&&this._ensureReadOnlyAttribute(),e.hasChanged(2)&&this._textAreaInput.writeNativeTextAreaContent("strategy changed"),!0}onCursorStateChanged(e){return this._selections=e.selections.slice(0),this._modelSelections=e.modelSelections.slice(0),this._textAreaInput.writeNativeTextAreaContent("selection changed"),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return this._scrollLeft=e.scrollLeft,this._scrollTop=e.scrollTop,!0}onZonesChanged(e){return!0}isFocused(){return this._textAreaInput.isFocused()}focusTextArea(){this._textAreaInput.focusTextArea()}getLastRenderData(){return this._lastRenderPosition}setAriaOptions(e){e.activeDescendant?(this.textArea.setAttribute("aria-haspopup","true"),this.textArea.setAttribute("aria-autocomplete","list"),this.textArea.setAttribute("aria-activedescendant",e.activeDescendant)):(this.textArea.setAttribute("aria-haspopup","false"),this.textArea.setAttribute("aria-autocomplete","both"),this.textArea.removeAttribute("aria-activedescendant")),e.role&&this.textArea.setAttribute("role",e.role)}_ensureReadOnlyAttribute(){const e=this._context.configuration.options;!x.M.enabled||e.get(34)&&e.get(92)?this.textArea.setAttribute("readonly","true"):this.textArea.removeAttribute("readonly")}prepareRender(e){this._primaryCursorPosition=new m.y(this._selections[0].positionLineNumber,this._selections[0].positionColumn),this._primaryCursorVisibleRange=e.visibleRangeForPosition(this._primaryCursorPosition),this._visibleTextArea?.prepareRender(e)}render(e){this._textAreaInput.writeNativeTextAreaContent("render"),this._render()}_render(){if(this._visibleTextArea){const e=this._visibleTextArea.visibleTextareaStart,t=this._visibleTextArea.visibleTextareaEnd,i=this._visibleTextArea.startPosition,o=this._visibleTextArea.endPosition;if(i&&o&&e&&t&&t.left>=this._scrollLeft&&e.left<=this._scrollLeft+this._contentWidth){const r=this._context.viewLayout.getVerticalOffsetForLineNumber(this._primaryCursorPosition.lineNumber)-this._scrollTop,s=this._newlinecount(this.textArea.domNode.value.substr(0,this.textArea.domNode.selectionStart));let n=this._visibleTextArea.widthOfHiddenLineTextBefore,a=this._contentLeft+e.left-this._scrollLeft,c=t.left-e.left+1;if(a<this._contentLeft){const e=this._contentLeft-a;a+=e,n+=e,c-=e}c>this._contentWidth&&(c=this._contentWidth);const l=this._context.viewModel.getViewLineData(i.lineNumber),d=l.tokens.findTokenIndexAtOffset(i.column-1),h=d===l.tokens.findTokenIndexAtOffset(o.column-1),u=this._visibleTextArea.definePresentation(h?l.tokens.getPresentation(d):null);this.textArea.domNode.scrollTop=s*this._lineHeight,this.textArea.domNode.scrollLeft=n,this._doRender({lastRenderPosition:null,top:r,left:a,width:c,height:this._lineHeight,useCover:!1,color:(S.dG.getColorMap()||[])[u.foreground],italic:u.italic,bold:u.bold,underline:u.underline,strikethrough:u.strikethrough})}return}if(!this._primaryCursorVisibleRange)return void this._renderAtTopLeft();const e=this._contentLeft+this._primaryCursorVisibleRange.left-this._scrollLeft;if(e<this._contentLeft||e>this._contentLeft+this._contentWidth)return void this._renderAtTopLeft();const t=this._context.viewLayout.getVerticalOffsetForLineNumber(this._selections[0].positionLineNumber)-this._scrollTop;if(t<0||t>this._contentHeight)this._renderAtTopLeft();else if(n.zx||2===this._accessibilitySupport){this._doRender({lastRenderPosition:this._primaryCursorPosition,top:t,left:this._textAreaWrapping?this._contentLeft:e,width:this._textAreaWidth,height:this._lineHeight,useCover:!1}),this.textArea.domNode.scrollLeft=this._primaryCursorVisibleRange.left;const i=this._textAreaInput.textAreaState.newlineCountBeforeSelection??this._newlinecount(this.textArea.domNode.value.substr(0,this.textArea.domNode.selectionStart));this.textArea.domNode.scrollTop=i*this._lineHeight}else this._doRender({lastRenderPosition:this._primaryCursorPosition,top:t,left:this._textAreaWrapping?this._contentLeft:e,width:this._textAreaWidth,height:A?0:1,useCover:!1})}_newlinecount(e){let t=0,i=-1;for(;i=e.indexOf("\n",i+1),-1!==i;)t++;return t}_renderAtTopLeft(){this._doRender({lastRenderPosition:null,top:0,left:0,width:this._textAreaWidth,height:A?0:1,useCover:!0})}_doRender(e){this._lastRenderPosition=e.lastRenderPosition;const t=this.textArea,i=this.textAreaCover;(0,c.M)(t,this._fontInfo),t.setTop(e.top),t.setLeft(e.left),t.setWidth(e.width),t.setHeight(e.height),t.setColor(e.color?w.Q1.Format.CSS.formatHex(e.color):""),t.setFontStyle(e.italic?"italic":""),e.bold&&t.setFontWeight("bold"),t.setTextDecoration(`${e.underline?" underline":""}${e.strikethrough?" line-through":""}`),i.setTop(e.useCover?e.top:0),i.setLeft(e.useCover?e.left:0),i.setWidth(e.useCover?e.width:0),i.setHeight(e.useCover?e.height:0);const o=this._context.configuration.options;o.get(57)?i.setClassName("monaco-editor-background textAreaCover "+p.R.OUTER_CLASS_NAME):0!==o.get(68).renderType?i.setClassName("monaco-editor-background textAreaCover "+u.h.CLASS_NAME):i.setClassName("monaco-editor-background textAreaCover")}};P=function(e,t,i,o){var r,s=arguments.length,n=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(n=(s<3?r(n):s>3?r(t,i,n):r(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n}([E(3,y.b),E(4,b._Y)],P)},93344:(e,t,i)=>{i.d(t,{$D:()=>o,Eq:()=>f,M0:()=>b,No:()=>x});var o,r=i(55893),s=i(14333),n=i(34061),a=i(87594),c=i(42863),l=i(65958),d=i(2106),h=i(10998),u=i(53720),p=i(16844),g=i(13377),_=i(93702),m=i(53909),v=i(46441),C=function(e,t){return function(i,o){t(i,o,e)}};!function(e){e.Tap="-monaco-textarea-synthetic-tap"}(o||(o={}));const f={forceCopyWithSyntaxHighlighting:!1};class S{static{this.INSTANCE=new S}constructor(){this._lastState=null}set(e,t){this._lastState={lastCopiedValue:e,data:t}}get(e){return this._lastState&&this._lastState.lastCopiedValue===e?this._lastState.data:(this._lastState=null,null)}}class w{constructor(){this._lastTypeTextLength=0}handleCompositionUpdate(e){const t={text:e=e||"",replacePrevCharCnt:this._lastTypeTextLength,replaceNextCharCnt:0,positionDelta:0};return this._lastTypeTextLength=e.length,t}}let x=class extends h.jG{get textAreaState(){return this._textAreaState}constructor(e,t,i,o,r,s){super(),this._host=e,this._textArea=t,this._OS=i,this._browser=o,this._accessibilityService=r,this._logService=s,this._onFocus=this._register(new d.vl),this.onFocus=this._onFocus.event,this._onBlur=this._register(new d.vl),this.onBlur=this._onBlur.event,this._onKeyDown=this._register(new d.vl),this.onKeyDown=this._onKeyDown.event,this._onKeyUp=this._register(new d.vl),this.onKeyUp=this._onKeyUp.event,this._onCut=this._register(new d.vl),this.onCut=this._onCut.event,this._onPaste=this._register(new d.vl),this.onPaste=this._onPaste.event,this._onType=this._register(new d.vl),this.onType=this._onType.event,this._onCompositionStart=this._register(new d.vl),this.onCompositionStart=this._onCompositionStart.event,this._onCompositionUpdate=this._register(new d.vl),this.onCompositionUpdate=this._onCompositionUpdate.event,this._onCompositionEnd=this._register(new d.vl),this.onCompositionEnd=this._onCompositionEnd.event,this._onSelectionChangeRequest=this._register(new d.vl),this.onSelectionChangeRequest=this._onSelectionChangeRequest.event,this._asyncFocusGainWriteScreenReaderContent=this._register(new h.HE),this._asyncTriggerCut=this._register(new l.uC((()=>this._onCut.fire()),0)),this._textAreaState=g._O.EMPTY,this._selectionChangeListener=null,this._accessibilityService.isScreenReaderOptimized()&&this.writeNativeTextAreaContent("ctor"),this._register(d.Jh.runAndSubscribe(this._accessibilityService.onDidChangeScreenReaderOptimized,(()=>{this._accessibilityService.isScreenReaderOptimized()&&!this._asyncFocusGainWriteScreenReaderContent.value?this._asyncFocusGainWriteScreenReaderContent.value=this._register(new l.uC((()=>this.writeNativeTextAreaContent("asyncFocusGain")),0)):this._asyncFocusGainWriteScreenReaderContent.clear()}))),this._hasFocus=!1,this._currentComposition=null;let n=null;this._register(this._textArea.onKeyDown((e=>{const t=new a.Z(e);(114===t.keyCode||this._currentComposition&&1===t.keyCode)&&t.stopPropagation(),t.equals(9)&&t.preventDefault(),n=t,this._onKeyDown.fire(t)}))),this._register(this._textArea.onKeyUp((e=>{const t=new a.Z(e);this._onKeyUp.fire(t)}))),this._register(this._textArea.onCompositionStart((e=>{g.Hf&&console.log("[compositionstart]",e);const t=new w;if(this._currentComposition)this._currentComposition=t;else{if(this._currentComposition=t,2===this._OS&&n&&n.equals(114)&&this._textAreaState.selectionStart===this._textAreaState.selectionEnd&&this._textAreaState.selectionStart>0&&this._textAreaState.value.substr(this._textAreaState.selectionStart-1,1)===e.data&&("ArrowRight"===n.code||"ArrowLeft"===n.code))return g.Hf&&console.log("[compositionstart] Handling long press case on macOS + arrow key",e),t.handleCompositionUpdate("x"),void this._onCompositionStart.fire({data:e.data});this._browser.isAndroid,this._onCompositionStart.fire({data:e.data})}}))),this._register(this._textArea.onCompositionUpdate((e=>{g.Hf&&console.log("[compositionupdate]",e);const t=this._currentComposition;if(!t)return;if(this._browser.isAndroid){const t=g._O.readFromTextArea(this._textArea,this._textAreaState),i=g._O.deduceAndroidCompositionInput(this._textAreaState,t);return this._textAreaState=t,this._onType.fire(i),void this._onCompositionUpdate.fire(e)}const i=t.handleCompositionUpdate(e.data);this._textAreaState=g._O.readFromTextArea(this._textArea,this._textAreaState),this._onType.fire(i),this._onCompositionUpdate.fire(e)}))),this._register(this._textArea.onCompositionEnd((e=>{g.Hf&&console.log("[compositionend]",e);const t=this._currentComposition;if(!t)return;if(this._currentComposition=null,this._browser.isAndroid){const e=g._O.readFromTextArea(this._textArea,this._textAreaState),t=g._O.deduceAndroidCompositionInput(this._textAreaState,e);return this._textAreaState=e,this._onType.fire(t),void this._onCompositionEnd.fire()}const i=t.handleCompositionUpdate(e.data);this._textAreaState=g._O.readFromTextArea(this._textArea,this._textAreaState),this._onType.fire(i),this._onCompositionEnd.fire()}))),this._register(this._textArea.onInput((e=>{if(g.Hf&&console.log("[input]",e),this._textArea.setIgnoreSelectionChangeTime("received input event"),this._currentComposition)return;const t=g._O.readFromTextArea(this._textArea,this._textAreaState),i=g._O.deduceInput(this._textAreaState,t,2===this._OS);(0!==i.replacePrevCharCnt||1!==i.text.length||!p.pc(i.text.charCodeAt(0))&&127!==i.text.charCodeAt(0))&&(this._textAreaState=t,""===i.text&&0===i.replacePrevCharCnt&&0===i.replaceNextCharCnt&&0===i.positionDelta||this._onType.fire(i))}))),this._register(this._textArea.onCut((e=>{this._textArea.setIgnoreSelectionChangeTime("received cut event"),this._ensureClipboardGetsEditorSelection(e),this._asyncTriggerCut.schedule()}))),this._register(this._textArea.onCopy((e=>{this._ensureClipboardGetsEditorSelection(e)}))),this._register(this._textArea.onPaste((e=>{if(this._textArea.setIgnoreSelectionChangeTime("received paste event"),e.preventDefault(),!e.clipboardData)return;let[t,i]=y.getTextData(e.clipboardData);t&&(i=i||S.INSTANCE.get(t),this._onPaste.fire({text:t,metadata:i}))}))),this._register(this._textArea.onFocus((()=>{const e=this._hasFocus;this._setHasFocus(!0),this._accessibilityService.isScreenReaderOptimized()&&this._browser.isSafari&&!e&&this._hasFocus&&(this._asyncFocusGainWriteScreenReaderContent.value||(this._asyncFocusGainWriteScreenReaderContent.value=new l.uC((()=>this.writeNativeTextAreaContent("asyncFocusGain")),0)),this._asyncFocusGainWriteScreenReaderContent.value.schedule())}))),this._register(this._textArea.onBlur((()=>{this._currentComposition&&(this._currentComposition=null,this.writeNativeTextAreaContent("blurWithoutCompositionEnd"),this._onCompositionEnd.fire()),this._setHasFocus(!1)}))),this._register(this._textArea.onSyntheticTap((()=>{this._browser.isAndroid&&this._currentComposition&&(this._currentComposition=null,this.writeNativeTextAreaContent("tapWithoutCompositionEnd"),this._onCompositionEnd.fire())})))}_installSelectionChangeListener(){let e=0;return s.ko(this._textArea.ownerDocument,"selectionchange",(t=>{if(c.p.onSelectionChange(),!this._hasFocus)return;if(this._currentComposition)return;if(!this._browser.isChrome)return;const i=Date.now(),o=i-e;if(e=i,o<5)return;const r=i-this._textArea.getIgnoreSelectionChangeTime();if(this._textArea.resetSelectionChangeTime(),r<100)return;if(!this._textAreaState.selection)return;const s=this._textArea.getValue();if(this._textAreaState.value!==s)return;const n=this._textArea.getSelectionStart(),a=this._textArea.getSelectionEnd();if(this._textAreaState.selectionStart===n&&this._textAreaState.selectionEnd===a)return;const l=this._textAreaState.deduceEditorPosition(n),d=this._host.deduceModelPosition(l[0],l[1],l[2]),h=this._textAreaState.deduceEditorPosition(a),u=this._host.deduceModelPosition(h[0],h[1],h[2]),p=new _.L(d.lineNumber,d.column,u.lineNumber,u.column);this._onSelectionChangeRequest.fire(p)}))}dispose(){super.dispose(),this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null)}focusTextArea(){this._setHasFocus(!0),this.refreshFocusState()}isFocused(){return this._hasFocus}refreshFocusState(){this._setHasFocus(this._textArea.hasFocus())}_setHasFocus(e){this._hasFocus!==e&&(this._hasFocus=e,this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null),this._hasFocus&&(this._selectionChangeListener=this._installSelectionChangeListener()),this._hasFocus&&this.writeNativeTextAreaContent("focusgain"),this._hasFocus?this._onFocus.fire():this._onBlur.fire())}_setAndWriteTextAreaState(e,t){this._hasFocus||(t=t.collapseSelection()),t.writeToTextArea(e,this._textArea,this._hasFocus),this._textAreaState=t}writeNativeTextAreaContent(e){!this._accessibilityService.isScreenReaderOptimized()&&"render"===e||this._currentComposition||(this._logService.trace(`writeTextAreaState(reason: ${e})`),this._setAndWriteTextAreaState(e,this._host.getScreenReaderContent()))}_ensureClipboardGetsEditorSelection(e){const t=this._host.getDataToCopy(),i={version:1,isFromEmptySelection:t.isFromEmptySelection,multicursorText:t.multicursorText,mode:t.mode};S.INSTANCE.set(this._browser.isFirefox?t.text.replace(/\r\n/g,"\n"):t.text,i),e.preventDefault(),e.clipboardData&&y.setTextData(e.clipboardData,t.text,t.html,i)}};x=function(e,t,i,o){var r,s=arguments.length,n=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(n=(s<3?r(n):s>3?r(t,i,n):r(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n}([C(4,m.j),C(5,v.rr)],x);const y={getTextData(e){const t=e.getData(u.K.text);let i=null;const o=e.getData("vscode-editor-data");if("string"==typeof o)try{i=JSON.parse(o),1!==i.version&&(i=null)}catch(e){}return 0===t.length&&null===i&&e.files.length>0?[Array.prototype.slice.call(e.files,0).map((e=>e.name)).join("\n"),null]:[t,i]},setTextData(e,t,i,o){e.setData(u.K.text,t),"string"==typeof i&&e.setData("text/html",i),e.setData("vscode-editor-data",JSON.stringify(o))}};class b extends h.jG{get ownerDocument(){return this._actual.ownerDocument}constructor(e){super(),this._actual=e,this.onKeyDown=this._register(new n.f(this._actual,"keydown")).event,this.onKeyUp=this._register(new n.f(this._actual,"keyup")).event,this.onCompositionStart=this._register(new n.f(this._actual,"compositionstart")).event,this.onCompositionUpdate=this._register(new n.f(this._actual,"compositionupdate")).event,this.onCompositionEnd=this._register(new n.f(this._actual,"compositionend")).event,this.onBeforeInput=this._register(new n.f(this._actual,"beforeinput")).event,this.onInput=this._register(new n.f(this._actual,"input")).event,this.onCut=this._register(new n.f(this._actual,"cut")).event,this.onCopy=this._register(new n.f(this._actual,"copy")).event,this.onPaste=this._register(new n.f(this._actual,"paste")).event,this.onFocus=this._register(new n.f(this._actual,"focus")).event,this.onBlur=this._register(new n.f(this._actual,"blur")).event,this._onSyntheticTap=this._register(new d.vl),this.onSyntheticTap=this._onSyntheticTap.event,this._ignoreSelectionChangeTime=0,this._register(this.onKeyDown((()=>c.p.onKeyDown()))),this._register(this.onBeforeInput((()=>c.p.onBeforeInput()))),this._register(this.onInput((()=>c.p.onInput()))),this._register(this.onKeyUp((()=>c.p.onKeyUp()))),this._register(s.ko(this._actual,o.Tap,(()=>this._onSyntheticTap.fire())))}hasFocus(){const e=s.jG(this._actual);return e?e.activeElement===this._actual:!!this._actual.isConnected&&s.bq()===this._actual}setIgnoreSelectionChangeTime(e){this._ignoreSelectionChangeTime=Date.now()}getIgnoreSelectionChangeTime(){return this._ignoreSelectionChangeTime}resetSelectionChangeTime(){this._ignoreSelectionChangeTime=0}getValue(){return this._actual.value}setValue(e,t){const i=this._actual;i.value!==t&&(this.setIgnoreSelectionChangeTime("setValue"),i.value=t)}getSelectionStart(){return"backward"===this._actual.selectionDirection?this._actual.selectionEnd:this._actual.selectionStart}getSelectionEnd(){return"backward"===this._actual.selectionDirection?this._actual.selectionStart:this._actual.selectionEnd}setSelectionRange(e,t,i){const o=this._actual;let n=null;const a=s.jG(o);n=a?a.activeElement:s.bq();const c=s.zk(n),l=n===o,d=o.selectionStart,h=o.selectionEnd;if(l&&d===t&&h===i)r.gm&&c.parent!==c&&o.focus();else{if(l)return this.setIgnoreSelectionChangeTime("setSelectionRange"),o.setSelectionRange(t,i),void(r.gm&&c.parent!==c&&o.focus());try{const e=s.zK(o);this.setIgnoreSelectionChangeTime("setSelectionRange"),o.focus(),o.setSelectionRange(t,i),s.wk(o,e)}catch(e){}}}}},13377:(e,t,i)=>{i.d(t,{Al:()=>a,Hf:()=>s,_O:()=>n});var o=i(16844),r=i(28061);const s=!1;class n{static{this.EMPTY=new n("",0,0,null,void 0)}constructor(e,t,i,o,r){this.value=e,this.selectionStart=t,this.selectionEnd=i,this.selection=o,this.newlineCountBeforeSelection=r}toString(){return`[ <${this.value}>, selectionStart: ${this.selectionStart}, selectionEnd: ${this.selectionEnd}]`}static readFromTextArea(e,t){const i=e.getValue(),o=e.getSelectionStart(),r=e.getSelectionEnd();let s;return t&&i.substring(0,o)===t.value.substring(0,t.selectionStart)&&(s=t.newlineCountBeforeSelection),new n(i,o,r,null,s)}collapseSelection(){return this.selectionStart===this.value.length?this:new n(this.value,this.value.length,this.value.length,null,void 0)}writeToTextArea(e,t,i){s&&console.log(`writeToTextArea ${e}: ${this.toString()}`),t.setValue(e,this.value),i&&t.setSelectionRange(e,this.selectionStart,this.selectionEnd)}deduceEditorPosition(e){if(e<=this.selectionStart){const t=this.value.substring(e,this.selectionStart);return this._finishDeduceEditorPosition(this.selection?.getStartPosition()??null,t,-1)}if(e>=this.selectionEnd){const t=this.value.substring(this.selectionEnd,e);return this._finishDeduceEditorPosition(this.selection?.getEndPosition()??null,t,1)}const t=this.value.substring(this.selectionStart,e);if(-1===t.indexOf(String.fromCharCode(8230)))return this._finishDeduceEditorPosition(this.selection?.getStartPosition()??null,t,1);const i=this.value.substring(e,this.selectionEnd);return this._finishDeduceEditorPosition(this.selection?.getEndPosition()??null,i,-1)}_finishDeduceEditorPosition(e,t,i){let o=0,r=-1;for(;-1!==(r=t.indexOf("\n",r+1));)o++;return[e,i*t.length,o]}static deduceInput(e,t,i){if(!e)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};s&&(console.log("------------------------deduceInput"),console.log(`PREVIOUS STATE: ${e.toString()}`),console.log(`CURRENT STATE: ${t.toString()}`));const r=Math.min(o.Qp(e.value,t.value),e.selectionStart,t.selectionStart),n=Math.min(o.Vi(e.value,t.value),e.value.length-e.selectionEnd,t.value.length-t.selectionEnd),a=e.value.substring(r,e.value.length-n),c=t.value.substring(r,t.value.length-n),l=e.selectionStart-r,d=e.selectionEnd-r,h=t.selectionStart-r,u=t.selectionEnd-r;if(s&&(console.log(`AFTER DIFFING PREVIOUS STATE: <${a}>, selectionStart: ${l}, selectionEnd: ${d}`),console.log(`AFTER DIFFING CURRENT STATE: <${c}>, selectionStart: ${h}, selectionEnd: ${u}`)),h===u){const t=e.selectionStart-r;return s&&console.log(`REMOVE PREVIOUS: ${t} chars`),{text:c,replacePrevCharCnt:t,replaceNextCharCnt:0,positionDelta:0}}return{text:c,replacePrevCharCnt:d-l,replaceNextCharCnt:0,positionDelta:0}}static deduceAndroidCompositionInput(e,t){if(!e)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};if(s&&(console.log("------------------------deduceAndroidCompositionInput"),console.log(`PREVIOUS STATE: ${e.toString()}`),console.log(`CURRENT STATE: ${t.toString()}`)),e.value===t.value)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:t.selectionEnd-e.selectionEnd};const i=Math.min(o.Qp(e.value,t.value),e.selectionEnd),r=Math.min(o.Vi(e.value,t.value),e.value.length-e.selectionEnd),n=e.value.substring(i,e.value.length-r),a=t.value.substring(i,t.value.length-r),c=e.selectionStart-i,l=e.selectionEnd-i,d=t.selectionStart-i,h=t.selectionEnd-i;return s&&(console.log(`AFTER DIFFING PREVIOUS STATE: <${n}>, selectionStart: ${c}, selectionEnd: ${l}`),console.log(`AFTER DIFFING CURRENT STATE: <${a}>, selectionStart: ${d}, selectionEnd: ${h}`)),{text:a,replacePrevCharCnt:l,replaceNextCharCnt:n.length-l,positionDelta:h-a.length}}}class a{static _getPageOfLine(e,t){return Math.floor((e-1)/t)}static _getRangeForPage(e,t){const i=e*t,o=i+1,s=i+t;return new r.Q(o,1,s+1,1)}static fromEditorSelection(e,t,i,o){const s=500,c=a._getPageOfLine(t.startLineNumber,i),l=a._getRangeForPage(c,i),d=a._getPageOfLine(t.endLineNumber,i),h=a._getRangeForPage(d,i);let u=l.intersectRanges(new r.Q(1,1,t.startLineNumber,t.startColumn));if(o&&e.getValueLengthInRange(u,1)>s){const t=e.modifyPosition(u.getEndPosition(),-500);u=r.Q.fromPositions(t,u.getEndPosition())}const p=e.getValueInRange(u,1),g=e.getLineCount(),_=e.getLineMaxColumn(g);let m=h.intersectRanges(new r.Q(t.endLineNumber,t.endColumn,g,_));if(o&&e.getValueLengthInRange(m,1)>s){const t=e.modifyPosition(m.getStartPosition(),s);m=r.Q.fromPositions(m.getStartPosition(),t)}const v=e.getValueInRange(m,1);let C;if(c===d||c+1===d)C=e.getValueInRange(t,1);else{const i=l.intersectRanges(t),o=h.intersectRanges(t);C=e.getValueInRange(i,1)+String.fromCharCode(8230)+e.getValueInRange(o,1)}return o&&C.length>1e3&&(C=C.substring(0,s)+String.fromCharCode(8230)+C.substring(C.length-s,C.length)),new n(p+C+v,p.length,p.length+C.length,t,u.endLineNumber-u.startLineNumber)}}},90612:(e,t,i)=>{i.d(t,{QM:()=>s});var o,r,s,n=i(19746),a=i(55893),c=i(79359),l=i(59407),d=i(50946),h=i(87301),u=i(92147),p=i(29895),g=i(97666),_=i(27064),m=i(96137),v=i(15365),C=i(28061),f=i(38122),S=i(31540),w=i(48421),x=i(14333),y=i(62885);class b extends d.DX{runEditorCommand(e,t,i){const o=t._getViewModel();o&&this.runCoreEditorCommand(o,i||{})}}!function(e){e.metadata={description:"Scroll editor in the given direction",args:[{name:"Editor scroll argument object",description:"Property-value pairs that can be passed through this argument:\n\t\t\t\t\t* 'to': A mandatory direction value.\n\t\t\t\t\t\t```\n\t\t\t\t\t\t'up', 'down'\n\t\t\t\t\t\t```\n\t\t\t\t\t* 'by': Unit to move. Default is computed based on 'to' value.\n\t\t\t\t\t\t```\n\t\t\t\t\t\t'line', 'wrappedLine', 'page', 'halfPage', 'editor'\n\t\t\t\t\t\t```\n\t\t\t\t\t* 'value': Number of units to move. Default is '1'.\n\t\t\t\t\t* 'revealCursor': If 'true' reveals the cursor if it is outside view port.\n\t\t\t\t",constraint:function(e){if(!c.Gv(e))return!1;const t=e;return!(!c.Kg(t.to)||!c.b0(t.by)&&!c.Kg(t.by)||!c.b0(t.value)&&!c.Et(t.value)||!c.b0(t.revealCursor)&&!c.Lm(t.revealCursor))},schema:{type:"object",required:["to"],properties:{to:{type:"string",enum:["up","down"]},by:{type:"string",enum:["line","wrappedLine","page","halfPage","editor"]},value:{type:"number",default:1},revealCursor:{type:"boolean"}}}}]},e.RawDirection={Up:"up",Right:"right",Down:"down",Left:"left"},e.RawUnit={Line:"line",WrappedLine:"wrappedLine",Page:"page",HalfPage:"halfPage",Editor:"editor",Column:"column"},e.parse=function(t){let i,o;switch(t.to){case e.RawDirection.Up:i=1;break;case e.RawDirection.Right:i=2;break;case e.RawDirection.Down:i=3;break;case e.RawDirection.Left:i=4;break;default:return null}switch(t.by){case e.RawUnit.Line:o=1;break;case e.RawUnit.WrappedLine:o=2;break;case e.RawUnit.Page:o=3;break;case e.RawUnit.HalfPage:o=4;break;case e.RawUnit.Editor:o=5;break;case e.RawUnit.Column:o=6;break;default:o=2}return{direction:i,unit:o,value:Math.floor(t.value||1),revealCursor:!!t.revealCursor,select:!!t.select}}}(o||(o={})),function(e){e.metadata={description:"Reveal the given line at the given logical position",args:[{name:"Reveal line argument object",description:"Property-value pairs that can be passed through this argument:\n\t\t\t\t\t* 'lineNumber': A mandatory line number value.\n\t\t\t\t\t* 'at': Logical position at which line has to be revealed.\n\t\t\t\t\t\t```\n\t\t\t\t\t\t'top', 'center', 'bottom'\n\t\t\t\t\t\t```\n\t\t\t\t",constraint:function(e){if(!c.Gv(e))return!1;const t=e;return!(!c.Et(t.lineNumber)&&!c.Kg(t.lineNumber)||!c.b0(t.at)&&!c.Kg(t.at))},schema:{type:"object",required:["lineNumber"],properties:{lineNumber:{type:["number","string"]},at:{type:"string",enum:["top","center","bottom"]}}}}]},e.RawAtArgument={Top:"top",Center:"center",Bottom:"bottom"}}(r||(r={}));class E{constructor(e){e.addImplementation(1e4,"code-editor",((e,t)=>{const i=e.get(h.T).getFocusedCodeEditor();return!(!i||!i.hasTextFocus())&&this._runEditorCommand(e,i,t)})),e.addImplementation(1e3,"generic-dom-input-textarea",((e,t)=>{const i=(0,x.bq)();return!!(i&&["input","textarea"].indexOf(i.tagName.toLowerCase())>=0)&&(this.runDOMCommand(i),!0)})),e.addImplementation(0,"generic-dom",((e,t)=>{const i=e.get(h.T).getActiveCodeEditor();return!!i&&(i.focus(),this._runEditorCommand(e,i,t))}))}_runEditorCommand(e,t,i){return this.runEditorCommand(e,t,i)||!0}}!function(e){class t extends b{constructor(e){super(e),this._inSelectionMode=e.inSelectionMode}runCoreEditorCommand(e,t){t.position&&(e.model.pushStackElement(),e.setCursorStates(t.source,3,[_.c.moveTo(e,e.getPrimaryCursorState(),this._inSelectionMode,t.position,t.viewPosition)])&&2!==t.revealType&&e.revealAllCursors(t.source,!0,!0))}}e.MoveTo=(0,d.E_)(new t({id:"_moveTo",inSelectionMode:!1,precondition:void 0})),e.MoveToSelect=(0,d.E_)(new t({id:"_moveToSelect",inSelectionMode:!0,precondition:void 0}));class i extends b{runCoreEditorCommand(e,t){e.model.pushStackElement();const i=this._getColumnSelectResult(e,e.getPrimaryCursorState(),e.getCursorColumnSelectData(),t);null!==i&&(e.setCursorStates(t.source,3,i.viewStates.map((e=>p.MF.fromViewState(e)))),e.setCursorColumnSelectData({isReal:!0,fromViewLineNumber:i.fromLineNumber,fromViewVisualColumn:i.fromVisualColumn,toViewLineNumber:i.toLineNumber,toViewVisualColumn:i.toVisualColumn}),i.reversed?e.revealTopMostCursor(t.source):e.revealBottomMostCursor(t.source))}}e.ColumnSelect=(0,d.E_)(new class extends i{constructor(){super({id:"columnSelect",precondition:void 0})}_getColumnSelectResult(e,t,i,o){if(void 0===o.position||void 0===o.viewPosition||void 0===o.mouseColumn)return null;const r=e.model.validatePosition(o.position),s=e.coordinatesConverter.validateViewPosition(new v.y(o.viewPosition.lineNumber,o.viewPosition.column),r),n=o.doColumnSelect?i.fromViewLineNumber:s.lineNumber,a=o.doColumnSelect?i.fromViewVisualColumn:o.mouseColumn-1;return u.X.columnSelect(e.cursorConfig,e,n,a,s.lineNumber,o.mouseColumn-1)}}),e.CursorColumnSelectLeft=(0,d.E_)(new class extends i{constructor(){super({id:"cursorColumnSelectLeft",precondition:void 0,kbOpts:{weight:0,kbExpr:f.R.textInputFocus,primary:3599,linux:{primary:0}}})}_getColumnSelectResult(e,t,i,o){return u.X.columnSelectLeft(e.cursorConfig,e,i)}}),e.CursorColumnSelectRight=(0,d.E_)(new class extends i{constructor(){super({id:"cursorColumnSelectRight",precondition:void 0,kbOpts:{weight:0,kbExpr:f.R.textInputFocus,primary:3601,linux:{primary:0}}})}_getColumnSelectResult(e,t,i,o){return u.X.columnSelectRight(e.cursorConfig,e,i)}});class s extends i{constructor(e){super(e),this._isPaged=e.isPaged}_getColumnSelectResult(e,t,i,o){return u.X.columnSelectUp(e.cursorConfig,e,i,this._isPaged)}}e.CursorColumnSelectUp=(0,d.E_)(new s({isPaged:!1,id:"cursorColumnSelectUp",precondition:void 0,kbOpts:{weight:0,kbExpr:f.R.textInputFocus,primary:3600,linux:{primary:0}}})),e.CursorColumnSelectPageUp=(0,d.E_)(new s({isPaged:!0,id:"cursorColumnSelectPageUp",precondition:void 0,kbOpts:{weight:0,kbExpr:f.R.textInputFocus,primary:3595,linux:{primary:0}}}));class c extends i{constructor(e){super(e),this._isPaged=e.isPaged}_getColumnSelectResult(e,t,i,o){return u.X.columnSelectDown(e.cursorConfig,e,i,this._isPaged)}}e.CursorColumnSelectDown=(0,d.E_)(new c({isPaged:!1,id:"cursorColumnSelectDown",precondition:void 0,kbOpts:{weight:0,kbExpr:f.R.textInputFocus,primary:3602,linux:{primary:0}}})),e.CursorColumnSelectPageDown=(0,d.E_)(new c({isPaged:!0,id:"cursorColumnSelectPageDown",precondition:void 0,kbOpts:{weight:0,kbExpr:f.R.textInputFocus,primary:3596,linux:{primary:0}}}));class h extends b{constructor(){super({id:"cursorMove",precondition:void 0,metadata:_.S.metadata})}runCoreEditorCommand(e,t){const i=_.S.parse(t);i&&this._runCursorMove(e,t.source,i)}_runCursorMove(e,t,i){e.model.pushStackElement(),e.setCursorStates(t,3,h._move(e,e.getCursorStates(),i)),e.revealAllCursors(t,!0)}static _move(e,t,i){const o=i.select,r=i.value;switch(i.direction){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:return _.c.simpleMove(e,t,i.direction,o,r,i.unit);case 11:case 13:case 12:case 14:return _.c.viewportMove(e,t,i.direction,o,r);default:return null}}}e.CursorMoveImpl=h,e.CursorMove=(0,d.E_)(new h);class g extends b{constructor(e){super(e),this._staticArgs=e.args}runCoreEditorCommand(e,t){let i=this._staticArgs;-1===this._staticArgs.value&&(i={direction:this._staticArgs.direction,unit:this._staticArgs.unit,select:this._staticArgs.select,value:t.pageSize||e.cursorConfig.pageSize}),e.model.pushStackElement(),e.setCursorStates(t.source,3,_.c.simpleMove(e,e.getCursorStates(),i.direction,i.select,i.value,i.unit)),e.revealAllCursors(t.source,!0)}}e.CursorLeft=(0,d.E_)(new g({args:{direction:0,unit:0,select:!1,value:1},id:"cursorLeft",precondition:void 0,kbOpts:{weight:0,kbExpr:f.R.textInputFocus,primary:15,mac:{primary:15,secondary:[288]}}})),e.CursorLeftSelect=(0,d.E_)(new g({args:{direction:0,unit:0,select:!0,value:1},id:"cursorLeftSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:f.R.textInputFocus,primary:1039}})),e.CursorRight=(0,d.E_)(new g({args:{direction:1,unit:0,select:!1,value:1},id:"cursorRight",precondition:void 0,kbOpts:{weight:0,kbExpr:f.R.textInputFocus,primary:17,mac:{primary:17,secondary:[292]}}})),e.CursorRightSelect=(0,d.E_)(new g({args:{direction:1,unit:0,select:!0,value:1},id:"cursorRightSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:f.R.textInputFocus,primary:1041}})),e.CursorUp=(0,d.E_)(new g({args:{direction:2,unit:2,select:!1,value:1},id:"cursorUp",precondition:void 0,kbOpts:{weight:0,kbExpr:f.R.textInputFocus,primary:16,mac:{primary:16,secondary:[302]}}})),e.CursorUpSelect=(0,d.E_)(new g({args:{direction:2,unit:2,select:!0,value:1},id:"cursorUpSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:f.R.textInputFocus,primary:1040,secondary:[3088],mac:{primary:1040},linux:{primary:1040}}})),e.CursorPageUp=(0,d.E_)(new g({args:{direction:2,unit:2,select:!1,value:-1},id:"cursorPageUp",precondition:void 0,kbOpts:{weight:0,kbExpr:f.R.textInputFocus,primary:11}})),e.CursorPageUpSelect=(0,d.E_)(new g({args:{direction:2,unit:2,select:!0,value:-1},id:"cursorPageUpSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:f.R.textInputFocus,primary:1035}})),e.CursorDown=(0,d.E_)(new g({args:{direction:3,unit:2,select:!1,value:1},id:"cursorDown",precondition:void 0,kbOpts:{weight:0,kbExpr:f.R.textInputFocus,primary:18,mac:{primary:18,secondary:[300]}}})),e.CursorDownSelect=(0,d.E_)(new g({args:{direction:3,unit:2,select:!0,value:1},id:"cursorDownSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:f.R.textInputFocus,primary:1042,secondary:[3090],mac:{primary:1042},linux:{primary:1042}}})),e.CursorPageDown=(0,d.E_)(new g({args:{direction:3,unit:2,select:!1,value:-1},id:"cursorPageDown",precondition:void 0,kbOpts:{weight:0,kbExpr:f.R.textInputFocus,primary:12}})),e.CursorPageDownSelect=(0,d.E_)(new g({args:{direction:3,unit:2,select:!0,value:-1},id:"cursorPageDownSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:f.R.textInputFocus,primary:1036}})),e.CreateCursor=(0,d.E_)(new class extends b{constructor(){super({id:"createCursor",precondition:void 0})}runCoreEditorCommand(e,t){if(!t.position)return;let i;i=t.wholeLine?_.c.line(e,e.getPrimaryCursorState(),!1,t.position,t.viewPosition):_.c.moveTo(e,e.getPrimaryCursorState(),!1,t.position,t.viewPosition);const o=e.getCursorStates();if(o.length>1){const r=i.modelState?i.modelState.position:null,s=i.viewState?i.viewState.position:null;for(let i=0,n=o.length;i<n;i++){const n=o[i];if((!r||n.modelState.selection.containsPosition(r))&&(!s||n.viewState.selection.containsPosition(s)))return o.splice(i,1),e.model.pushStackElement(),void e.setCursorStates(t.source,3,o)}}o.push(i),e.model.pushStackElement(),e.setCursorStates(t.source,3,o)}}),e.LastCursorMoveToSelect=(0,d.E_)(new class extends b{constructor(){super({id:"_lastCursorMoveToSelect",precondition:void 0})}runCoreEditorCommand(e,t){if(!t.position)return;const i=e.getLastAddedCursorIndex(),o=e.getCursorStates(),r=o.slice(0);r[i]=_.c.moveTo(e,o[i],!0,t.position,t.viewPosition),e.model.pushStackElement(),e.setCursorStates(t.source,3,r)}});class m extends b{constructor(e){super(e),this._inSelectionMode=e.inSelectionMode}runCoreEditorCommand(e,t){e.model.pushStackElement(),e.setCursorStates(t.source,3,_.c.moveToBeginningOfLine(e,e.getCursorStates(),this._inSelectionMode)),e.revealAllCursors(t.source,!0)}}e.CursorHome=(0,d.E_)(new m({inSelectionMode:!1,id:"cursorHome",precondition:void 0,kbOpts:{weight:0,kbExpr:f.R.textInputFocus,primary:14,mac:{primary:14,secondary:[2063]}}})),e.CursorHomeSelect=(0,d.E_)(new m({inSelectionMode:!0,id:"cursorHomeSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:f.R.textInputFocus,primary:1038,mac:{primary:1038,secondary:[3087]}}}));class S extends b{constructor(e){super(e),this._inSelectionMode=e.inSelectionMode}runCoreEditorCommand(e,t){e.model.pushStackElement(),e.setCursorStates(t.source,3,this._exec(e.getCursorStates())),e.revealAllCursors(t.source,!0)}_exec(e){const t=[];for(let i=0,o=e.length;i<o;i++){const o=e[i],r=o.modelState.position.lineNumber;t[i]=p.MF.fromModelState(o.modelState.move(this._inSelectionMode,r,1,0))}return t}}e.CursorLineStart=(0,d.E_)(new S({inSelectionMode:!1,id:"cursorLineStart",precondition:void 0,kbOpts:{weight:0,kbExpr:f.R.textInputFocus,primary:0,mac:{primary:287}}})),e.CursorLineStartSelect=(0,d.E_)(new S({inSelectionMode:!0,id:"cursorLineStartSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:f.R.textInputFocus,primary:0,mac:{primary:1311}}}));class w extends b{constructor(e){super(e),this._inSelectionMode=e.inSelectionMode}runCoreEditorCommand(e,t){e.model.pushStackElement(),e.setCursorStates(t.source,3,_.c.moveToEndOfLine(e,e.getCursorStates(),this._inSelectionMode,t.sticky||!1)),e.revealAllCursors(t.source,!0)}}e.CursorEnd=(0,d.E_)(new w({inSelectionMode:!1,id:"cursorEnd",precondition:void 0,kbOpts:{args:{sticky:!1},weight:0,kbExpr:f.R.textInputFocus,primary:13,mac:{primary:13,secondary:[2065]}},metadata:{description:"Go to End",args:[{name:"args",schema:{type:"object",properties:{sticky:{description:n.kg("stickydesc","Stick to the end even when going to longer lines"),type:"boolean",default:!1}}}}]}})),e.CursorEndSelect=(0,d.E_)(new w({inSelectionMode:!0,id:"cursorEndSelect",precondition:void 0,kbOpts:{args:{sticky:!1},weight:0,kbExpr:f.R.textInputFocus,primary:1037,mac:{primary:1037,secondary:[3089]}},metadata:{description:"Select to End",args:[{name:"args",schema:{type:"object",properties:{sticky:{description:n.kg("stickydesc","Stick to the end even when going to longer lines"),type:"boolean",default:!1}}}}]}}));class x extends b{constructor(e){super(e),this._inSelectionMode=e.inSelectionMode}runCoreEditorCommand(e,t){e.model.pushStackElement(),e.setCursorStates(t.source,3,this._exec(e,e.getCursorStates())),e.revealAllCursors(t.source,!0)}_exec(e,t){const i=[];for(let o=0,r=t.length;o<r;o++){const r=t[o],s=r.modelState.position.lineNumber,n=e.model.getLineMaxColumn(s);i[o]=p.MF.fromModelState(r.modelState.move(this._inSelectionMode,s,n,0))}return i}}e.CursorLineEnd=(0,d.E_)(new x({inSelectionMode:!1,id:"cursorLineEnd",precondition:void 0,kbOpts:{weight:0,kbExpr:f.R.textInputFocus,primary:0,mac:{primary:291}}})),e.CursorLineEndSelect=(0,d.E_)(new x({inSelectionMode:!0,id:"cursorLineEndSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:f.R.textInputFocus,primary:0,mac:{primary:1315}}}));class y extends b{constructor(e){super(e),this._inSelectionMode=e.inSelectionMode}runCoreEditorCommand(e,t){e.model.pushStackElement(),e.setCursorStates(t.source,3,_.c.moveToBeginningOfBuffer(e,e.getCursorStates(),this._inSelectionMode)),e.revealAllCursors(t.source,!0)}}e.CursorTop=(0,d.E_)(new y({inSelectionMode:!1,id:"cursorTop",precondition:void 0,kbOpts:{weight:0,kbExpr:f.R.textInputFocus,primary:2062,mac:{primary:2064}}})),e.CursorTopSelect=(0,d.E_)(new y({inSelectionMode:!0,id:"cursorTopSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:f.R.textInputFocus,primary:3086,mac:{primary:3088}}}));class k extends b{constructor(e){super(e),this._inSelectionMode=e.inSelectionMode}runCoreEditorCommand(e,t){e.model.pushStackElement(),e.setCursorStates(t.source,3,_.c.moveToEndOfBuffer(e,e.getCursorStates(),this._inSelectionMode)),e.revealAllCursors(t.source,!0)}}e.CursorBottom=(0,d.E_)(new k({inSelectionMode:!1,id:"cursorBottom",precondition:void 0,kbOpts:{weight:0,kbExpr:f.R.textInputFocus,primary:2061,mac:{primary:2066}}})),e.CursorBottomSelect=(0,d.E_)(new k({inSelectionMode:!0,id:"cursorBottomSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:f.R.textInputFocus,primary:3085,mac:{primary:3090}}}));class A extends b{constructor(){super({id:"editorScroll",precondition:void 0,metadata:o.metadata})}determineScrollMethod(e){return[6].includes(e.unit)&&[4,2].includes(e.direction)?this._runHorizontalEditorScroll.bind(this):[1,2,3,4,5,6].includes(e.unit)&&[1,3].includes(e.direction)?this._runVerticalEditorScroll.bind(this):null}runCoreEditorCommand(e,t){const i=o.parse(t);if(!i)return;const r=this.determineScrollMethod(i);r&&r(e,t.source,i)}_runVerticalEditorScroll(e,t,i){const o=this._computeDesiredScrollTop(e,i);if(i.revealCursor){const r=e.getCompletelyVisibleViewRangeAtScrollTop(o);e.setCursorStates(t,3,[_.c.findPositionInViewportIfOutside(e,e.getPrimaryCursorState(),r,i.select)])}e.viewLayout.setScrollPosition({scrollTop:o},0)}_computeDesiredScrollTop(e,t){if(1===t.unit){const i=e.viewLayout.getFutureViewport(),o=e.getCompletelyVisibleViewRangeAtScrollTop(i.top),r=e.coordinatesConverter.convertViewRangeToModelRange(o);let s;s=1===t.direction?Math.max(1,r.startLineNumber-t.value):Math.min(e.model.getLineCount(),r.startLineNumber+t.value);const n=e.coordinatesConverter.convertModelPositionToViewPosition(new v.y(s,1));return e.viewLayout.getVerticalOffsetForLineNumber(n.lineNumber)}if(5===t.unit){let i=0;return 3===t.direction&&(i=e.model.getLineCount()-e.cursorConfig.pageSize),e.viewLayout.getVerticalOffsetForLineNumber(i)}let i;i=3===t.unit?e.cursorConfig.pageSize*t.value:4===t.unit?Math.round(e.cursorConfig.pageSize/2)*t.value:t.value;const o=(1===t.direction?-1:1)*i;return e.viewLayout.getCurrentScrollTop()+o*e.cursorConfig.lineHeight}_runHorizontalEditorScroll(e,t,i){const o=this._computeDesiredScrollLeft(e,i);e.viewLayout.setScrollPosition({scrollLeft:o},0)}_computeDesiredScrollLeft(e,t){const i=(4===t.direction?-1:1)*t.value;return e.viewLayout.getCurrentScrollLeft()+i*e.cursorConfig.typicalHalfwidthCharacterWidth}}e.EditorScrollImpl=A,e.EditorScroll=(0,d.E_)(new A),e.ScrollLineUp=(0,d.E_)(new class extends b{constructor(){super({id:"scrollLineUp",precondition:void 0,kbOpts:{weight:0,kbExpr:f.R.textInputFocus,primary:2064,mac:{primary:267}}})}runCoreEditorCommand(t,i){e.EditorScroll.runCoreEditorCommand(t,{to:o.RawDirection.Up,by:o.RawUnit.WrappedLine,value:1,revealCursor:!1,select:!1,source:i.source})}}),e.ScrollPageUp=(0,d.E_)(new class extends b{constructor(){super({id:"scrollPageUp",precondition:void 0,kbOpts:{weight:0,kbExpr:f.R.textInputFocus,primary:2059,win:{primary:523},linux:{primary:523}}})}runCoreEditorCommand(t,i){e.EditorScroll.runCoreEditorCommand(t,{to:o.RawDirection.Up,by:o.RawUnit.Page,value:1,revealCursor:!1,select:!1,source:i.source})}}),e.ScrollEditorTop=(0,d.E_)(new class extends b{constructor(){super({id:"scrollEditorTop",precondition:void 0,kbOpts:{weight:0,kbExpr:f.R.textInputFocus}})}runCoreEditorCommand(t,i){e.EditorScroll.runCoreEditorCommand(t,{to:o.RawDirection.Up,by:o.RawUnit.Editor,value:1,revealCursor:!1,select:!1,source:i.source})}}),e.ScrollLineDown=(0,d.E_)(new class extends b{constructor(){super({id:"scrollLineDown",precondition:void 0,kbOpts:{weight:0,kbExpr:f.R.textInputFocus,primary:2066,mac:{primary:268}}})}runCoreEditorCommand(t,i){e.EditorScroll.runCoreEditorCommand(t,{to:o.RawDirection.Down,by:o.RawUnit.WrappedLine,value:1,revealCursor:!1,select:!1,source:i.source})}}),e.ScrollPageDown=(0,d.E_)(new class extends b{constructor(){super({id:"scrollPageDown",precondition:void 0,kbOpts:{weight:0,kbExpr:f.R.textInputFocus,primary:2060,win:{primary:524},linux:{primary:524}}})}runCoreEditorCommand(t,i){e.EditorScroll.runCoreEditorCommand(t,{to:o.RawDirection.Down,by:o.RawUnit.Page,value:1,revealCursor:!1,select:!1,source:i.source})}}),e.ScrollEditorBottom=(0,d.E_)(new class extends b{constructor(){super({id:"scrollEditorBottom",precondition:void 0,kbOpts:{weight:0,kbExpr:f.R.textInputFocus}})}runCoreEditorCommand(t,i){e.EditorScroll.runCoreEditorCommand(t,{to:o.RawDirection.Down,by:o.RawUnit.Editor,value:1,revealCursor:!1,select:!1,source:i.source})}}),e.ScrollLeft=(0,d.E_)(new class extends b{constructor(){super({id:"scrollLeft",precondition:void 0,kbOpts:{weight:0,kbExpr:f.R.textInputFocus}})}runCoreEditorCommand(t,i){e.EditorScroll.runCoreEditorCommand(t,{to:o.RawDirection.Left,by:o.RawUnit.Column,value:2,revealCursor:!1,select:!1,source:i.source})}}),e.ScrollRight=(0,d.E_)(new class extends b{constructor(){super({id:"scrollRight",precondition:void 0,kbOpts:{weight:0,kbExpr:f.R.textInputFocus}})}runCoreEditorCommand(t,i){e.EditorScroll.runCoreEditorCommand(t,{to:o.RawDirection.Right,by:o.RawUnit.Column,value:2,revealCursor:!1,select:!1,source:i.source})}});class P extends b{constructor(e){super(e),this._inSelectionMode=e.inSelectionMode}runCoreEditorCommand(e,t){t.position&&(e.model.pushStackElement(),e.setCursorStates(t.source,3,[_.c.word(e,e.getPrimaryCursorState(),this._inSelectionMode,t.position)]),2!==t.revealType&&e.revealAllCursors(t.source,!0,!0))}}e.WordSelect=(0,d.E_)(new P({inSelectionMode:!1,id:"_wordSelect",precondition:void 0})),e.WordSelectDrag=(0,d.E_)(new P({inSelectionMode:!0,id:"_wordSelectDrag",precondition:void 0})),e.LastCursorWordSelect=(0,d.E_)(new class extends b{constructor(){super({id:"lastCursorWordSelect",precondition:void 0})}runCoreEditorCommand(e,t){if(!t.position)return;const i=e.getLastAddedCursorIndex(),o=e.getCursorStates(),r=o.slice(0),s=o[i];r[i]=_.c.word(e,s,s.modelState.hasSelection(),t.position),e.model.pushStackElement(),e.setCursorStates(t.source,3,r)}});class T extends b{constructor(e){super(e),this._inSelectionMode=e.inSelectionMode}runCoreEditorCommand(e,t){t.position&&(e.model.pushStackElement(),e.setCursorStates(t.source,3,[_.c.line(e,e.getPrimaryCursorState(),this._inSelectionMode,t.position,t.viewPosition)]),2!==t.revealType&&e.revealAllCursors(t.source,!1,!0))}}e.LineSelect=(0,d.E_)(new T({inSelectionMode:!1,id:"_lineSelect",precondition:void 0})),e.LineSelectDrag=(0,d.E_)(new T({inSelectionMode:!0,id:"_lineSelectDrag",precondition:void 0}));class R extends b{constructor(e){super(e),this._inSelectionMode=e.inSelectionMode}runCoreEditorCommand(e,t){if(!t.position)return;const i=e.getLastAddedCursorIndex(),o=e.getCursorStates(),r=o.slice(0);r[i]=_.c.line(e,o[i],this._inSelectionMode,t.position,t.viewPosition),e.model.pushStackElement(),e.setCursorStates(t.source,3,r)}}e.LastCursorLineSelect=(0,d.E_)(new R({inSelectionMode:!1,id:"lastCursorLineSelect",precondition:void 0})),e.LastCursorLineSelectDrag=(0,d.E_)(new R({inSelectionMode:!0,id:"lastCursorLineSelectDrag",precondition:void 0})),e.CancelSelection=(0,d.E_)(new class extends b{constructor(){super({id:"cancelSelection",precondition:f.R.hasNonEmptySelection,kbOpts:{weight:0,kbExpr:f.R.textInputFocus,primary:9,secondary:[1033]}})}runCoreEditorCommand(e,t){e.model.pushStackElement(),e.setCursorStates(t.source,3,[_.c.cancelSelection(e,e.getPrimaryCursorState())]),e.revealAllCursors(t.source,!0)}}),e.RemoveSecondaryCursors=(0,d.E_)(new class extends b{constructor(){super({id:"removeSecondaryCursors",precondition:f.R.hasMultipleSelections,kbOpts:{weight:1,kbExpr:f.R.textInputFocus,primary:9,secondary:[1033]}})}runCoreEditorCommand(e,t){e.model.pushStackElement(),e.setCursorStates(t.source,3,[e.getPrimaryCursorState()]),e.revealAllCursors(t.source,!0),(0,l.h5)(n.kg("removedCursor","Removed secondary cursors"))}}),e.RevealLine=(0,d.E_)(new class extends b{constructor(){super({id:"revealLine",precondition:void 0,metadata:r.metadata})}runCoreEditorCommand(e,t){const i=t,o=i.lineNumber||0;let s="number"==typeof o?o+1:parseInt(o)+1;s<1&&(s=1);const n=e.model.getLineCount();s>n&&(s=n);const a=new C.Q(s,1,s,e.model.getLineMaxColumn(s));let c=0;if(i.at)switch(i.at){case r.RawAtArgument.Top:c=3;break;case r.RawAtArgument.Center:c=1;break;case r.RawAtArgument.Bottom:c=4}const l=e.coordinatesConverter.convertModelRangeToViewRange(a);e.revealRange(t.source,!1,l,c,0)}}),e.SelectAll=new class extends E{constructor(){super(d.tc)}runDOMCommand(e){a.gm&&(e.focus(),e.select()),e.ownerDocument.execCommand("selectAll")}runEditorCommand(e,t,i){const o=t._getViewModel();o&&this.runCoreEditorCommand(o,i)}runCoreEditorCommand(e,t){e.model.pushStackElement(),e.setCursorStates("keyboard",3,[_.c.selectAll(e,e.getPrimaryCursorState())])}},e.SetSelection=(0,d.E_)(new class extends b{constructor(){super({id:"setSelection",precondition:void 0})}runCoreEditorCommand(e,t){t.selection&&(e.model.pushStackElement(),e.setCursorStates(t.source,3,[p.MF.fromModelSelection(t.selection)]))}})}(s||(s={}));const k=S.M$.and(f.R.textInputFocus,f.R.columnSelection);function A(e,t){w.f.registerKeybindingRule({id:e,primary:t,when:k,weight:1})}function P(e){return e.register(),e}var T;A(s.CursorColumnSelectLeft.id,1039),A(s.CursorColumnSelectRight.id,1041),A(s.CursorColumnSelectUp.id,1040),A(s.CursorColumnSelectPageUp.id,1035),A(s.CursorColumnSelectDown.id,1042),A(s.CursorColumnSelectPageDown.id,1036),function(e){class t extends d.DX{runEditorCommand(e,t,i){const o=t._getViewModel();o&&this.runCoreEditingCommand(t,o,i||{})}}e.CoreEditingCommand=t,e.LineBreakInsert=(0,d.E_)(new class extends t{constructor(){super({id:"lineBreakInsert",precondition:f.R.writable,kbOpts:{weight:0,kbExpr:f.R.textInputFocus,primary:0,mac:{primary:301}}})}runCoreEditingCommand(e,t,i){e.pushUndoStop(),e.executeCommands(this.id,y.AO.lineBreakInsert(t.cursorConfig,t.model,t.getCursorStates().map((e=>e.modelState.selection))))}}),e.Outdent=(0,d.E_)(new class extends t{constructor(){super({id:"outdent",precondition:f.R.writable,kbOpts:{weight:0,kbExpr:S.M$.and(f.R.editorTextFocus,f.R.tabDoesNotMoveFocus),primary:1026}})}runCoreEditingCommand(e,t,i){e.pushUndoStop(),e.executeCommands(this.id,m.T.outdent(t.cursorConfig,t.model,t.getCursorStates().map((e=>e.modelState.selection)))),e.pushUndoStop()}}),e.Tab=(0,d.E_)(new class extends t{constructor(){super({id:"tab",precondition:f.R.writable,kbOpts:{weight:0,kbExpr:S.M$.and(f.R.editorTextFocus,f.R.tabDoesNotMoveFocus),primary:2}})}runCoreEditingCommand(e,t,i){e.pushUndoStop(),e.executeCommands(this.id,m.T.tab(t.cursorConfig,t.model,t.getCursorStates().map((e=>e.modelState.selection)))),e.pushUndoStop()}}),e.DeleteLeft=(0,d.E_)(new class extends t{constructor(){super({id:"deleteLeft",precondition:void 0,kbOpts:{weight:0,kbExpr:f.R.textInputFocus,primary:1,secondary:[1025],mac:{primary:1,secondary:[1025,294,257]}}})}runCoreEditingCommand(e,t,i){const[o,r]=g.g.deleteLeft(t.getPrevEditOperationType(),t.cursorConfig,t.model,t.getCursorStates().map((e=>e.modelState.selection)),t.getCursorAutoClosedCharacters());o&&e.pushUndoStop(),e.executeCommands(this.id,r),t.setPrevEditOperationType(2)}}),e.DeleteRight=(0,d.E_)(new class extends t{constructor(){super({id:"deleteRight",precondition:void 0,kbOpts:{weight:0,kbExpr:f.R.textInputFocus,primary:20,mac:{primary:20,secondary:[290,276]}}})}runCoreEditingCommand(e,t,i){const[o,r]=g.g.deleteRight(t.getPrevEditOperationType(),t.cursorConfig,t.model,t.getCursorStates().map((e=>e.modelState.selection)));o&&e.pushUndoStop(),e.executeCommands(this.id,r),t.setPrevEditOperationType(3)}}),e.Undo=new class extends E{constructor(){super(d.aU)}runDOMCommand(e){e.ownerDocument.execCommand("undo")}runEditorCommand(e,t,i){if(t.hasModel()&&!0!==t.getOption(92))return t.getModel().undo()}},e.Redo=new class extends E{constructor(){super(d.ih)}runDOMCommand(e){e.ownerDocument.execCommand("redo")}runEditorCommand(e,t,i){if(t.hasModel()&&!0!==t.getOption(92))return t.getModel().redo()}}}(T||(T={}));class R extends d.uB{constructor(e,t,i){super({id:e,precondition:void 0,metadata:i}),this._handlerId=t}runCommand(e,t){const i=e.get(h.T).getFocusedCodeEditor();i&&i.trigger("keyboard",this._handlerId,t)}}function M(e,t){P(new R("default:"+e,e)),P(new R(e,e,t))}M("type",{description:"Type",args:[{name:"args",schema:{type:"object",required:["text"],properties:{text:{type:"string"}}}}]}),M("replacePreviousChar"),M("compositionType"),M("compositionStart"),M("compositionEnd"),M("paste"),M("cut")},66638:(e,t,i)=>{i(12596)},58574:(e,t,i)=>{i.d(t,{$z:()=>m,BA:()=>C,DW:()=>v,Hh:()=>d,dO:()=>_,i_:()=>g,nz:()=>l,wt:()=>p});var o=i(14333),r=i(10176),s=i(9715),n=i(65958),a=i(10998),c=i(40061);class l{constructor(e,t){this.x=e,this.y=t,this._pageCoordinatesBrand=void 0}toClientCoordinates(e){return new d(this.x-e.scrollX,this.y-e.scrollY)}}class d{constructor(e,t){this.clientX=e,this.clientY=t,this._clientCoordinatesBrand=void 0}toPageCoordinates(e){return new l(this.clientX+e.scrollX,this.clientY+e.scrollY)}}class h{constructor(e,t,i,o){this.x=e,this.y=t,this.width=i,this.height=o,this._editorPagePositionBrand=void 0}}class u{constructor(e,t){this.x=e,this.y=t,this._positionRelativeToEditorBrand=void 0}}function p(e){const t=o.BK(e);return new h(t.left,t.top,t.width,t.height)}function g(e,t,i){const o=t.width/e.offsetWidth,r=t.height/e.offsetHeight,s=(i.x-t.x)/o,n=(i.y-t.y)/r;return new u(s,n)}class _ extends s.P{constructor(e,t,i){super(o.zk(i),e),this._editorMouseEventBrand=void 0,this.isFromPointerCapture=t,this.pos=new l(this.posx,this.posy),this.editorPos=p(i),this.relativePos=g(i,this.editorPos,this.pos)}}class m{constructor(e){this._editorViewDomNode=e}_create(e){return new _(e,!1,this._editorViewDomNode)}onContextMenu(e,t){return o.ko(e,"contextmenu",(e=>{t(this._create(e))}))}onMouseUp(e,t){return o.ko(e,"mouseup",(e=>{t(this._create(e))}))}onMouseDown(e,t){return o.ko(e,o.Bx.MOUSE_DOWN,(e=>{t(this._create(e))}))}onPointerDown(e,t){return o.ko(e,o.Bx.POINTER_DOWN,(e=>{t(this._create(e),e.pointerId)}))}onMouseLeave(e,t){return o.ko(e,o.Bx.MOUSE_LEAVE,(e=>{t(this._create(e))}))}onMouseMove(e,t){return o.ko(e,"mousemove",(e=>t(this._create(e))))}}class v{constructor(e){this._editorViewDomNode=e}_create(e){return new _(e,!1,this._editorViewDomNode)}onPointerUp(e,t){return o.ko(e,"pointerup",(e=>{t(this._create(e))}))}onPointerDown(e,t){return o.ko(e,o.Bx.POINTER_DOWN,(e=>{t(this._create(e),e.pointerId)}))}onPointerLeave(e,t){return o.ko(e,o.Bx.POINTER_LEAVE,(e=>{t(this._create(e))}))}onPointerMove(e,t){return o.ko(e,"pointermove",(e=>t(this._create(e))))}}class C extends a.jG{constructor(e){super(),this._editorViewDomNode=e,this._globalPointerMoveMonitor=this._register(new r._),this._keydownListener=null}startMonitoring(e,t,i,r,s){this._keydownListener=o.b2(e.ownerDocument,"keydown",(e=>{e.toKeyCodeChord().isModifierKey()||this._globalPointerMoveMonitor.stopMonitoring(!0,e.browserEvent)}),!0),this._globalPointerMoveMonitor.startMonitoring(e,t,i,(e=>{r(new _(e,!0,this._editorViewDomNode))}),(e=>{this._keydownListener.dispose(),s(e)}))}stopMonitoring(){this._globalPointerMoveMonitor.stopMonitoring(!0)}}class f{static{this._idPool=0}constructor(e){this._editor=e,this._instanceId=++f._idPool,this._counter=0,this._rules=new Map,this._garbageCollectionScheduler=new n.uC((()=>this.garbageCollect()),1e3)}createClassNameRef(e){const t=this.getOrCreateRule(e);return t.increaseRefCount(),{className:t.className,dispose:()=>{t.decreaseRefCount(),this._garbageCollectionScheduler.schedule()}}}getOrCreateRule(e){const t=this.computeUniqueKey(e);let i=this._rules.get(t);if(!i){const r=this._counter++;i=new S(t,`dyn-rule-${this._instanceId}-${r}`,o.Cl(this._editor.getContainerDomNode())?this._editor.getContainerDomNode():void 0,e),this._rules.set(t,i)}return i}computeUniqueKey(e){return JSON.stringify(e)}garbageCollect(){for(const e of this._rules.values())e.hasReferences()||(this._rules.delete(e.key),e.dispose())}}class S{constructor(e,t,i,r){this.key=e,this.className=t,this.properties=r,this._referenceCount=0,this._styleElementDisposables=new a.Cm,this._styleElement=o.li(i,void 0,this._styleElementDisposables),this._styleElement.textContent=this.getCssText(this.className,this.properties)}getCssText(e,t){let i=`.${e} {`;for(const e in t){const o=t[e];let r;r="object"==typeof o?(0,c.GuP)(o.id):o,i+=`\n\t${w(e)}: ${r};`}return i+="\n}",i}dispose(){this._styleElementDisposables.dispose(),this._styleElement=void 0}increaseRefCount(){this._referenceCount++}decreaseRefCount(){this._referenceCount--}hasReferences(){return this._referenceCount>0}}function w(e){return e.replace(/(^[A-Z])/,(([e])=>e.toLowerCase())).replace(/([A-Z])/g,(([e])=>`-${e.toLowerCase()}`))}},50946:(e,t,i)=>{i.d(t,{DX:()=>m,E_:()=>v,HW:()=>C,aU:()=>w,dS:()=>o,ih:()=>x,tc:()=>y,uB:()=>p});var o,r=i(19746),s=(i(37264),i(87301)),n=(i(64830),i(37042),i(58067)),a=i(59715),c=i(31540),l=(i(82399),i(48421)),d=i(67167),h=(i(76243),i(46441)),u=i(14333);class p{constructor(e){this.id=e.id,this.precondition=e.precondition,this._kbOpts=e.kbOpts,this._menuOpts=e.menuOpts,this.metadata=e.metadata}register(){if(Array.isArray(this._menuOpts)?this._menuOpts.forEach(this._registerMenuItem,this):this._menuOpts&&this._registerMenuItem(this._menuOpts),this._kbOpts){const e=Array.isArray(this._kbOpts)?this._kbOpts:[this._kbOpts];for(const t of e){let e=t.kbExpr;this.precondition&&(e=e?c.M$.and(e,this.precondition):this.precondition);const i={id:this.id,weight:t.weight,args:t.args,when:e,primary:t.primary,secondary:t.secondary,win:t.win,linux:t.linux,mac:t.mac};l.f.registerKeybindingRule(i)}}a.w.registerCommand({id:this.id,handler:(e,t)=>this.runCommand(e,t),metadata:this.metadata})}_registerMenuItem(e){n.ZG.appendMenuItem(e.menuId,{group:e.group,command:{id:this.id,title:e.title,icon:e.icon,precondition:this.precondition},when:e.when,order:e.order})}}class g extends p{constructor(){super(...arguments),this._implementations=[]}addImplementation(e,t,i,o){return this._implementations.push({priority:e,name:t,implementation:i,when:o}),this._implementations.sort(((e,t)=>t.priority-e.priority)),{dispose:()=>{for(let e=0;e<this._implementations.length;e++)if(this._implementations[e].implementation===i)return void this._implementations.splice(e,1)}}}runCommand(e,t){const i=e.get(h.rr),o=e.get(c.fN);i.trace(`Executing Command '${this.id}' which has ${this._implementations.length} bound.`);for(const r of this._implementations){if(r.when){const e=o.getContext((0,u.bq)());if(!r.when.evaluate(e))continue}const s=r.implementation(e,t);if(s){if(i.trace(`Command '${this.id}' was handled by '${r.name}'.`),"boolean"==typeof s)return;return s}}i.trace(`The Command '${this.id}' was not handled by any implementation.`)}}class _ extends p{constructor(e,t){super(t),this.command=e}runCommand(e,t){return this.command.runCommand(e,t)}}class m extends p{static bindToContribution(e){return class extends m{constructor(e){super(e),this._callback=e.handler}runEditorCommand(t,i,o){const r=e(i);r&&this._callback(r,o)}}}static runEditorCommand(e,t,i,o){const r=e.get(s.T),n=r.getFocusedCodeEditor()||r.getActiveCodeEditor();if(n)return n.invokeWithinContext((e=>{if(e.get(c.fN).contextMatchesRules(i??void 0))return o(e,n,t)}))}runCommand(e,t){return m.runEditorCommand(e,t,this.precondition,((e,t,i)=>this.runEditorCommand(e,t,i)))}}function v(e){return f.INSTANCE.registerEditorCommand(e),e}function C(e,t,i){f.INSTANCE.registerEditorContribution(e,t,i)}!function(e){e.getEditorCommand=function(e){return f.INSTANCE.getEditorCommand(e)},e.getEditorActions=function(){return f.INSTANCE.getEditorActions()},e.getEditorContributions=function(){return f.INSTANCE.getEditorContributions()},e.getSomeEditorContributions=function(e){return f.INSTANCE.getEditorContributions().filter((t=>e.indexOf(t.id)>=0))},e.getDiffEditorContributions=function(){return f.INSTANCE.getDiffEditorContributions()}}(o||(o={}));class f{static{this.INSTANCE=new f}constructor(){this.editorContributions=[],this.diffEditorContributions=[],this.editorActions=[],this.editorCommands=Object.create(null)}registerEditorContribution(e,t,i){this.editorContributions.push({id:e,ctor:t,instantiation:i})}getEditorContributions(){return this.editorContributions.slice(0)}getDiffEditorContributions(){return this.diffEditorContributions.slice(0)}registerEditorAction(e){e.register(),this.editorActions.push(e)}getEditorActions(){return this.editorActions}registerEditorCommand(e){e.register(),this.editorCommands[e.id]=e}getEditorCommand(e){return this.editorCommands[e]||null}}function S(e){return e.register(),e}d.O.add("editor.contributions",f.INSTANCE);const w=S(new g({id:"undo",precondition:void 0,kbOpts:{weight:0,primary:2104},menuOpts:[{menuId:n.D8.MenubarEditMenu,group:"1_do",title:r.kg({key:"miUndo",comment:["&& denotes a mnemonic"]},"&&Undo"),order:1},{menuId:n.D8.CommandPalette,group:"",title:r.kg("undo","Undo"),order:1}]}));S(new _(w,{id:"default:undo",precondition:void 0}));const x=S(new g({id:"redo",precondition:void 0,kbOpts:{weight:0,primary:2103,secondary:[3128],mac:{primary:3128}},menuOpts:[{menuId:n.D8.MenubarEditMenu,group:"1_do",title:r.kg({key:"miRedo",comment:["&& denotes a mnemonic"]},"&&Redo"),order:2},{menuId:n.D8.CommandPalette,group:"",title:r.kg("redo","Redo"),order:1}]}));S(new _(x,{id:"default:redo",precondition:void 0}));const y=S(new g({id:"editor.action.selectAll",precondition:void 0,kbOpts:{weight:0,kbExpr:null,primary:2079},menuOpts:[{menuId:n.D8.MenubarSelectionMenu,group:"1_basic",title:r.kg({key:"miSelectAll",comment:["&& denotes a mnemonic"]},"&&Select All"),order:1},{menuId:n.D8.CommandPalette,group:"",title:r.kg("selectAll","Select All"),order:1}]}))},61988:(e,t,i)=>{i.d(t,{Ud:()=>l});var o=i(8897),r=i(10998),s=i(16311),n=i(34442),a=i(18366),c=i(93702);function l(e){return d.get(e)}class d extends r.jG{static{this._map=new Map}static get(e){let t=d._map.get(e);if(!t){t=new d(e),d._map.set(e,t);const i=e.onDidDispose((()=>{const t=d._map.get(e);t&&(d._map.delete(e),t.dispose(),i.dispose())}))}return t}_beginUpdate(){this._updateCounter++,1===this._updateCounter&&(this._currentTransaction=new n.XL((()=>{})))}_endUpdate(){if(this._updateCounter--,0===this._updateCounter){const e=this._currentTransaction;this._currentTransaction=void 0,e.finish()}}constructor(e){super(),this.editor=e,this._updateCounter=0,this._currentTransaction=void 0,this._model=(0,s.FY)(this,this.editor.getModel()),this.model=this._model,this.isReadonly=(0,s.y0)(this,this.editor.onDidChangeConfiguration,(()=>this.editor.getOption(92))),this._versionId=(0,s.Zh)({owner:this,lazy:!0},this.editor.getModel()?.getVersionId()??null),this.versionId=this._versionId,this._selections=(0,s.Zh)({owner:this,equalsFn:(0,o.KC)((0,o.S3)(c.L.selectionsEqual)),lazy:!0},this.editor.getSelections()??null),this.selections=this._selections,this.isFocused=(0,s.y0)(this,(e=>{const t=this.editor.onDidFocusEditorWidget(e),i=this.editor.onDidBlurEditorWidget(e);return{dispose(){t.dispose(),i.dispose()}}}),(()=>this.editor.hasWidgetFocus())),this.value=(0,a.dQ)(this,(e=>(this.versionId.read(e),this.model.read(e)?.getValue()??"")),((e,t)=>{const i=this.model.get();null!==i&&e!==i.getValue()&&i.setValue(e)})),this.valueIsEmpty=(0,s.un)(this,(e=>(this.versionId.read(e),0===this.editor.getModel()?.getValueLength()))),this.cursorSelection=(0,s.C)({owner:this,equalsFn:(0,o.KC)(c.L.selectionsEqual)},(e=>this.selections.read(e)?.[0]??null)),this.onDidType=(0,s.Yd)(this),this.scrollTop=(0,s.y0)(this.editor.onDidScrollChange,(()=>this.editor.getScrollTop())),this.scrollLeft=(0,s.y0)(this.editor.onDidScrollChange,(()=>this.editor.getScrollLeft())),this.layoutInfo=(0,s.y0)(this.editor.onDidLayoutChange,(()=>this.editor.getLayoutInfo())),this.layoutInfoContentLeft=this.layoutInfo.map((e=>e.contentLeft)),this.layoutInfoDecorationsLeft=this.layoutInfo.map((e=>e.decorationsLeft)),this.contentWidth=(0,s.y0)(this.editor.onDidContentSizeChange,(()=>this.editor.getContentWidth())),this._overlayWidgetCounter=0,this._register(this.editor.onBeginUpdate((()=>this._beginUpdate()))),this._register(this.editor.onEndUpdate((()=>this._endUpdate()))),this._register(this.editor.onDidChangeModel((()=>{this._beginUpdate();try{this._model.set(this.editor.getModel(),this._currentTransaction),this._forceUpdate()}finally{this._endUpdate()}}))),this._register(this.editor.onDidType((e=>{this._beginUpdate();try{this._forceUpdate(),this.onDidType.trigger(this._currentTransaction,e)}finally{this._endUpdate()}}))),this._register(this.editor.onDidChangeModelContent((e=>{this._beginUpdate();try{this._versionId.set(this.editor.getModel()?.getVersionId()??null,this._currentTransaction,e),this._forceUpdate()}finally{this._endUpdate()}}))),this._register(this.editor.onDidChangeCursorSelection((e=>{this._beginUpdate();try{this._selections.set(this.editor.getSelections(),this._currentTransaction,e),this._forceUpdate()}finally{this._endUpdate()}})))}forceUpdate(e){this._beginUpdate();try{if(this._forceUpdate(),!e)return;return e(this._currentTransaction)}finally{this._endUpdate()}}_forceUpdate(){this._beginUpdate();try{this._model.set(this.editor.getModel(),this._currentTransaction),this._versionId.set(this.editor.getModel()?.getVersionId()??null,this._currentTransaction,void 0),this._selections.set(this.editor.getSelections(),this._currentTransaction,void 0)}finally{this._endUpdate()}}getOption(e){return(0,s.y0)(this,(t=>this.editor.onDidChangeConfiguration((i=>{i.hasChanged(e)&&t(void 0)}))),(()=>this.editor.getOption(e)))}setDecorations(e){const t=new r.Cm,i=this.editor.createDecorationsCollection();return t.add((0,s.zL)({owner:this,debugName:()=>`Apply decorations from ${e.debugName}`},(t=>{const o=e.read(t);i.set(o)}))),t.add({dispose:()=>{i.clear()}}),t}createOverlayWidget(e){const t="observableOverlayWidget"+this._overlayWidgetCounter++,i={getDomNode:()=>e.domNode,getPosition:()=>e.position.get(),getId:()=>t,allowEditorOverflow:e.allowEditorOverflow,getMinContentWidthInPx:()=>e.minContentWidthInPx.get()};this.editor.addOverlayWidget(i);const o=(0,s.fm)((t=>{e.position.read(t),e.minContentWidthInPx.read(t),this.editor.layoutOverlayWidget(i)}));return(0,r.s)((()=>{o.dispose(),this.editor.removeOverlayWidget(i)}))}}},48771:(e,t,i)=>{i.d(t,{C:()=>a});var o=i(2106),r=i(10998),s=i(85525),n=i(89044);let a=class extends r.jG{constructor(e){super(),this._themeService=e,this._onWillCreateCodeEditor=this._register(new o.vl),this._onCodeEditorAdd=this._register(new o.vl),this.onCodeEditorAdd=this._onCodeEditorAdd.event,this._onCodeEditorRemove=this._register(new o.vl),this.onCodeEditorRemove=this._onCodeEditorRemove.event,this._onWillCreateDiffEditor=this._register(new o.vl),this._onDiffEditorAdd=this._register(new o.vl),this.onDiffEditorAdd=this._onDiffEditorAdd.event,this._onDiffEditorRemove=this._register(new o.vl),this.onDiffEditorRemove=this._onDiffEditorRemove.event,this._decorationOptionProviders=new Map,this._codeEditorOpenHandlers=new s.w,this._modelProperties=new Map,this._codeEditors=Object.create(null),this._diffEditors=Object.create(null),this._globalStyleSheet=null}willCreateCodeEditor(){this._onWillCreateCodeEditor.fire()}addCodeEditor(e){this._codeEditors[e.getId()]=e,this._onCodeEditorAdd.fire(e)}removeCodeEditor(e){delete this._codeEditors[e.getId()]&&this._onCodeEditorRemove.fire(e)}listCodeEditors(){return Object.keys(this._codeEditors).map((e=>this._codeEditors[e]))}willCreateDiffEditor(){this._onWillCreateDiffEditor.fire()}addDiffEditor(e){this._diffEditors[e.getId()]=e,this._onDiffEditorAdd.fire(e)}listDiffEditors(){return Object.keys(this._diffEditors).map((e=>this._diffEditors[e]))}getFocusedCodeEditor(){let e=null;const t=this.listCodeEditors();for(const i of t){if(i.hasTextFocus())return i;i.hasWidgetFocus()&&(e=i)}return e}removeDecorationType(e){const t=this._decorationOptionProviders.get(e);t&&(t.refCount--,t.refCount<=0&&(this._decorationOptionProviders.delete(e),t.dispose(),this.listCodeEditors().forEach((t=>t.removeDecorationsByType(e)))))}setModelProperty(e,t,i){const o=e.toString();let r;this._modelProperties.has(o)?r=this._modelProperties.get(o):(r=new Map,this._modelProperties.set(o,r)),r.set(t,i)}getModelProperty(e,t){const i=e.toString();if(this._modelProperties.has(i))return this._modelProperties.get(i).get(t)}async openCodeEditor(e,t,i){for(const o of this._codeEditorOpenHandlers){const r=await o(e,t,i);if(null!==r)return r}return null}registerCodeEditorOpenHandler(e){const t=this._codeEditorOpenHandlers.unshift(e);return(0,r.s)(t)}};var c,l;a=function(e,t,i,o){var r,s=arguments.length,n=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(n=(s<3?r(n):s>3?r(t,i,n):r(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n}([(c=0,l=n.Gy,function(e,t){l(e,t,c)})],a)},98769:(e,t,i)=>{i.d(t,{cw:()=>c,jN:()=>a,nu:()=>n});var o=i(82399),r=i(37264),s=i(79359);const n=(0,o.u1)("IWorkspaceEditService");class a{constructor(e){this.metadata=e}static convert(e){return e.edits.map((e=>{if(c.is(e))return c.lift(e);if(l.is(e))return l.lift(e);throw new Error("Unsupported edit")}))}}class c extends a{static is(e){return e instanceof c||(0,s.Gv)(e)&&r.r.isUri(e.resource)&&(0,s.Gv)(e.textEdit)}static lift(e){return e instanceof c?e:new c(e.resource,e.textEdit,e.versionId,e.metadata)}constructor(e,t,i=void 0,o){super(o),this.resource=e,this.textEdit=t,this.versionId=i}}class l extends a{static is(e){return e instanceof l||(0,s.Gv)(e)&&(Boolean(e.newResource)||Boolean(e.oldResource))}static lift(e){return e instanceof l?e:new l(e.oldResource,e.newResource,e.options,e.metadata)}constructor(e,t,i={},o){super(o),this.oldResource=e,this.newResource=t,this.options=i}}},87301:(e,t,i)=>{i.d(t,{T:()=>o});const o=(0,i(82399).u1)("codeEditorService")},88700:(e,t,i)=>{i.d(t,{B:()=>A,Z:()=>M});var o=i(65958),r=i(10998),s=i(45585),n=i(65210),a=i(28061),c=i(52394),l=i(93034),d=i(64830),h=i(41504),u=i(13338),p=i(46441),g=i(23013),_=i(94327),m=i(52230),v=i(23837),C=i(39331),f=i(79955),S=i(48877),w=i(14333),x=i(55526),y=i(96358),b=function(e,t,i,o){var r,s=arguments.length,n=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(n=(s<3?r(n):s>3?r(t,i,n):r(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n},E=function(e,t){return function(i,o){t(i,o,e)}};function k(e,t){const i=e.getModel(t);return!!i&&!i.isTooLargeForSyncing()}let A=class extends r.jG{constructor(e,t,i,o,r,s){super(),this._languageConfigurationService=r,this._modelService=t,this._workerManager=this._register(new T(e,this._modelService)),this._logService=o,this._register(s.linkProvider.register({language:"*",hasAccessToAllModels:!0},{provideLinks:async(e,t)=>{if(!k(this._modelService,e.uri))return Promise.resolve({links:[]});const i=await this._workerWithResources([e.uri]),o=await i.$computeLinks(e.uri.toString());return o&&{links:o}}})),this._register(s.completionProvider.register("*",new P(this._workerManager,i,this._modelService,this._languageConfigurationService)))}dispose(){super.dispose()}canComputeUnicodeHighlights(e){return k(this._modelService,e)}async computedUnicodeHighlights(e,t,i){return(await this._workerWithResources([e])).$computeUnicodeHighlights(e.toString(),t,i)}async computeDiff(e,t,i,o){const r=await this._workerWithResources([e,t],!0),s=await r.$computeDiff(e.toString(),t.toString(),i,o);return s?{identical:s.identical,quitEarly:s.quitEarly,changes:n(s.changes),moves:s.moves.map((e=>new v.t(new C.WL(new f.M(e[0],e[1]),new f.M(e[2],e[3])),n(e[4]))))}:null;function n(e){return e.map((e=>new C.wm(new f.M(e[0],e[1]),new f.M(e[2],e[3]),e[4]?.map((e=>new C.q6(new a.Q(e[0],e[1],e[2],e[3]),new a.Q(e[4],e[5],e[6],e[7])))))))}}async computeMoreMinimalEdits(e,t,i=!1){if((0,u.EI)(t)){if(!k(this._modelService,e))return Promise.resolve(t);const r=g.W.create(),s=this._workerWithResources([e]).then((o=>o.$computeMoreMinimalEdits(e.toString(),t,i)));return s.finally((()=>this._logService.trace("FORMAT#computeMoreMinimalEdits",e.toString(!0),r.elapsed()))),Promise.race([s,(0,o.wR)(1e3).then((()=>t))])}return Promise.resolve(void 0)}canNavigateValueSet(e){return k(this._modelService,e)}async navigateValueSet(e,t,i){const o=this._modelService.getModel(e);if(!o)return null;const r=this._languageConfigurationService.getLanguageConfiguration(o.getLanguageId()).getWordDefinition(),s=r.source,n=r.flags;return(await this._workerWithResources([e])).$navigateValueSet(e.toString(),t,i,s,n)}canComputeWordRanges(e){return k(this._modelService,e)}async computeWordRanges(e,t){const i=this._modelService.getModel(e);if(!i)return Promise.resolve(null);const o=this._languageConfigurationService.getLanguageConfiguration(i.getLanguageId()).getWordDefinition(),r=o.source,s=o.flags;return(await this._workerWithResources([e])).$computeWordRanges(e.toString(),t,r,s)}async findSectionHeaders(e,t){return(await this._workerWithResources([e])).$findSectionHeaders(e.toString(),t)}async computeDefaultDocumentColors(e){return(await this._workerWithResources([e])).$computeDefaultDocumentColors(e.toString())}async _workerWithResources(e,t=!1){const i=await this._workerManager.withWorker();return await i.workerWithSyncedResources(e,t)}};A=b([E(1,d.IModelService),E(2,h.ITextResourceConfigurationService),E(3,p.rr),E(4,c.JZ),E(5,m.ILanguageFeaturesService)],A);class P{constructor(e,t,i,o){this.languageConfigurationService=o,this._debugDisplayName="wordbasedCompletions",this._workerManager=e,this._configurationService=t,this._modelService=i}async provideCompletionItems(e,t){const i=this._configurationService.getValue(e.uri,t,"editor");if("off"===i.wordBasedSuggestions)return;const o=[];if("currentDocument"===i.wordBasedSuggestions)k(this._modelService,e.uri)&&o.push(e.uri);else for(const t of this._modelService.getModels())k(this._modelService,t.uri)&&(t===e?o.unshift(t.uri):"allDocuments"!==i.wordBasedSuggestions&&t.getLanguageId()!==e.getLanguageId()||o.push(t.uri));if(0===o.length)return;const r=this.languageConfigurationService.getLanguageConfiguration(e.getLanguageId()).getWordDefinition(),s=e.getWordAtPosition(t),n=s?new a.Q(t.lineNumber,s.startColumn,t.lineNumber,s.endColumn):a.Q.fromPositions(t),c=n.setEndPosition(t.lineNumber,t.column),l=await this._workerManager.withWorker(),d=await l.textualSuggest(o,s?.word,r);return d?{duration:d.duration,suggestions:d.words.map((e=>({kind:18,label:e,insertText:e,range:{insert:c,replace:n}})))}:void 0}}let T=class extends r.jG{constructor(e,t){super(),this._workerDescriptor=e,this._modelService=t,this._editorWorkerClient=null,this._lastWorkerUsedTime=(new Date).getTime(),this._register(new w.Be).cancelAndSet((()=>this._checkStopIdleWorker()),Math.round(15e4),S.G),this._register(this._modelService.onModelRemoved((e=>this._checkStopEmptyWorker())))}dispose(){this._editorWorkerClient&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null),super.dispose()}_checkStopEmptyWorker(){this._editorWorkerClient&&0===this._modelService.getModels().length&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null)}_checkStopIdleWorker(){this._editorWorkerClient&&(new Date).getTime()-this._lastWorkerUsedTime>3e5&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null)}withWorker(){return this._lastWorkerUsedTime=(new Date).getTime(),this._editorWorkerClient||(this._editorWorkerClient=new M(this._workerDescriptor,!1,this._modelService)),Promise.resolve(this._editorWorkerClient)}};T=b([E(1,d.IModelService)],T);class R{constructor(e){this._instance=e,this.proxy=this._instance}dispose(){this._instance.dispose()}setChannel(e,t){throw new Error("Not supported")}}let M=class extends r.jG{constructor(e,t,i){super(),this._workerDescriptor=e,this._disposed=!1,this._modelService=i,this._keepIdleModels=t,this._worker=null,this._modelManager=null}fhr(e,t){throw new Error("Not implemented!")}_getOrCreateWorker(){if(!this._worker)try{this._worker=this._register((0,n.V)(this._workerDescriptor)),y.EditorWorkerHost.setChannel(this._worker,this._createEditorWorkerHost())}catch(e){(0,s.logOnceWebWorkerWarning)(e),this._worker=this._createFallbackLocalWorker()}return this._worker}async _getProxy(){try{const e=this._getOrCreateWorker().proxy;return await e.$ping(),e}catch(e){return(0,s.logOnceWebWorkerWarning)(e),this._worker=this._createFallbackLocalWorker(),this._worker.proxy}}_createFallbackLocalWorker(){return new R(new l.EditorSimpleWorker(this._createEditorWorkerHost(),null))}_createEditorWorkerHost(){return{$fhr:(e,t)=>this.fhr(e,t)}}_getOrCreateModelManager(e){return this._modelManager||(this._modelManager=this._register(new x.WorkerTextModelSyncClient(e,this._modelService,this._keepIdleModels))),this._modelManager}async workerWithSyncedResources(e,t=!1){if(this._disposed)return Promise.reject((0,_.aD)());const i=await this._getProxy();return this._getOrCreateModelManager(i).ensureSyncedResources(e,t),i}async textualSuggest(e,t,i){const o=await this.workerWithSyncedResources(e),r=i.source,s=i.flags;return o.$textualSuggest(e.map((e=>e.toString())),t,r,s)}dispose(){super.dispose(),this._disposed=!0}};M=b([E(2,d.IModelService)],M)},86781:(e,t,i)=>{var o=i(66726),r=i(89044),s=i(40061),n=i(90428),a=i(52348),c=i(82399),l=i(10998),d=i(2106),h=i(14333),u=i(56071),p=i(85753),g=i(66476),_=i(19179),m=i(45222),v=i(54435),C=i(73550),f=i(90028),S=i(19746),w=i(63339),x=i(53909),y=i(59407),b=function(e,t){return function(i,o){t(i,o,e)}};const E=h.$;let k=class extends m.x{get _targetWindow(){return h.zk(this._target.targetElements[0])}get _targetDocumentElement(){return h.zk(this._target.targetElements[0]).document.documentElement}get isDisposed(){return this._isDisposed}get isMouseIn(){return this._lockMouseTracker.isMouseIn}get domNode(){return this._hover.containerDomNode}get onDispose(){return this._onDispose.event}get onRequestLayout(){return this._onRequestLayout.event}get anchor(){return 2===this._hoverPosition?0:1}get x(){return this._x}get y(){return this._y}get isLocked(){return this._isLocked}set isLocked(e){this._isLocked!==e&&(this._isLocked=e,this._hoverContainer.classList.toggle("locked",this._isLocked))}constructor(e,t,i,o,r,s){super(),this._keybindingService=t,this._configurationService=i,this._openerService=o,this._instantiationService=r,this._accessibilityService=s,this._messageListeners=new l.Cm,this._isDisposed=!1,this._forcePosition=!1,this._x=0,this._y=0,this._isLocked=!1,this._enableFocusTraps=!1,this._addedFocusTrap=!1,this._onDispose=this._register(new d.vl),this._onRequestLayout=this._register(new d.vl),this._linkHandler=e.linkHandler||(t=>(0,C.i)(this._openerService,t,(0,f.VS)(e.content)?e.content.isTrusted:void 0)),this._target="targetElements"in e.target?e.target:new P(e.target),this._hoverPointer=e.appearance?.showPointer?E("div.workbench-hover-pointer"):void 0,this._hover=this._register(new _.N4),this._hover.containerDomNode.classList.add("workbench-hover","fadeIn"),e.appearance?.compact&&this._hover.containerDomNode.classList.add("workbench-hover","compact"),e.appearance?.skipFadeInAnimation&&this._hover.containerDomNode.classList.add("skip-fade-in"),e.additionalClasses&&this._hover.containerDomNode.classList.add(...e.additionalClasses),e.position?.forcePosition&&(this._forcePosition=!0),e.trapFocus&&(this._enableFocusTraps=!0),this._hoverPosition=e.position?.hoverPosition??3,this.onmousedown(this._hover.containerDomNode,(e=>e.stopPropagation())),this.onkeydown(this._hover.containerDomNode,(e=>{e.equals(9)&&this.dispose()})),this._register(h.ko(this._targetWindow,"blur",(()=>this.dispose())));const n=E("div.hover-row.markdown-hover"),a=E("div.hover-contents");if("string"==typeof e.content)a.textContent=e.content,a.style.whiteSpace="pre-wrap";else if(h.sb(e.content))a.appendChild(e.content),a.classList.add("html-hover-contents");else{const t=e.content,i=this._instantiationService.createInstance(C.T,{codeBlockFontFamily:this._configurationService.getValue("editor").fontFamily||g.jU.fontFamily}),{element:o}=i.render(t,{actionHandler:{callback:e=>this._linkHandler(e),disposables:this._messageListeners},asyncRenderCallback:()=>{a.classList.add("code-hover-contents"),this.layout(),this._onRequestLayout.fire()}});a.appendChild(o)}if(n.appendChild(a),this._hover.contentsDomNode.appendChild(n),e.actions&&e.actions.length>0){const t=E("div.hover-row.status-bar"),i=E("div.actions");e.actions.forEach((e=>{const t=this._keybindingService.lookupKeybinding(e.commandId),o=t?t.getLabel():null;_.jQ.render(i,{label:e.label,commandId:e.commandId,run:t=>{e.run(t),this.dispose()},iconClass:e.iconClass},o)})),t.appendChild(i),this._hover.containerDomNode.appendChild(t)}let c;if(this._hoverContainer=E("div.workbench-hover-container"),this._hoverPointer&&this._hoverContainer.appendChild(this._hoverPointer),this._hoverContainer.appendChild(this._hover.containerDomNode),c=!(e.actions&&e.actions.length>0)&&(void 0===e.persistence?.hideOnHover?"string"==typeof e.content||(0,f.VS)(e.content)&&!e.content.value.includes("](")&&!e.content.value.includes("</a>"):e.persistence.hideOnHover),e.appearance?.showHoverHint){const e=E("div.hover-row.status-bar"),t=E("div.info");t.textContent=(0,S.kg)("hoverhint","Hold {0} key to mouse over",w.zx?"Option":"Alt"),e.appendChild(t),this._hover.containerDomNode.appendChild(e)}const u=[...this._target.targetElements];c||u.push(this._hoverContainer);const p=this._register(new A(u));if(this._register(p.onMouseOut((()=>{this._isLocked||this.dispose()}))),c){const e=[...this._target.targetElements,this._hoverContainer];this._lockMouseTracker=this._register(new A(e)),this._register(this._lockMouseTracker.onMouseOut((()=>{this._isLocked||this.dispose()})))}else this._lockMouseTracker=p}addFocusTrap(){if(!this._enableFocusTraps||this._addedFocusTrap)return;this._addedFocusTrap=!0;const e=this._hover.containerDomNode,t=this.findLastFocusableChild(this._hover.containerDomNode);if(t){const i=h.Hs(this._hoverContainer,E("div")),o=h.BC(this._hoverContainer,E("div"));i.tabIndex=0,o.tabIndex=0,this._register(h.ko(o,"focus",(t=>{e.focus(),t.preventDefault()}))),this._register(h.ko(i,"focus",(e=>{t.focus(),e.preventDefault()})))}}findLastFocusableChild(e){if(e.hasChildNodes())for(let t=0;t<e.childNodes.length;t++){const i=e.childNodes.item(e.childNodes.length-t-1);if(i.nodeType===i.ELEMENT_NODE){const e=i;if("number"==typeof e.tabIndex&&e.tabIndex>=0)return e}const o=this.findLastFocusableChild(i);if(o)return o}}render(e){e.appendChild(this._hoverContainer);const t=this._hoverContainer.contains(this._hoverContainer.ownerDocument.activeElement)&&(0,_.vr)(!0===this._configurationService.getValue("accessibility.verbosity.hover")&&this._accessibilityService.isScreenReaderOptimized(),this._keybindingService.lookupKeybinding("editor.action.accessibleView")?.getAriaLabel());t&&(0,y.h5)(t),this.layout(),this.addFocusTrap()}layout(){this._hover.containerDomNode.classList.remove("right-aligned"),this._hover.contentsDomNode.style.maxHeight="";const e=this._target.targetElements.map((e=>(e=>{const t=h.mU(e),i=e.getBoundingClientRect();return{top:i.top*t,bottom:i.bottom*t,right:i.right*t,left:i.left*t}})(e))),{top:t,right:i,bottom:o,left:r}=e[0],s=i-r,n=o-t,a={top:t,right:i,bottom:o,left:r,width:s,height:n,center:{x:r+s/2,y:t+n/2}};if(this.adjustHorizontalHoverPosition(a),this.adjustVerticalHoverPosition(a),this.adjustHoverMaxHeight(a),this._hoverContainer.style.padding="",this._hoverContainer.style.margin="",this._hoverPointer){switch(this._hoverPosition){case 1:a.left+=3,a.right+=3,this._hoverContainer.style.paddingLeft="3px",this._hoverContainer.style.marginLeft="-3px";break;case 0:a.left-=3,a.right-=3,this._hoverContainer.style.paddingRight="3px",this._hoverContainer.style.marginRight="-3px";break;case 2:a.top+=3,a.bottom+=3,this._hoverContainer.style.paddingTop="3px",this._hoverContainer.style.marginTop="-3px";break;case 3:a.top-=3,a.bottom-=3,this._hoverContainer.style.paddingBottom="3px",this._hoverContainer.style.marginBottom="-3px"}a.center.x=a.left+s/2,a.center.y=a.top+n/2}this.computeXCordinate(a),this.computeYCordinate(a),this._hoverPointer&&(this._hoverPointer.classList.remove("top"),this._hoverPointer.classList.remove("left"),this._hoverPointer.classList.remove("right"),this._hoverPointer.classList.remove("bottom"),this.setHoverPointerPosition(a)),this._hover.onContentsChanged()}computeXCordinate(e){const t=this._hover.containerDomNode.clientWidth+2;void 0!==this._target.x?this._x=this._target.x:1===this._hoverPosition?this._x=e.right:0===this._hoverPosition?this._x=e.left-t:(this._hoverPointer?this._x=e.center.x-this._hover.containerDomNode.clientWidth/2:this._x=e.left,this._x+t>=this._targetDocumentElement.clientWidth&&(this._hover.containerDomNode.classList.add("right-aligned"),this._x=Math.max(this._targetDocumentElement.clientWidth-t-2,this._targetDocumentElement.clientLeft))),this._x<this._targetDocumentElement.clientLeft&&(this._x=e.left+2)}computeYCordinate(e){void 0!==this._target.y?this._y=this._target.y:3===this._hoverPosition?this._y=e.top:2===this._hoverPosition?this._y=e.bottom-2:this._hoverPointer?this._y=e.center.y+this._hover.containerDomNode.clientHeight/2:this._y=e.bottom,this._y>this._targetWindow.innerHeight&&(this._y=e.bottom)}adjustHorizontalHoverPosition(e){if(void 0!==this._target.x)return;const t=this._hoverPointer?3:0;if(this._forcePosition){const i=t+2;1===this._hoverPosition?this._hover.containerDomNode.style.maxWidth=this._targetDocumentElement.clientWidth-e.right-i+"px":0===this._hoverPosition&&(this._hover.containerDomNode.style.maxWidth=e.left-i+"px")}else 1===this._hoverPosition?this._targetDocumentElement.clientWidth-e.right<this._hover.containerDomNode.clientWidth+t&&(e.left>=this._hover.containerDomNode.clientWidth+t?this._hoverPosition=0:this._hoverPosition=2):0===this._hoverPosition&&(e.left<this._hover.containerDomNode.clientWidth+t&&(this._targetDocumentElement.clientWidth-e.right>=this._hover.containerDomNode.clientWidth+t?this._hoverPosition=1:this._hoverPosition=2),e.left-this._hover.containerDomNode.clientWidth-t<=this._targetDocumentElement.clientLeft&&(this._hoverPosition=1))}adjustVerticalHoverPosition(e){if(void 0!==this._target.y||this._forcePosition)return;const t=this._hoverPointer?3:0;3===this._hoverPosition?e.top-this._hover.containerDomNode.clientHeight-t<0&&(this._hoverPosition=2):2===this._hoverPosition&&e.bottom+this._hover.containerDomNode.clientHeight+t>this._targetWindow.innerHeight&&(this._hoverPosition=3)}adjustHoverMaxHeight(e){let t=this._targetWindow.innerHeight/2;if(this._forcePosition){const i=2+(this._hoverPointer?3:0);3===this._hoverPosition?t=Math.min(t,e.top-i):2===this._hoverPosition&&(t=Math.min(t,this._targetWindow.innerHeight-e.bottom-i))}if(this._hover.containerDomNode.style.maxHeight=`${t}px`,this._hover.contentsDomNode.clientHeight<this._hover.contentsDomNode.scrollHeight){const e=`${this._hover.scrollbar.options.verticalScrollbarSize}px`;this._hover.contentsDomNode.style.paddingRight!==e&&(this._hover.contentsDomNode.style.paddingRight=e)}}setHoverPointerPosition(e){if(this._hoverPointer)switch(this._hoverPosition){case 0:case 1:{this._hoverPointer.classList.add(0===this._hoverPosition?"right":"left");const t=this._hover.containerDomNode.clientHeight;t>e.height?this._hoverPointer.style.top=e.center.y-(this._y-t)-3+"px":this._hoverPointer.style.top=Math.round(t/2)-3+"px";break}case 3:case 2:{this._hoverPointer.classList.add(3===this._hoverPosition?"bottom":"top");const t=this._hover.containerDomNode.clientWidth;let i=Math.round(t/2)-3;const o=this._x+i;(o<e.left||o>e.right)&&(i=e.center.x-this._x-3),this._hoverPointer.style.left=`${i}px`;break}}}focus(){this._hover.containerDomNode.focus()}dispose(){this._isDisposed||(this._onDispose.fire(),this._hoverContainer.remove(),this._messageListeners.dispose(),this._target.dispose(),super.dispose()),this._isDisposed=!0}};k=function(e,t,i,o){var r,s=arguments.length,n=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(n=(s<3?r(n):s>3?r(t,i,n):r(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n}([b(1,u.b),b(2,p.pG),b(3,v.C),b(4,c._Y),b(5,x.j)],k);class A extends m.x{get onMouseOut(){return this._onMouseOut.event}get isMouseIn(){return this._isMouseIn}constructor(e){super(),this._elements=e,this._isMouseIn=!0,this._onMouseOut=this._register(new d.vl),this._elements.forEach((e=>this.onmouseover(e,(()=>this._onTargetMouseOver(e))))),this._elements.forEach((e=>this.onmouseleave(e,(()=>this._onTargetMouseLeave(e)))))}_onTargetMouseOver(e){this._isMouseIn=!0,this._clearEvaluateMouseStateTimeout(e)}_onTargetMouseLeave(e){this._isMouseIn=!1,this._evaluateMouseState(e)}_evaluateMouseState(e){this._clearEvaluateMouseStateTimeout(e),this._mouseTimeout=h.zk(e).setTimeout((()=>this._fireIfMouseOutside()),0)}_clearEvaluateMouseStateTimeout(e){this._mouseTimeout&&(h.zk(e).clearTimeout(this._mouseTimeout),this._mouseTimeout=void 0)}_fireIfMouseOutside(){this._isMouseIn||this._onMouseOut.fire()}}class P{constructor(e){this._element=e,this.targetElements=[this._element]}dispose(){}}var T=i(87594),R=i(16085),M=i(48877),D=i(23445),L=i(78903),O=i(79359);class I{constructor(e,t,i){this.hoverDelegate=e,this.target=t,this.fadeInAnimation=i}async update(e,t,i){if(this._cancellationTokenSource&&(this._cancellationTokenSource.dispose(!0),this._cancellationTokenSource=void 0),this.isDisposed)return;let o;if(void 0===e||(0,O.Kg)(e)||(0,h.sb)(e))o=e;else if((0,O.Tn)(e.markdown)){this._hoverWidget||this.show((0,S.kg)("iconLabel.loading","Loading..."),t,i),this._cancellationTokenSource=new L.Qi;const r=this._cancellationTokenSource.token;if(o=await e.markdown(r),void 0===o&&(o=e.markdownNotSupportedFallback),this.isDisposed||r.isCancellationRequested)return}else o=e.markdown??e.markdownNotSupportedFallback;this.show(o,t,i)}show(e,t,i){const o=this._hoverWidget;if(this.hasContent(e)){const r={content:e,target:this.target,actions:i?.actions,linkHandler:i?.linkHandler,trapFocus:i?.trapFocus,appearance:{showPointer:"element"===this.hoverDelegate.placement,skipFadeInAnimation:!this.fadeInAnimation||!!o,showHoverHint:i?.appearance?.showHoverHint},position:{hoverPosition:2}};this._hoverWidget=this.hoverDelegate.showHover(r,t)}o?.dispose()}hasContent(e){return!(!e||(0,f.VS)(e)&&!e.value)}get isDisposed(){return this._hoverWidget?.isDisposed}dispose(){this._hoverWidget?.dispose(),this._cancellationTokenSource?.dispose(!0),this._cancellationTokenSource=void 0}}var N=i(65958),F=function(e,t){return function(i,o){t(i,o,e)}};let W=class extends l.jG{constructor(e,t,i,o,r){super(),this._instantiationService=e,this._keybindingService=i,this._layoutService=o,this._accessibilityService=r,this._managedHovers=new Map,t.onDidShowContextMenu((()=>this.hideHover())),this._contextViewHandler=this._register(new D.j(this._layoutService))}showHover(e,t,i){if(H(this._currentHoverOptions)===H(e))return;if(this._currentHover&&this._currentHoverOptions?.persistence?.sticky)return;this._currentHoverOptions=e,this._lastHoverOptions=e;const o=e.trapFocus||this._accessibilityService.isScreenReaderOptimized(),r=(0,h.bq)();i||(o&&r?r.classList.contains("monaco-hover")||(this._lastFocusedElementBeforeOpen=r):this._lastFocusedElementBeforeOpen=void 0);const s=new l.Cm,n=this._instantiationService.createInstance(k,e);if(e.persistence?.sticky&&(n.isLocked=!0),n.onDispose((()=>{this._currentHover?.domNode&&(0,h.nR)(this._currentHover.domNode)&&this._lastFocusedElementBeforeOpen?.focus(),this._currentHoverOptions===e&&(this._currentHoverOptions=void 0),s.dispose()}),void 0,s),!e.container){const t=(0,h.sb)(e.target)?e.target:e.target.targetElements[0];e.container=this._layoutService.getContainer((0,h.zk)(t))}if(this._contextViewHandler.showContextView(new U(n,t),e.container),n.onRequestLayout((()=>this._contextViewHandler.layout()),void 0,s),e.persistence?.sticky)s.add((0,h.ko)((0,h.zk)(e.container).document,h.Bx.MOUSE_DOWN,(e=>{(0,h.QX)(e.target,n.domNode)||this.doHideHover()})));else{if("targetElements"in e.target)for(const t of e.target.targetElements)s.add((0,h.ko)(t,h.Bx.CLICK,(()=>this.hideHover())));else s.add((0,h.ko)(e.target,h.Bx.CLICK,(()=>this.hideHover())));const t=(0,h.bq)();if(t){const i=(0,h.zk)(t).document;s.add((0,h.ko)(t,h.Bx.KEY_DOWN,(t=>this._keyDown(t,n,!!e.persistence?.hideOnKeyDown)))),s.add((0,h.ko)(i,h.Bx.KEY_DOWN,(t=>this._keyDown(t,n,!!e.persistence?.hideOnKeyDown)))),s.add((0,h.ko)(t,h.Bx.KEY_UP,(e=>this._keyUp(e,n)))),s.add((0,h.ko)(i,h.Bx.KEY_UP,(e=>this._keyUp(e,n))))}}if("IntersectionObserver"in M.G){const t=new IntersectionObserver((e=>this._intersectionChange(e,n)),{threshold:0}),i="targetElements"in e.target?e.target.targetElements[0]:e.target;t.observe(i),s.add((0,l.s)((()=>t.disconnect())))}return this._currentHover=n,n}hideHover(){!this._currentHover?.isLocked&&this._currentHoverOptions&&this.doHideHover()}doHideHover(){this._currentHover=void 0,this._currentHoverOptions=void 0,this._contextViewHandler.hideContextView()}_intersectionChange(e,t){e[e.length-1].isIntersecting||t.dispose()}showAndFocusLastHover(){this._lastHoverOptions&&this.showHover(this._lastHoverOptions,!0,!0)}_keyDown(e,t,i){if("Alt"===e.key)return void(t.isLocked=!0);const o=new T.Z(e);this._keybindingService.resolveKeyboardEvent(o).getSingleModifierDispatchChords().some((e=>!!e))||0!==this._keybindingService.softDispatch(o,o.target).kind||!i||this._currentHoverOptions?.trapFocus&&"Tab"===e.key||(this.hideHover(),this._lastFocusedElementBeforeOpen?.focus())}_keyUp(e,t){"Alt"===e.key&&(t.isLocked=!1,t.isMouseIn||(this.hideHover(),this._lastFocusedElementBeforeOpen?.focus()))}setupManagedHover(e,t,i,o){let r,s;t.setAttribute("custom-hover","true"),""!==t.title&&(console.warn("HTML element already has a title attribute, which will conflict with the custom hover. Please remove the title attribute."),console.trace("Stack trace:",t.title),t.title="");const n=(t,i)=>{const o=void 0!==s;t&&(s?.dispose(),s=void 0),i&&(r?.dispose(),r=void 0),o&&(e.onDidHideHover?.(),s=void 0)},a=(r,n,a,c)=>new N.pc((async()=>{s&&!s.isDisposed||(s=new I(e,a||t,r>0),await s.update("function"==typeof i?i():i,n,{...o,trapFocus:c}))}),r);let c=!1;const d=(0,h.ko)(t,h.Bx.MOUSE_DOWN,(()=>{c=!0,n(!0,!0)}),!0),u=(0,h.ko)(t,h.Bx.MOUSE_UP,(()=>{c=!1}),!0),p=(0,h.ko)(t,h.Bx.MOUSE_LEAVE,(e=>{c=!1,n(!1,e.fromElement===t)}),!0),g=(0,h.ko)(t,h.Bx.MOUSE_OVER,(i=>{if(r)return;const o=new l.Cm,s={targetElements:[t],dispose:()=>{}};if(void 0===e.placement||"mouse"===e.placement){const e=e=>{s.x=e.x+10,(0,h.sb)(e.target)&&V(e.target,t)!==t&&n(!0,!0)};o.add((0,h.ko)(t,h.Bx.MOUSE_MOVE,e,!0))}r=o,(0,h.sb)(i.target)&&V(i.target,t)!==t||o.add(a(e.delay,!1,s))}),!0);let _;const m=t.tagName.toLowerCase();"input"!==m&&"textarea"!==m&&(_=(0,h.ko)(t,h.Bx.FOCUS,(()=>{if(c||r)return;const i={targetElements:[t],dispose:()=>{}},o=new l.Cm;o.add((0,h.ko)(t,h.Bx.BLUR,(()=>n(!0,!0)),!0)),o.add(a(e.delay,!1,i)),r=o}),!0));const v={show:e=>{n(!1,!0),a(0,e,void 0,e)},hide:()=>{n(!0,!0)},update:async(e,t)=>{i=e,await(s?.update(i,void 0,t))},dispose:()=>{this._managedHovers.delete(t),g.dispose(),p.dispose(),d.dispose(),u.dispose(),_?.dispose(),n(!0,!0)}};return this._managedHovers.set(t,v),v}showManagedHover(e){const t=this._managedHovers.get(e);t&&t.show(!0)}dispose(){this._managedHovers.forEach((e=>e.dispose())),super.dispose()}};function H(e){if(void 0!==e)return e?.id??e}W=function(e,t,i,o){var r,s=arguments.length,n=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(n=(s<3?r(n):s>3?r(t,i,n):r(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n}([F(0,c._Y),F(1,a.Z),F(2,u.b),F(3,R.x),F(4,x.j)],W);class U{get anchorPosition(){return this._hover.anchor}constructor(e,t=!1){this._hover=e,this._focus=t,this.layer=1}render(e){return this._hover.render(e),this._focus&&this._hover.focus(),this._hover}getAnchor(){return{x:this._hover.x,y:this._hover.y}}layout(){this._hover.layout()}}function V(e,t){for(t=t??(0,h.zk)(e).document.body;!e.hasAttribute("custom-hover")&&e!==t;)e=e.parentElement;return e}(0,o.v)(n.TN,W,1),(0,r.zy)(((e,t)=>{const i=e.getColor(s.oZ8);i&&(t.addRule(`.monaco-workbench .workbench-hover .hover-row:not(:first-child):not(:empty) { border-top: 1px solid ${i.transparent(.5)}; }`),t.addRule(`.monaco-workbench .workbench-hover hr { border-top: 1px solid ${i.transparent(.5)}; }`))}))},90711:(e,t,i)=>{var o=i(80886),r=i(50946);let s=class{static{this.ID="editor.contrib.markerDecorations"}constructor(e,t){}dispose(){}};var n,a;s=function(e,t,i,o){var r,s=arguments.length,n=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(n=(s<3?r(n):s>3?r(t,i,n):r(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n}([(n=1,a=o.IMarkerDecorationsService,function(e,t){a(e,t,n)})],s),(0,r.HW)(s.ID,s,0)},73344:(e,t,i)=>{i.d(t,{J:()=>S});var o=i(14333),r=i(48877),s=i(78903),n=i(85525),a=i(27992),c=i(50180),l=i(13072),d=i(22467),h=i(37264),u=i(87301),p=i(59715),g=i(52947),_=i(54435),m=function(e,t,i,o){var r,s=arguments.length,n=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(n=(s<3?r(n):s>3?r(t,i,n):r(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n},v=function(e,t){return function(i,o){t(i,o,e)}};let C=class{constructor(e){this._commandService=e}async open(e,t){if(!(0,l.v$)(e,l.ny.command))return!1;if(!t?.allowCommands)return!0;if("string"==typeof e&&(e=h.r.parse(e)),Array.isArray(t.allowCommands)&&!t.allowCommands.includes(e.path))return!0;let i=[];try{i=(0,c.qg)(decodeURIComponent(e.query))}catch{try{i=(0,c.qg)(e.query)}catch{}}return Array.isArray(i)||(i=[i]),await this._commandService.executeCommand(e.path,...i),!0}};C=m([v(0,p.d)],C);let f=class{constructor(e){this._editorService=e}async open(e,t){"string"==typeof e&&(e=h.r.parse(e));const{selection:i,uri:o}=(0,_.e)(e);return(e=o).scheme===l.ny.file&&(e=(0,d.Fd)(e)),await this._editorService.openCodeEditor({resource:e,options:{selection:i,source:t?.fromUserGesture?g.$.USER:g.$.API,...t?.editorOptions}},this._editorService.getFocusedCodeEditor(),t?.openToSide),!0}};f=m([v(0,u.T)],f);let S=class{constructor(e,t){this._openers=new n.w,this._validators=new n.w,this._resolvers=new n.w,this._resolvedUriTargets=new a.fT((e=>e.with({path:null,fragment:null,query:null}).toString())),this._externalOpeners=new n.w,this._defaultExternalOpener={openExternal:async e=>((0,l.fV)(e,l.ny.http,l.ny.https)?o.CE(e):r.G.location.href=e,!0)},this._openers.push({open:async(e,t)=>!(!t?.openExternal&&!(0,l.fV)(e,l.ny.mailto,l.ny.http,l.ny.https,l.ny.vsls)||(await this._doOpenExternal(e,t),0))}),this._openers.push(new C(t)),this._openers.push(new f(e))}registerOpener(e){return{dispose:this._openers.unshift(e)}}async open(e,t){const i="string"==typeof e?h.r.parse(e):e,o=this._resolvedUriTargets.get(i)??e;for(const e of this._validators)if(!await e.shouldOpen(o,t))return!1;for(const i of this._openers)if(await i.open(e,t))return!0;return!1}async resolveExternalUri(e,t){for(const i of this._resolvers)try{const o=await i.resolveExternalUri(e,t);if(o)return this._resolvedUriTargets.has(o.resolved)||this._resolvedUriTargets.set(o.resolved,e),o}catch{}throw new Error("Could not resolve external URI: "+e.toString())}async _doOpenExternal(e,t){const i="string"==typeof e?h.r.parse(e):e;let o,r;try{o=(await this.resolveExternalUri(i,t)).resolved}catch{o=i}if(r="string"==typeof e&&i.toString()===o.toString()?e:encodeURI(o.toString(!0)),t?.allowContributedOpeners){const e="string"==typeof t?.allowContributedOpeners?t?.allowContributedOpeners:void 0;for(const t of this._externalOpeners)if(await t.openExternal(r,{sourceUri:i,preferredOpenerId:e},s.XO.None))return!0}return this._defaultExternalOpener.openExternal(r,{sourceUri:i},s.XO.None)}dispose(){this._validators.clear()}};S=m([v(0,u.T),v(1,p.d)],S)},80878:(e,t,i)=>{i.d(t,{D:()=>o});class o{static capture(e){if(0===e.getScrollTop()||e.hasPendingScrollAnimation())return new o(e.getScrollTop(),e.getContentHeight(),null,0,null);let t=null,i=0;const r=e.getVisibleRanges();if(r.length>0){t=r[0].getStartPosition();const o=e.getTopForPosition(t.lineNumber,t.column);i=e.getScrollTop()-o}return new o(e.getScrollTop(),e.getContentHeight(),t,i,e.getPosition())}constructor(e,t,i,o,r){this._initialScrollTop=e,this._initialContentHeight=t,this._visiblePosition=i,this._visiblePositionScrollDelta=o,this._cursorPosition=r}restore(e){if((this._initialContentHeight!==e.getContentHeight()||this._initialScrollTop!==e.getScrollTop())&&this._visiblePosition){const t=e.getTopForPosition(this._visiblePosition.lineNumber,this._visiblePosition.column);e.setScrollTop(t+this._visiblePositionScrollDelta)}}restoreRelativeVerticalPositionOfCursor(e){if(this._initialContentHeight===e.getContentHeight()&&this._initialScrollTop===e.getScrollTop())return;const t=e.getPosition();if(!this._cursorPosition||!t)return;const i=e.getTopForLineNumber(t.lineNumber)-e.getTopForLineNumber(this._cursorPosition.lineNumber);e.setScrollTop(e.getScrollTop()+i,1)}}}}]);