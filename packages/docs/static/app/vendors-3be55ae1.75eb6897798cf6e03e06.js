"use strict";(self.webpackChunk_docstack_ui=self.webpackChunk_docstack_ui||[]).push([[1748],{18512:(e,t,i)=>{i.d(t,{V:()=>Je});var s,n=i(31710),r=i(22573),o=i(49693),a=i(35184),l=i(89694),h=i(9912),c=i(30325),u=i(32293),d=i(6995),p=i(28976);!function(e){e[e.PRESERVE=0]="PRESERVE",e[e.LAST=1]="LAST"}(s||(s={}));const g="workbench.contributions.quickaccess";p.O.add(g,new class{constructor(){this.providers=[],this.defaultProvider=void 0}registerQuickAccessProvider(e){return 0===e.prefix.length?this.defaultProvider=e:this.providers.push(e),this.providers.sort((e,t)=>t.prefix.length-e.prefix.length),(0,u.s)(()=>{this.providers.splice(this.providers.indexOf(e),1),this.defaultProvider===e&&(this.defaultProvider=void 0)})}getQuickAccessProviders(){return(0,d.Yc)([this.defaultProvider,...this.providers])}getQuickAccessProvider(e){return e&&this.providers.find(t=>e.startsWith(t.prefix))||this.defaultProvider}});var m=i(58144),v=function(e,t){return function(i,s){t(i,s,e)}};let _=class extends u.jG{constructor(e,t){super(),this.quickInputService=e,this.instantiationService=t,this.registry=p.O.as(g),this.mapProviderToDescriptor=new Map,this.lastAcceptedPickerValues=new Map,this.visibleQuickAccess=void 0}show(e="",t){this.doShowOrPick(e,!1,t)}doShowOrPick(e,t,i){const[o,a]=this.getOrInstantiateProvider(e,i?.enabledProviderPrefixes),l=this.visibleQuickAccess,h=l?.descriptor;if(l&&a&&h===a)return e===a.prefix||i?.preserveValue||(l.picker.value=e),void this.adjustValueSelection(l.picker,a,i);if(a&&!i?.preserveValue){let t;if(l&&h&&h!==a){const e=l.value.substr(h.prefix.length);e&&(t=`${a.prefix}${e}`)}if(!t){const e=o?.defaultFilterValue;e===s.LAST?t=this.lastAcceptedPickerValues.get(a):"string"==typeof e&&(t=`${a.prefix}${e}`)}"string"==typeof t&&(e=t)}const d=l?.picker?.valueSelection,p=l?.picker?.value,g=new u.Cm,v=g.add(this.quickInputService.createQuickPick({useSeparators:!0}));let _;v.value=e,this.adjustValueSelection(v,a,i),v.placeholder=i?.placeholder??a?.placeholder,v.quickNavigate=i?.quickNavigateConfiguration,v.hideInput=!!v.quickNavigate&&!l,("number"==typeof i?.itemActivation||i?.quickNavigateConfiguration)&&(v.itemActivation=i?.itemActivation??m.C1.SECOND),v.contextKey=a?.contextKey,v.filterValue=e=>e.substring(a?a.prefix.length:0),t&&(_=new c.Zv,g.add(r.Jh.once(v.onWillAccept)(e=>{e.veto(),v.hide()}))),g.add(this.registerPickerListeners(v,o,a,e,i));const b=g.add(new n.Qi);return o&&g.add(o.provide(v,b.token,i?.providerOptions)),r.Jh.once(v.onDidHide)(()=>{0===v.selectedItems.length&&b.cancel(),g.dispose(),_?.complete(v.selectedItems.slice(0))}),v.show(),d&&p===e&&(v.valueSelection=d),t?_?.p:void 0}adjustValueSelection(e,t,i){let s;s=i?.preserveValue?[e.value.length,e.value.length]:[t?.prefix.length??0,e.value.length],e.valueSelection=s}registerPickerListeners(e,t,i,s,n){const r=new u.Cm,o=this.visibleQuickAccess={picker:e,descriptor:i,value:s};return r.add((0,u.s)(()=>{o===this.visibleQuickAccess&&(this.visibleQuickAccess=void 0)})),r.add(e.onDidChangeValue(e=>{const[i]=this.getOrInstantiateProvider(e,n?.enabledProviderPrefixes);i!==t?this.show(e,{enabledProviderPrefixes:n?.enabledProviderPrefixes,preserveValue:!0,providerOptions:n?.providerOptions}):o.value=e})),i&&r.add(e.onDidAccept(()=>{this.lastAcceptedPickerValues.set(i,e.value)})),r}getOrInstantiateProvider(e,t){const i=this.registry.getQuickAccessProvider(e);if(!i||t&&!t?.includes(i.prefix))return[void 0,void 0];let s=this.mapProviderToDescriptor.get(i);return s||(s=this.instantiationService.createInstance(i.ctor),this.mapProviderToDescriptor.set(i,s)),[s,i]}};_=function(e,t,i,s){var n,r=arguments.length,o=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(r<3?n(o):r>3?n(t,i,o):n(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o}([v(0,m.GK),v(1,a._Y)],_);var b=i(56159),k=i(39292),y=i(19729),f=i(79284),C=i(44503),S=i(27082),w=i(36972),D=i(69958),I=i(55730),B=i(94850),x=i(12003),E=i(14032),L=i(24267),T=i(819),O=i(69383),A=i(12055);const F={},q=new O.n("quick-input-button-icon-");function M(e,t,i){let s=e.iconClass||function(e){if(!e)return;let t;const i=e.dark.toString();return F[i]?t=F[i]:(t=q.nextId(),f.Wt(`.${t}, .hc-light .${t}`,`background-image: ${f.Tf(e.light||e.dark)}`),f.Wt(`.vs-dark .${t}, .hc-black .${t}`,`background-image: ${f.Tf(e.dark)}`),F[i]=t),t}(e.iconPath);return e.alwaysVisible&&(s=s?`${s} always-visible`:"always-visible"),{id:t,label:"",tooltip:e.tooltip||"",class:s,enabled:!0,run:i}}var P=i(64602),H=i(41133),N=function(e,t){return function(i,s){t(i,s,e)}};const K="inQuickInput",V=new o.N1(K,!1,(0,x.kg)("inQuickInput","Whether keyboard focus is inside the quick input control")),U=o.M$.has(K),R="quickInputType",Q=new o.N1(R,void 0,(0,x.kg)("quickInputType","The type of the currently visible quick input")),W="cursorAtEndOfQuickInputBox",$=new o.N1(W,!1,(0,x.kg)("cursorAtEndOfQuickInputBox","Whether the cursor in the quick input is at the end of the input box")),G=o.M$.has(W),j={iconClass:B.L.asClassName(w.W.quickInputBack),tooltip:(0,x.kg)("quickInput.back","Back"),handle:-1};class z extends u.jG{static{this.noPromptMessage=(0,x.kg)("inputModeEntry","Press 'Enter' to confirm your input or 'Escape' to cancel")}constructor(e){super(),this.ui=e,this._widgetUpdated=!1,this.visible=!1,this._enabled=!0,this._busy=!1,this._ignoreFocusOut=!1,this._leftButtons=[],this._rightButtons=[],this._inlineButtons=[],this.buttonsUpdated=!1,this._toggles=[],this.togglesUpdated=!1,this.noValidationMessage=z.noPromptMessage,this._severity=I.A.Ignore,this.onDidTriggerButtonEmitter=this._register(new r.vl),this.onDidHideEmitter=this._register(new r.vl),this.onWillHideEmitter=this._register(new r.vl),this.onDisposeEmitter=this._register(new r.vl),this.visibleDisposables=this._register(new u.Cm),this.onDidHide=this.onDidHideEmitter.event}get title(){return this._title}set title(e){this._title=e,this.update()}get description(){return this._description}set description(e){this._description=e,this.update()}get step(){return this._steps}set step(e){this._steps=e,this.update()}get totalSteps(){return this._totalSteps}set totalSteps(e){this._totalSteps=e,this.update()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this.update()}get contextKey(){return this._contextKey}set contextKey(e){this._contextKey=e,this.update()}get busy(){return this._busy}set busy(e){this._busy=e,this.update()}get ignoreFocusOut(){return this._ignoreFocusOut}set ignoreFocusOut(e){const t=this._ignoreFocusOut!==e&&!D.un;this._ignoreFocusOut=e&&!D.un,t&&this.update()}get titleButtons(){return this._leftButtons.length?[...this._leftButtons,this._rightButtons]:this._rightButtons}get buttons(){return[...this._leftButtons,...this._rightButtons,...this._inlineButtons]}set buttons(e){this._leftButtons=e.filter(e=>e===j),this._rightButtons=e.filter(e=>e!==j&&e.location!==m.dH.Inline),this._inlineButtons=e.filter(e=>e.location===m.dH.Inline),this.buttonsUpdated=!0,this.update()}get toggles(){return this._toggles}set toggles(e){this._toggles=e??[],this.togglesUpdated=!0,this.update()}get validationMessage(){return this._validationMessage}set validationMessage(e){this._validationMessage=e,this.update()}get severity(){return this._severity}set severity(e){this._severity=e,this.update()}show(){this.visible||(this.visibleDisposables.add(this.ui.onDidTriggerButton(e=>{-1!==this.buttons.indexOf(e)&&this.onDidTriggerButtonEmitter.fire(e)})),this.ui.show(this),this.visible=!0,this._lastValidationMessage=void 0,this._lastSeverity=void 0,this.buttons.length&&(this.buttonsUpdated=!0),this.toggles.length&&(this.togglesUpdated=!0),this.update())}hide(){this.visible&&this.ui.hide()}didHide(e=m.kF.Other){this.visible=!1,this.visibleDisposables.clear(),this.onDidHideEmitter.fire({reason:e})}willHide(e=m.kF.Other){this.onWillHideEmitter.fire({reason:e})}update(){if(!this.visible)return;const e=this.getTitle();e&&this.ui.title.textContent!==e?this.ui.title.textContent=e:e||"&nbsp;"===this.ui.title.innerHTML||(this.ui.title.innerText="Â ");const t=this.getDescription();if(this.ui.description1.textContent!==t&&(this.ui.description1.textContent=t),this.ui.description2.textContent!==t&&(this.ui.description2.textContent=t),this._widgetUpdated&&(this._widgetUpdated=!1,this._widget?f.Ln(this.ui.widget,this._widget):f.Ln(this.ui.widget)),this.busy&&!this.busyDelay&&(this.busyDelay=new c.pc,this.busyDelay.setIfNotSet(()=>{this.visible&&this.ui.progressBar.infinite()},800)),!this.busy&&this.busyDelay&&(this.ui.progressBar.stop(),this.busyDelay.cancel(),this.busyDelay=void 0),this.buttonsUpdated){this.buttonsUpdated=!1,this.ui.leftActionBar.clear();const e=this._leftButtons.map((e,t)=>M(e,`id-${t}`,async()=>this.onDidTriggerButtonEmitter.fire(e)));this.ui.leftActionBar.push(e,{icon:!0,label:!1}),this.ui.rightActionBar.clear();const t=this._rightButtons.map((e,t)=>M(e,`id-${t}`,async()=>this.onDidTriggerButtonEmitter.fire(e)));this.ui.rightActionBar.push(t,{icon:!0,label:!1}),this.ui.inlineActionBar.clear();const i=this._inlineButtons.map((e,t)=>M(e,`id-${t}`,async()=>this.onDidTriggerButtonEmitter.fire(e)));this.ui.inlineActionBar.push(i,{icon:!0,label:!1})}if(this.togglesUpdated){this.togglesUpdated=!1;const e=this.toggles?.filter(e=>e instanceof S.l)??[];this.ui.inputBox.toggles=e}this.ui.ignoreFocusOut=this.ignoreFocusOut,this.ui.setEnabled(this.enabled),this.ui.setContextKey(this.contextKey);const i=this.validationMessage||this.noValidationMessage;this._lastValidationMessage!==i&&(this._lastValidationMessage=i,f.Ln(this.ui.message),function(e,t,i){f.Ln(t);const s=(0,A.q)(e);let n=0;for(const e of s.nodes)if("string"==typeof e)t.append(...(0,T.n)(e));else{let s=e.title;!s&&e.href.startsWith("command:")?s=(0,x.kg)("executeCommand","Click to execute command '{0}'",e.href.substring(8)):s||(s=e.href);const o=f.$("a",{href:e.href,title:s,tabIndex:n++},e.label);o.style.textDecoration="underline";const a=t=>{f.sd(t)&&f.fs.stop(t,!0),i.callback(e.href)},l=i.disposables.add(new E.f(o,f.Bx.CLICK)).event,h=i.disposables.add(new E.f(o,f.Bx.KEY_DOWN)).event,c=r.Jh.chain(h,e=>e.filter(e=>{const t=new C.Z(e);return t.equals(10)||t.equals(3)}));i.disposables.add(L.q.addTarget(o));const u=i.disposables.add(new E.f(o,L.B.Tap)).event;r.Jh.any(l,u,c)(a,null,i.disposables),t.appendChild(o)}}(i,this.ui.message,{callback:e=>{this.ui.linkOpenerDelegate(e)},disposables:this.visibleDisposables})),this._lastSeverity!==this.severity&&(this._lastSeverity=this.severity,this.showMessageDecoration(this.severity))}getTitle(){return this.title&&this.step?`${this.title} (${this.getSteps()})`:this.title?this.title:this.step?this.getSteps():""}getDescription(){return this.description||""}getSteps(){return this.step&&this.totalSteps?(0,x.kg)("quickInput.steps","{0}/{1}",this.step,this.totalSteps):this.step?String(this.step):""}showMessageDecoration(e){if(this.ui.inputBox.showDecoration(e),e!==I.A.Ignore){const t=this.ui.inputBox.stylesForType(e);this.ui.message.style.color=t.foreground?`${t.foreground}`:"",this.ui.message.style.backgroundColor=t.background?`${t.background}`:"",this.ui.message.style.border=t.border?`1px solid ${t.border}`:"",this.ui.message.style.marginBottom="-2px"}else this.ui.message.style.color="",this.ui.message.style.backgroundColor="",this.ui.message.style.border="",this.ui.message.style.marginBottom=""}dispose(){this.hide(),this.onDisposeEmitter.fire(),super.dispose()}}class J extends z{constructor(){super(...arguments),this._value="",this.onDidChangeValueEmitter=this._register(new r.vl),this.onWillAcceptEmitter=this._register(new r.vl),this.onDidAcceptEmitter=this._register(new r.vl),this.onDidCustomEmitter=this._register(new r.vl),this._items=[],this.itemsUpdated=!1,this._canSelectMany=!1,this._canAcceptInBackground=!1,this._matchOnDescription=!1,this._matchOnDetail=!1,this._matchOnLabel=!0,this._matchOnLabelMode="fuzzy",this._sortByLabel=!0,this._keepScrollPosition=!1,this._itemActivation=m.C1.FIRST,this._activeItems=[],this.activeItemsUpdated=!1,this.activeItemsToConfirm=[],this.onDidChangeActiveEmitter=this._register(new r.vl),this._selectedItems=[],this.selectedItemsUpdated=!1,this.selectedItemsToConfirm=[],this.onDidChangeSelectionEmitter=this._register(new r.vl),this.onDidTriggerItemButtonEmitter=this._register(new r.vl),this.onDidTriggerSeparatorButtonEmitter=this._register(new r.vl),this.valueSelectionUpdated=!0,this._ok="default",this._customButton=!1,this._focusEventBufferer=new r.at,this.type="quickPick",this.filterValue=e=>e,this.onDidChangeValue=this.onDidChangeValueEmitter.event,this.onWillAccept=this.onWillAcceptEmitter.event,this.onDidAccept=this.onDidAcceptEmitter.event,this.onDidChangeActive=this.onDidChangeActiveEmitter.event,this.onDidChangeSelection=this.onDidChangeSelectionEmitter.event,this.onDidTriggerItemButton=this.onDidTriggerItemButtonEmitter.event,this.onDidTriggerSeparatorButton=this.onDidTriggerSeparatorButtonEmitter.event}static{this.DEFAULT_ARIA_LABEL=(0,x.kg)("quickInputBox.ariaLabel","Type to narrow down results.")}get quickNavigate(){return this._quickNavigate}set quickNavigate(e){this._quickNavigate=e,this.update()}get value(){return this._value}set value(e){this.doSetValue(e)}doSetValue(e,t){this._value!==e&&(this._value=e,t||this.update(),this.visible&&this.ui.list.filter(this.filterValue(this._value))&&this.trySelectFirst(),this.onDidChangeValueEmitter.fire(this._value))}set ariaLabel(e){this._ariaLabel=e,this.update()}get ariaLabel(){return this._ariaLabel}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.update()}get items(){return this._items}get scrollTop(){return this.ui.list.scrollTop}set scrollTop(e){this.ui.list.scrollTop=e}set items(e){this._items=e,this.itemsUpdated=!0,this.update()}get canSelectMany(){return this._canSelectMany}set canSelectMany(e){this._canSelectMany=e,this.update()}get canAcceptInBackground(){return this._canAcceptInBackground}set canAcceptInBackground(e){this._canAcceptInBackground=e}get matchOnDescription(){return this._matchOnDescription}set matchOnDescription(e){this._matchOnDescription=e,this.update()}get matchOnDetail(){return this._matchOnDetail}set matchOnDetail(e){this._matchOnDetail=e,this.update()}get matchOnLabel(){return this._matchOnLabel}set matchOnLabel(e){this._matchOnLabel=e,this.update()}get matchOnLabelMode(){return this._matchOnLabelMode}set matchOnLabelMode(e){this._matchOnLabelMode=e,this.update()}get sortByLabel(){return this._sortByLabel}set sortByLabel(e){this._sortByLabel=e,this.update()}get keepScrollPosition(){return this._keepScrollPosition}set keepScrollPosition(e){this._keepScrollPosition=e}get itemActivation(){return this._itemActivation}set itemActivation(e){this._itemActivation=e}get activeItems(){return this._activeItems}set activeItems(e){this._activeItems=e,this.activeItemsUpdated=!0,this.update()}get selectedItems(){return this._selectedItems}set selectedItems(e){this._selectedItems=e,this.selectedItemsUpdated=!0,this.update()}get keyMods(){return this._quickNavigate?m.Ym:this.ui.keyMods}get valueSelection(){const e=this.ui.inputBox.getSelection();if(e)return[e.start,e.end]}set valueSelection(e){this._valueSelection=e,this.valueSelectionUpdated=!0,this.update()}get customButton(){return this._customButton}set customButton(e){this._customButton=e,this.update()}get customLabel(){return this._customButtonLabel}set customLabel(e){this._customButtonLabel=e,this.update()}get customHover(){return this._customButtonHover}set customHover(e){this._customButtonHover=e,this.update()}get ok(){return this._ok}set ok(e){this._ok=e,this.update()}get hideInput(){return!!this._hideInput}set hideInput(e){this._hideInput=e,this.update()}trySelectFirst(){this.canSelectMany||this.ui.list.focus(m.Fp.First)}show(){this.visible||(this.visibleDisposables.add(this.ui.inputBox.onDidChange(e=>{this.doSetValue(e,!0)})),this.visibleDisposables.add(this.ui.onDidAccept(()=>{this.canSelectMany?this.ui.list.getCheckedElements().length||(this._selectedItems=[],this.onDidChangeSelectionEmitter.fire(this.selectedItems)):this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems)),this.handleAccept(!1)})),this.visibleDisposables.add(this.ui.onDidCustom(()=>{this.onDidCustomEmitter.fire()})),this.visibleDisposables.add(this._focusEventBufferer.wrapEvent(this.ui.list.onDidChangeFocus,(e,t)=>t)(e=>{this.activeItemsUpdated||this.activeItemsToConfirm!==this._activeItems&&(0,d.aI)(e,this._activeItems,(e,t)=>e===t)||(this._activeItems=e,this.onDidChangeActiveEmitter.fire(e))})),this.visibleDisposables.add(this.ui.list.onDidChangeSelection(({items:e,event:t})=>{this.canSelectMany?e.length&&this.ui.list.setSelectedElements([]):this.selectedItemsToConfirm!==this._selectedItems&&(0,d.aI)(e,this._selectedItems,(e,t)=>e===t)||(this._selectedItems=e,this.onDidChangeSelectionEmitter.fire(e),e.length&&this.handleAccept(f.Er(t)&&1===t.button))})),this.visibleDisposables.add(this.ui.list.onChangedCheckedElements(e=>{this.canSelectMany&&this.visible&&(this.selectedItemsToConfirm!==this._selectedItems&&(0,d.aI)(e,this._selectedItems,(e,t)=>e===t)||(this._selectedItems=e,this.onDidChangeSelectionEmitter.fire(e)))})),this.visibleDisposables.add(this.ui.list.onButtonTriggered(e=>this.onDidTriggerItemButtonEmitter.fire(e))),this.visibleDisposables.add(this.ui.list.onSeparatorButtonTriggered(e=>this.onDidTriggerSeparatorButtonEmitter.fire(e))),this.visibleDisposables.add(this.registerQuickNavigation()),this.valueSelectionUpdated=!0),super.show()}handleAccept(e){let t=!1;this.onWillAcceptEmitter.fire({veto:()=>t=!0}),t||this.onDidAcceptEmitter.fire({inBackground:e})}registerQuickNavigation(){return f.ko(this.ui.container,f.Bx.KEY_UP,e=>{if(this.canSelectMany||!this._quickNavigate)return;const t=new C.Z(e),i=t.keyCode;this._quickNavigate.keybindings.some(e=>{const s=e.getChords();return!(s.length>1||(s[0].shiftKey&&4===i?t.ctrlKey||t.altKey||t.metaKey:!(s[0].altKey&&6===i||s[0].ctrlKey&&5===i||s[0].metaKey&&57===i)))})&&(this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems),this.handleAccept(!1)),this._quickNavigate=void 0)})}update(){if(!this.visible)return;const e=this.keepScrollPosition?this.scrollTop:0,t=!!this.description,i={title:!!this.title||!!this.step||!!this.titleButtons.length,description:t,checkAll:this.canSelectMany&&!this._hideCheckAll,checkBox:this.canSelectMany,inputBox:!this._hideInput,progressBar:!this._hideInput||t,visibleCount:!0,count:this.canSelectMany&&!this._hideCountBadge,ok:"default"===this.ok?this.canSelectMany:this.ok,list:!0,message:!!this.validationMessage,customButton:this.customButton};this.ui.setVisibilities(i),super.update(),this.ui.inputBox.value!==this.value&&(this.ui.inputBox.value=this.value),this.valueSelectionUpdated&&(this.valueSelectionUpdated=!1,this.ui.inputBox.select(this._valueSelection&&{start:this._valueSelection[0],end:this._valueSelection[1]})),this.ui.inputBox.placeholder!==(this.placeholder||"")&&(this.ui.inputBox.placeholder=this.placeholder||"");let s=this.ariaLabel;!s&&i.inputBox&&(s=this.placeholder||J.DEFAULT_ARIA_LABEL,this.title&&(s+=` - ${this.title}`)),this.ui.list.ariaLabel!==s&&(this.ui.list.ariaLabel=s??null),this.ui.list.matchOnDescription=this.matchOnDescription,this.ui.list.matchOnDetail=this.matchOnDetail,this.ui.list.matchOnLabel=this.matchOnLabel,this.ui.list.matchOnLabelMode=this.matchOnLabelMode,this.ui.list.sortByLabel=this.sortByLabel,this.itemsUpdated&&(this.itemsUpdated=!1,this._focusEventBufferer.bufferEvents(()=>{switch(this.ui.list.setElements(this.items),this.ui.list.shouldLoop=!this.canSelectMany,this.ui.list.filter(this.filterValue(this.ui.inputBox.value)),this._itemActivation){case m.C1.NONE:this._itemActivation=m.C1.FIRST;break;case m.C1.SECOND:this.ui.list.focus(m.Fp.Second),this._itemActivation=m.C1.FIRST;break;case m.C1.LAST:this.ui.list.focus(m.Fp.Last),this._itemActivation=m.C1.FIRST;break;default:this.trySelectFirst()}})),this.ui.container.classList.contains("show-checkboxes")!==!!this.canSelectMany&&(this.canSelectMany?this.ui.list.clearFocus():this.trySelectFirst()),this.activeItemsUpdated&&(this.activeItemsUpdated=!1,this.activeItemsToConfirm=this._activeItems,this.ui.list.setFocusedElements(this.activeItems),this.activeItemsToConfirm===this._activeItems&&(this.activeItemsToConfirm=null)),this.selectedItemsUpdated&&(this.selectedItemsUpdated=!1,this.selectedItemsToConfirm=this._selectedItems,this.canSelectMany?this.ui.list.setCheckedElements(this.selectedItems):this.ui.list.setSelectedElements(this.selectedItems),this.selectedItemsToConfirm===this._selectedItems&&(this.selectedItemsToConfirm=null)),this.ui.customButton.label=this.customLabel||"",this.ui.customButton.element.title=this.customHover||"",i.inputBox||(this.ui.list.domFocus(),this.canSelectMany&&this.ui.list.focus(m.Fp.First)),this.keepScrollPosition&&(this.scrollTop=e)}focus(e){this.ui.list.focus(e),this.canSelectMany&&this.ui.list.domFocus()}accept(e){e&&!this._canAcceptInBackground||this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems),this.handleAccept(e??!1))}}class Y extends z{constructor(){super(...arguments),this._value="",this.valueSelectionUpdated=!0,this._password=!1,this.onDidValueChangeEmitter=this._register(new r.vl),this.onDidAcceptEmitter=this._register(new r.vl),this.type="inputBox",this.onDidChangeValue=this.onDidValueChangeEmitter.event,this.onDidAccept=this.onDidAcceptEmitter.event}get value(){return this._value}set value(e){this._value=e||"",this.update()}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.update()}get password(){return this._password}set password(e){this._password=e,this.update()}show(){this.visible||(this.visibleDisposables.add(this.ui.inputBox.onDidChange(e=>{e!==this.value&&(this._value=e,this.onDidValueChangeEmitter.fire(e))})),this.visibleDisposables.add(this.ui.onDidAccept(()=>this.onDidAcceptEmitter.fire())),this.valueSelectionUpdated=!0),super.show()}update(){if(!this.visible)return;this.ui.container.classList.remove("hidden-input");const e={title:!!this.title||!!this.step||!!this.titleButtons.length,description:!!this.description||!!this.step,inputBox:!0,message:!0,progressBar:!0};this.ui.setVisibilities(e),super.update(),this.ui.inputBox.value!==this.value&&(this.ui.inputBox.value=this.value),this.valueSelectionUpdated&&(this.valueSelectionUpdated=!1,this.ui.inputBox.select(this._valueSelection&&{start:this._valueSelection[0],end:this._valueSelection[1]})),this.ui.inputBox.placeholder!==(this.placeholder||"")&&(this.ui.inputBox.placeholder=this.placeholder||""),this.ui.inputBox.password!==this.password&&(this.ui.inputBox.password=this.password)}}let X=class extends H.fO{constructor(e,t){super("element",!1,e=>this.getOverrideOptions(e),e,t)}getOverrideOptions(e){return{persistence:{hideOnKeyDown:!1},appearance:{showHoverHint:(f.sb(e.content)?e.content.textContent??"":"string"==typeof e.content?e.content:e.content.value).includes("\n"),skipFadeInAnimation:!0}}}};X=function(e,t,i,s){var n,r=arguments.length,o=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(r<3?n(o):r>3?n(t,i,o):n(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o}([N(0,P.pG),N(1,H.TN)],X);var Z=i(81244),ee=i(92414),te=i(27146),ie=i(9472),se=i(79642);const ne=f.$;class re extends u.jG{constructor(e,t,i){super(),this.parent=e,this.onKeyDown=e=>f.b2(this.findInput.inputBox.inputElement,f.Bx.KEY_DOWN,e),this.onDidChange=e=>this.findInput.onDidChange(e),this.container=f.BC(this.parent,ne(".quick-input-box")),this.findInput=this._register(new se.c(this.container,void 0,{label:"",inputBoxStyles:t,toggleStyles:i}));const s=this.findInput.inputBox.inputElement;s.role="combobox",s.ariaHasPopup="menu",s.ariaAutoComplete="list",s.ariaExpanded="true"}get value(){return this.findInput.getValue()}set value(e){this.findInput.setValue(e)}select(e=null){this.findInput.inputBox.select(e)}getSelection(){return this.findInput.inputBox.getSelection()}isSelectionAtEnd(){return this.findInput.inputBox.isSelectionAtEnd()}get placeholder(){return this.findInput.inputBox.inputElement.getAttribute("placeholder")||""}set placeholder(e){this.findInput.inputBox.setPlaceHolder(e)}get password(){return"password"===this.findInput.inputBox.inputElement.type}set password(e){this.findInput.inputBox.inputElement.type=e?"password":"text"}set enabled(e){this.findInput.inputBox.inputElement.toggleAttribute("readonly",!e)}set toggles(e){this.findInput.setAdditionalToggles(e)}setAttribute(e,t){this.findInput.inputBox.inputElement.setAttribute(e,t)}showDecoration(e){e===I.A.Ignore?this.findInput.clearMessage():this.findInput.showMessage({type:e===I.A.Info?1:e===I.A.Warning?2:3,content:""})}stylesForType(e){return this.findInput.inputBox.stylesForType(e===I.A.Info?1:e===I.A.Warning?2:3)}setFocus(){this.findInput.focus()}layout(){this.findInput.inputBox.layout()}}var oe,ae=i(866),le=i(81018),he=i(69175),ce=i(90059),ue=i(87412),de=i(4968),pe=i(5839),ge=i(55003),me=i(82279),ve=i(4805),_e=i(60891),be=i(34052),ke=i(73226),ye=i(82962),fe=i(35544),Ce=function(e,t,i,s){var n,r=arguments.length,o=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(r<3?n(o):r>3?n(t,i,o):n(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o},Se=function(e,t){return function(i,s){t(i,s,e)}};const we=f.$;class De{constructor(e,t,i){this.index=e,this.hasCheckbox=t,this._hidden=!1,this._init=new ge.d(()=>{const e=i.label??"",t=(0,me._k)(e).text.trim(),s=i.ariaLabel||[e,this.saneDescription,this.saneDetail].map(e=>(0,me.R$)(e)).filter(e=>!!e).join(", ");return{saneLabel:e,saneSortLabel:t,saneAriaLabel:s}}),this._saneDescription=i.description,this._saneTooltip=i.tooltip}get saneLabel(){return this._init.value.saneLabel}get saneSortLabel(){return this._init.value.saneSortLabel}get saneAriaLabel(){return this._init.value.saneAriaLabel}get element(){return this._element}set element(e){this._element=e}get hidden(){return this._hidden}set hidden(e){this._hidden=e}get saneDescription(){return this._saneDescription}set saneDescription(e){this._saneDescription=e}get saneDetail(){return this._saneDetail}set saneDetail(e){this._saneDetail=e}get saneTooltip(){return this._saneTooltip}set saneTooltip(e){this._saneTooltip=e}get labelHighlights(){return this._labelHighlights}set labelHighlights(e){this._labelHighlights=e}get descriptionHighlights(){return this._descriptionHighlights}set descriptionHighlights(e){this._descriptionHighlights=e}get detailHighlights(){return this._detailHighlights}set detailHighlights(e){this._detailHighlights=e}}class Ie extends De{constructor(e,t,i,s,n,o){super(e,t,n),this.fireButtonTriggered=i,this._onChecked=s,this.item=n,this._separator=o,this._checked=!1,this.onChecked=t?r.Jh.map(r.Jh.filter(this._onChecked.event,e=>e.element===this),e=>e.checked):r.Jh.None,this._saneDetail=n.detail,this._labelHighlights=n.highlights?.label,this._descriptionHighlights=n.highlights?.description,this._detailHighlights=n.highlights?.detail}get separator(){return this._separator}set separator(e){this._separator=e}get checked(){return this._checked}set checked(e){e!==this._checked&&(this._checked=e,this._onChecked.fire({element:this,checked:e}))}get checkboxDisabled(){return!!this.item.disabled}}var Be;!function(e){e[e.NONE=0]="NONE",e[e.MOUSE_HOVER=1]="MOUSE_HOVER",e[e.ACTIVE_ITEM=2]="ACTIVE_ITEM"}(Be||(Be={}));class xe extends De{constructor(e,t,i){super(e,!1,i),this.fireSeparatorButtonTriggered=t,this.separator=i,this.children=new Array,this.focusInsideSeparator=Be.NONE}}class Ee{getHeight(e){return e instanceof xe?30:e.saneDetail?44:22}getTemplateId(e){return e instanceof Ie?Oe.ID:Ae.ID}}class Le{getWidgetAriaLabel(){return(0,x.kg)("quickInput","Quick Input")}getAriaLabel(e){return e.separator?.label?`${e.saneAriaLabel}, ${e.separator.label}`:e.saneAriaLabel}getWidgetRole(){return"listbox"}getRole(e){return e.hasCheckbox?"checkbox":"option"}isChecked(e){if(e.hasCheckbox&&e instanceof Ie)return{get value(){return e.checked},onDidChange:t=>e.onChecked(()=>t())}}}class Te{constructor(e){this.hoverDelegate=e}renderTemplate(e){const t=Object.create(null);t.toDisposeElement=new u.Cm,t.toDisposeTemplate=new u.Cm,t.entry=f.BC(e,we(".quick-input-list-entry"));const i=f.BC(t.entry,we("label.quick-input-list-label"));t.toDisposeTemplate.add(f.b2(i,f.Bx.CLICK,e=>{t.checkbox.offsetParent||e.preventDefault()})),t.checkbox=f.BC(i,we("input.quick-input-list-checkbox")),t.checkbox.type="checkbox";const s=f.BC(i,we(".quick-input-list-rows")),n=f.BC(s,we(".quick-input-list-row")),r=f.BC(s,we(".quick-input-list-row"));t.label=new ce.s(n,{supportHighlights:!0,supportDescriptionHighlights:!0,supportIcons:!0,hoverDelegate:this.hoverDelegate}),t.toDisposeTemplate.add(t.label),t.icon=f.Hs(t.label.element,we(".quick-input-list-icon"));const o=f.BC(n,we(".quick-input-list-entry-keybinding"));t.keybinding=new ue.x(o,D.OS),t.toDisposeTemplate.add(t.keybinding);const a=f.BC(r,we(".quick-input-list-label-meta"));return t.detail=new ce.s(a,{supportHighlights:!0,supportIcons:!0,hoverDelegate:this.hoverDelegate}),t.toDisposeTemplate.add(t.detail),t.separator=f.BC(t.entry,we(".quick-input-list-separator")),t.actionBar=new Z.E(t.entry,this.hoverDelegate?{hoverDelegate:this.hoverDelegate}:void 0),t.actionBar.domNode.classList.add("quick-input-list-entry-action-bar"),t.toDisposeTemplate.add(t.actionBar),t}disposeTemplate(e){e.toDisposeElement.dispose(),e.toDisposeTemplate.dispose()}disposeElement(e,t,i){i.toDisposeElement.clear(),i.actionBar.clear()}}let Oe=class extends Te{static{oe=this}static{this.ID="quickpickitem"}constructor(e,t){super(e),this.themeService=t,this._itemsWithSeparatorsFrequency=new Map}get templateId(){return oe.ID}renderTemplate(e){const t=super.renderTemplate(e);return t.toDisposeTemplate.add(f.b2(t.checkbox,f.Bx.CHANGE,e=>{t.element.checked=t.checkbox.checked})),t}renderElement(e,t,i){const s=e.element;i.element=s,s.element=i.entry??void 0;const n=s.item;i.checkbox.checked=s.checked,i.toDisposeElement.add(s.onChecked(e=>i.checkbox.checked=e)),i.checkbox.disabled=s.checkboxDisabled;const{labelHighlights:r,descriptionHighlights:o,detailHighlights:a}=s;if(n.iconPath){const e=(0,de.HD)(this.themeService.getColorTheme().type)?n.iconPath.dark:n.iconPath.light??n.iconPath.dark,t=pe.r.revive(e);i.icon.className="quick-input-list-icon",i.icon.style.backgroundImage=f.Tf(t)}else i.icon.style.backgroundImage="",i.icon.className=n.iconClass?`quick-input-list-icon ${n.iconClass}`:"";let l;!s.saneTooltip&&s.saneDescription&&(l={markdown:{value:s.saneDescription,supportThemeIcons:!0},markdownNotSupportedFallback:s.saneDescription});const h={matches:r||[],descriptionTitle:l,descriptionMatches:o||[],labelEscapeNewLines:!0};if(h.extraClasses=n.iconClasses,h.italic=n.italic,h.strikethrough=n.strikethrough,i.entry.classList.remove("quick-input-list-separator-as-item"),i.label.setLabel(s.saneLabel,s.saneDescription,h),i.keybinding.set(n.keybinding),s.saneDetail){let e;s.saneTooltip||(e={markdown:{value:s.saneDetail,supportThemeIcons:!0},markdownNotSupportedFallback:s.saneDetail}),i.detail.element.style.display="",i.detail.setLabel(s.saneDetail,void 0,{matches:a,title:e,labelEscapeNewLines:!0})}else i.detail.element.style.display="none";s.separator?.label?(i.separator.textContent=s.separator.label,i.separator.style.display="",this.addItemWithSeparator(s)):i.separator.style.display="none",i.entry.classList.toggle("quick-input-list-separator-border",!!s.separator);const c=n.buttons;c&&c.length?(i.actionBar.push(c.map((e,t)=>M(e,`id-${t}`,()=>s.fireButtonTriggered({button:e,item:s.item}))),{icon:!0,label:!1}),i.entry.classList.add("has-actions")):i.entry.classList.remove("has-actions")}disposeElement(e,t,i){this.removeItemWithSeparator(e.element),super.disposeElement(e,t,i)}isItemWithSeparatorVisible(e){return this._itemsWithSeparatorsFrequency.has(e)}addItemWithSeparator(e){this._itemsWithSeparatorsFrequency.set(e,(this._itemsWithSeparatorsFrequency.get(e)||0)+1)}removeItemWithSeparator(e){const t=this._itemsWithSeparatorsFrequency.get(e)||0;t>1?this._itemsWithSeparatorsFrequency.set(e,t-1):this._itemsWithSeparatorsFrequency.delete(e)}};Oe=oe=Ce([Se(1,y.Gy)],Oe);class Ae extends Te{constructor(){super(...arguments),this._visibleSeparatorsFrequency=new Map}static{this.ID="quickpickseparator"}get templateId(){return Ae.ID}get visibleSeparators(){return[...this._visibleSeparatorsFrequency.keys()]}isSeparatorVisible(e){return this._visibleSeparatorsFrequency.has(e)}renderTemplate(e){const t=super.renderTemplate(e);return t.checkbox.style.display="none",t}renderElement(e,t,i){const s=e.element;i.element=s,s.element=i.entry??void 0,s.element.classList.toggle("focus-inside",!!s.focusInsideSeparator);const n=s.separator,{labelHighlights:r,descriptionHighlights:o,detailHighlights:a}=s;let l;i.icon.style.backgroundImage="",i.icon.className="",!s.saneTooltip&&s.saneDescription&&(l={markdown:{value:s.saneDescription,supportThemeIcons:!0},markdownNotSupportedFallback:s.saneDescription});const h={matches:r||[],descriptionTitle:l,descriptionMatches:o||[],labelEscapeNewLines:!0};if(i.entry.classList.add("quick-input-list-separator-as-item"),i.label.setLabel(s.saneLabel,s.saneDescription,h),s.saneDetail){let e;s.saneTooltip||(e={markdown:{value:s.saneDetail,supportThemeIcons:!0},markdownNotSupportedFallback:s.saneDetail}),i.detail.element.style.display="",i.detail.setLabel(s.saneDetail,void 0,{matches:a,title:e,labelEscapeNewLines:!0})}else i.detail.element.style.display="none";i.separator.style.display="none",i.entry.classList.add("quick-input-list-separator-border");const c=n.buttons;c&&c.length?(i.actionBar.push(c.map((e,t)=>M(e,`id-${t}`,()=>s.fireSeparatorButtonTriggered({button:e,separator:s.separator}))),{icon:!0,label:!1}),i.entry.classList.add("has-actions")):i.entry.classList.remove("has-actions"),this.addSeparator(s)}disposeElement(e,t,i){this.removeSeparator(e.element),this.isSeparatorVisible(e.element)||e.element.element?.classList.remove("focus-inside"),super.disposeElement(e,t,i)}addSeparator(e){this._visibleSeparatorsFrequency.set(e,(this._visibleSeparatorsFrequency.get(e)||0)+1)}removeSeparator(e){const t=this._visibleSeparatorsFrequency.get(e)||0;t>1?this._visibleSeparatorsFrequency.set(e,t-1):this._visibleSeparatorsFrequency.delete(e)}}let Fe=class extends u.jG{constructor(e,t,i,s,n,o){super(),this.parent=e,this.hoverDelegate=t,this.linkOpenerDelegate=i,this.accessibilityService=o,this._onKeyDown=new r.vl,this._onLeave=new r.vl,this.onLeave=this._onLeave.event,this._visibleCountObservable=(0,fe.FY)("VisibleCount",0),this.onChangedVisibleCount=r.Jh.fromObservable(this._visibleCountObservable,this._store),this._allVisibleCheckedObservable=(0,fe.FY)("AllVisibleChecked",!1),this.onChangedAllVisibleChecked=r.Jh.fromObservable(this._allVisibleCheckedObservable,this._store),this._checkedCountObservable=(0,fe.FY)("CheckedCount",0),this.onChangedCheckedCount=r.Jh.fromObservable(this._checkedCountObservable,this._store),this._checkedElementsObservable=(0,fe.Zh)({equalsFn:d.aI},new Array),this.onChangedCheckedElements=r.Jh.fromObservable(this._checkedElementsObservable,this._store),this._onButtonTriggered=new r.vl,this.onButtonTriggered=this._onButtonTriggered.event,this._onSeparatorButtonTriggered=new r.vl,this.onSeparatorButtonTriggered=this._onSeparatorButtonTriggered.event,this._elementChecked=new r.vl,this._elementCheckedEventBufferer=new r.at,this._hasCheckboxes=!1,this._inputElements=new Array,this._elementTree=new Array,this._itemElements=new Array,this._elementDisposable=this._register(new u.Cm),this._matchOnDescription=!1,this._matchOnDetail=!1,this._matchOnLabel=!0,this._matchOnLabelMode="fuzzy",this._sortByLabel=!0,this._shouldLoop=!0,this._container=f.BC(this.parent,we(".quick-input-list")),this._separatorRenderer=new Ae(t),this._itemRenderer=n.createInstance(Oe,t),this._tree=this._register(n.createInstance(le.zL,"QuickInput",this._container,new Ee,[this._itemRenderer,this._separatorRenderer],{filter:{filter:e=>e.hidden?0:e instanceof xe?2:1},sorter:{compare:(e,t)=>this.sortByLabel&&this._lastQueryString?function(e,t,i){const s=e.labelHighlights||[],n=t.labelHighlights||[];return s.length&&!n.length?-1:!s.length&&n.length?1:0===s.length&&0===n.length?0:(0,ve.Es)(e.saneSortLabel,t.saneSortLabel,i)}(e,t,this._lastQueryString.toLowerCase()):0},accessibilityProvider:new Le,setRowLineHeight:!1,multipleSelectionSupport:!1,hideTwistiesOfChildlessElements:!0,renderIndentGuides:be.KP.None,findWidgetEnabled:!1,indent:0,horizontalScrolling:!1,allowNonCollapsibleParents:!0,alwaysConsumeMouseWheel:!0})),this._tree.getHTMLElement().id=s,this._registerListeners()}get onDidChangeFocus(){return r.Jh.map(this._tree.onDidChangeFocus,e=>e.elements.filter(e=>e instanceof Ie).map(e=>e.item),this._store)}get onDidChangeSelection(){return r.Jh.map(this._tree.onDidChangeSelection,e=>({items:e.elements.filter(e=>e instanceof Ie).map(e=>e.item),event:e.browserEvent}),this._store)}get displayed(){return"none"!==this._container.style.display}set displayed(e){this._container.style.display=e?"":"none"}get scrollTop(){return this._tree.scrollTop}set scrollTop(e){this._tree.scrollTop=e}get ariaLabel(){return this._tree.ariaLabel}set ariaLabel(e){this._tree.ariaLabel=e??""}set enabled(e){this._tree.getHTMLElement().style.pointerEvents=e?"":"none"}get matchOnDescription(){return this._matchOnDescription}set matchOnDescription(e){this._matchOnDescription=e}get matchOnDetail(){return this._matchOnDetail}set matchOnDetail(e){this._matchOnDetail=e}get matchOnLabel(){return this._matchOnLabel}set matchOnLabel(e){this._matchOnLabel=e}get matchOnLabelMode(){return this._matchOnLabelMode}set matchOnLabelMode(e){this._matchOnLabelMode=e}get sortByLabel(){return this._sortByLabel}set sortByLabel(e){this._sortByLabel=e}get shouldLoop(){return this._shouldLoop}set shouldLoop(e){this._shouldLoop=e}_registerListeners(){this._registerOnKeyDown(),this._registerOnContainerClick(),this._registerOnMouseMiddleClick(),this._registerOnTreeModelChanged(),this._registerOnElementChecked(),this._registerOnContextMenu(),this._registerHoverListeners(),this._registerSelectionChangeListener(),this._registerSeparatorActionShowingListeners()}_registerOnKeyDown(){this._register(this._tree.onKeyDown(e=>{const t=new C.Z(e);10===t.keyCode&&this.toggleCheckbox(),this._onKeyDown.fire(t)}))}_registerOnContainerClick(){this._register(f.ko(this._container,f.Bx.CLICK,e=>{(e.x||e.y)&&this._onLeave.fire()}))}_registerOnMouseMiddleClick(){this._register(f.ko(this._container,f.Bx.AUXCLICK,e=>{1===e.button&&this._onLeave.fire()}))}_registerOnTreeModelChanged(){this._register(this._tree.onDidChangeModel(()=>{const e=this._itemElements.filter(e=>!e.hidden).length;this._visibleCountObservable.set(e,void 0),this._hasCheckboxes&&this._updateCheckedObservables()}))}_registerOnElementChecked(){this._register(this._elementCheckedEventBufferer.wrapEvent(this._elementChecked.event,(e,t)=>t)(e=>this._updateCheckedObservables()))}_registerOnContextMenu(){this._register(this._tree.onContextMenu(e=>{e.element&&(e.browserEvent.preventDefault(),this._tree.setSelection([e.element]))}))}_registerHoverListeners(){const e=this._register(new c.Th(this.hoverDelegate.delay));this._register(this._tree.onMouseOver(async t=>{if(f.nY(t.browserEvent.target))e.cancel();else if(f.nY(t.browserEvent.relatedTarget)||!f.QX(t.browserEvent.relatedTarget,t.element?.element))try{await e.trigger(async()=>{t.element instanceof Ie&&this.showHover(t.element)})}catch(t){if(!(0,ke.MB)(t))throw t}})),this._register(this._tree.onMouseOut(t=>{f.QX(t.browserEvent.relatedTarget,t.element?.element)||e.cancel()}))}_registerSeparatorActionShowingListeners(){this._register(this._tree.onDidChangeFocus(e=>{const t=e.elements[0]?this._tree.getParentElement(e.elements[0]):null;for(const e of this._separatorRenderer.visibleSeparators){const i=e===t;!!(e.focusInsideSeparator&Be.ACTIVE_ITEM)!==i&&(i?e.focusInsideSeparator|=Be.ACTIVE_ITEM:e.focusInsideSeparator&=~Be.ACTIVE_ITEM,this._tree.rerender(e))}})),this._register(this._tree.onMouseOver(e=>{const t=e.element?this._tree.getParentElement(e.element):null;for(const e of this._separatorRenderer.visibleSeparators)e===t&&(e.focusInsideSeparator&Be.MOUSE_HOVER||(e.focusInsideSeparator|=Be.MOUSE_HOVER,this._tree.rerender(e)))})),this._register(this._tree.onMouseOut(e=>{const t=e.element?this._tree.getParentElement(e.element):null;for(const e of this._separatorRenderer.visibleSeparators)e===t&&e.focusInsideSeparator&Be.MOUSE_HOVER&&(e.focusInsideSeparator&=~Be.MOUSE_HOVER,this._tree.rerender(e))}))}_registerSelectionChangeListener(){this._register(this._tree.onDidChangeSelection(e=>{const t=e.elements.filter(e=>e instanceof Ie);t.length!==e.elements.length&&(1===e.elements.length&&e.elements[0]instanceof xe&&(this._tree.setFocus([e.elements[0].children[0]]),this._tree.reveal(e.elements[0],0)),this._tree.setSelection(t))}))}setAllVisibleChecked(e){this._elementCheckedEventBufferer.bufferEvents(()=>{this._itemElements.forEach(t=>{t.hidden||t.checkboxDisabled||(t.checked=e)})})}setElements(e){let t;this._elementDisposable.clear(),this._lastQueryString=void 0,this._inputElements=e,this._hasCheckboxes=this.parent.classList.contains("show-checkboxes"),this._itemElements=new Array,this._elementTree=e.reduce((i,s,n)=>{let r;if("separator"===s.type){if(!s.buttons)return i;t=new xe(n,e=>this._onSeparatorButtonTriggered.fire(e),s),r=t}else{const o=n>0?e[n-1]:void 0;let a;o&&"separator"===o.type&&!o.buttons&&(t=void 0,a=o);const l=new Ie(n,this._hasCheckboxes,e=>this._onButtonTriggered.fire(e),this._elementChecked,s,a);if(this._itemElements.push(l),t)return t.children.push(l),i;r=l}return i.push(r),i},new Array),this._setElementsToTree(this._elementTree),this.accessibilityService.isScreenReaderOptimized()&&setTimeout(()=>{const e=this._tree.getHTMLElement().querySelector(".monaco-list-row.focused"),t=e?.parentNode;if(e&&t){const i=e.nextSibling;e.remove(),t.insertBefore(e,i)}},0)}setFocusedElements(e){const t=e.map(e=>this._itemElements.find(t=>t.item===e)).filter(e=>!!e).filter(e=>!e.hidden);if(this._tree.setFocus(t),e.length>0){const e=this._tree.getFocus()[0];e&&this._tree.reveal(e)}}getActiveDescendant(){return this._tree.getHTMLElement().getAttribute("aria-activedescendant")}setSelectedElements(e){const t=e.map(e=>this._itemElements.find(t=>t.item===e)).filter(e=>!!e);this._tree.setSelection(t)}getCheckedElements(){return this._itemElements.filter(e=>e.checked).map(e=>e.item)}setCheckedElements(e){this._elementCheckedEventBufferer.bufferEvents(()=>{const t=new Set;for(const i of e)t.add(i);for(const e of this._itemElements)e.checked=t.has(e.item)})}focus(e){if(this._itemElements.length)switch(e===m.Fp.Second&&this._itemElements.length<2&&(e=m.Fp.First),e){case m.Fp.First:this._tree.scrollTop=0,this._tree.focusFirst(void 0,e=>e.element instanceof Ie);break;case m.Fp.Second:{this._tree.scrollTop=0;let e=!1;this._tree.focusFirst(void 0,t=>t.element instanceof Ie&&(!!e||(e=!e,!1)));break}case m.Fp.Last:this._tree.scrollTop=this._tree.scrollHeight,this._tree.focusLast(void 0,e=>e.element instanceof Ie);break;case m.Fp.Next:{const e=this._tree.getFocus();this._tree.focusNext(void 0,this._shouldLoop,void 0,e=>e.element instanceof Ie&&(this._tree.reveal(e.element),!0));const t=this._tree.getFocus();e.length&&e[0]===t[0]&&e[0]===this._itemElements[this._itemElements.length-1]&&this._onLeave.fire();break}case m.Fp.Previous:{const e=this._tree.getFocus();this._tree.focusPrevious(void 0,this._shouldLoop,void 0,e=>{if(!(e.element instanceof Ie))return!1;const t=this._tree.getParentElement(e.element);return null===t||t.children[0]!==e.element?this._tree.reveal(e.element):this._tree.reveal(t),!0});const t=this._tree.getFocus();e.length&&e[0]===t[0]&&e[0]===this._itemElements[0]&&this._onLeave.fire();break}case m.Fp.NextPage:this._tree.focusNextPage(void 0,e=>e.element instanceof Ie&&(this._tree.reveal(e.element),!0));break;case m.Fp.PreviousPage:this._tree.focusPreviousPage(void 0,e=>{if(!(e.element instanceof Ie))return!1;const t=this._tree.getParentElement(e.element);return null===t||t.children[0]!==e.element?this._tree.reveal(e.element):this._tree.reveal(t),!0});break;case m.Fp.NextSeparator:{let e=!1;const t=this._tree.getFocus()[0];this._tree.focusNext(void 0,!0,void 0,t=>{if(e)return!0;if(t.element instanceof xe)e=!0,this._separatorRenderer.isSeparatorVisible(t.element)?this._tree.reveal(t.element.children[0]):this._tree.reveal(t.element,0);else if(t.element instanceof Ie){if(t.element.separator)return this._itemRenderer.isItemWithSeparatorVisible(t.element)?this._tree.reveal(t.element):this._tree.reveal(t.element,0),!0;if(t.element===this._elementTree[0])return this._tree.reveal(t.element,0),!0}return!1}),t===this._tree.getFocus()[0]&&(this._tree.scrollTop=this._tree.scrollHeight,this._tree.focusLast(void 0,e=>e.element instanceof Ie));break}case m.Fp.PreviousSeparator:{let e,t=!!this._tree.getFocus()[0]?.separator;this._tree.focusPrevious(void 0,!0,void 0,i=>{if(i.element instanceof xe)t?e||(this._separatorRenderer.isSeparatorVisible(i.element)?this._tree.reveal(i.element):this._tree.reveal(i.element,0),e=i.element.children[0]):t=!0;else if(i.element instanceof Ie&&!e)if(i.element.separator)this._itemRenderer.isItemWithSeparatorVisible(i.element)?this._tree.reveal(i.element):this._tree.reveal(i.element,0),e=i.element;else if(i.element===this._elementTree[0])return this._tree.reveal(i.element,0),!0;return!1}),e&&this._tree.setFocus([e]);break}}}clearFocus(){this._tree.setFocus([])}domFocus(){this._tree.domFocus()}layout(e){this._tree.getHTMLElement().style.maxHeight=e?44*Math.floor(e/44)+6+"px":"",this._tree.layout()}filter(e){if(this._lastQueryString=e,!(this._sortByLabel||this._matchOnLabel||this._matchOnDescription||this._matchOnDetail))return this._tree.layout(),!1;const t=e;if((e=e.trim())&&(this.matchOnLabel||this.matchOnDescription||this.matchOnDetail)){let i;this._itemElements.forEach(s=>{let n;n="fuzzy"===this.matchOnLabelMode?this.matchOnLabel?(0,me.pz)(e,(0,me._k)(s.saneLabel))??void 0:void 0:this.matchOnLabel?function(e,t){const{text:i,iconOffsets:s}=t;if(!s||0===s.length)return qe(e,i);const n=(0,_e.NB)(i," "),r=i.length-n.length,o=qe(e,n);if(o)for(const e of o){const t=s[e.start+r]+r;e.start+=t,e.end+=t}return o}(t,(0,me._k)(s.saneLabel))??void 0:void 0;const r=this.matchOnDescription?(0,me.pz)(e,(0,me._k)(s.saneDescription||""))??void 0:void 0,o=this.matchOnDetail?(0,me.pz)(e,(0,me._k)(s.saneDetail||""))??void 0:void 0;if(n||r||o?(s.labelHighlights=n,s.descriptionHighlights=r,s.detailHighlights=o,s.hidden=!1):(s.labelHighlights=void 0,s.descriptionHighlights=void 0,s.detailHighlights=void 0,s.hidden=!s.item||!s.item.alwaysShow),s.item?s.separator=void 0:s.separator&&(s.hidden=!0),!this.sortByLabel){const e=s.index&&this._inputElements[s.index-1]||void 0;"separator"!==e?.type||e.buttons||(i=e),i&&!s.hidden&&(s.separator=i,i=void 0)}})}else this._itemElements.forEach(e=>{e.labelHighlights=void 0,e.descriptionHighlights=void 0,e.detailHighlights=void 0,e.hidden=!1;const t=e.index&&this._inputElements[e.index-1];e.item&&(e.separator=t&&"separator"===t.type&&!t.buttons?t:void 0)});return this._setElementsToTree(this._sortByLabel&&e?this._itemElements:this._elementTree),this._tree.layout(),!0}toggleCheckbox(){this._elementCheckedEventBufferer.bufferEvents(()=>{const e=this._tree.getFocus().filter(e=>e instanceof Ie),t=this._allVisibleChecked(e);for(const i of e)i.checkboxDisabled||(i.checked=!t)})}style(e){this._tree.style(e)}toggleHover(){const e=this._tree.getFocus()[0];if(!(e?.saneTooltip&&e instanceof Ie))return;if(this._lastHover&&!this._lastHover.isDisposed)return void this._lastHover.dispose();this.showHover(e);const t=new u.Cm;t.add(this._tree.onDidChangeFocus(e=>{e.elements[0]instanceof Ie&&this.showHover(e.elements[0])})),this._lastHover&&t.add(this._lastHover),this._elementDisposable.add(t)}_setElementsToTree(e){const t=new Array;for(const i of e)i instanceof xe?t.push({element:i,collapsible:!1,collapsed:!1,children:i.children.map(e=>({element:e,collapsible:!1,collapsed:!1}))}):t.push({element:i,collapsible:!1,collapsed:!1});this._tree.setChildren(null,t)}_allVisibleChecked(e,t=!0){for(let i=0,s=e.length;i<s;i++){const s=e[i];if(!s.hidden){if(!s.checked)return!1;t=!0}}return t}_updateCheckedObservables(){(0,fe.Rn)(e=>{this._allVisibleCheckedObservable.set(this._allVisibleChecked(this._itemElements,!1),e);const t=this._itemElements.filter(e=>e.checked).length;this._checkedCountObservable.set(t,e),this._checkedElementsObservable.set(this.getCheckedElements(),e)})}showHover(e){this._lastHover&&!this._lastHover.isDisposed&&(this.hoverDelegate.onDidHideHover?.(),this._lastHover?.dispose()),e.element&&e.saneTooltip&&(this._lastHover=this.hoverDelegate.showHover({content:e.saneTooltip,target:e.element,linkHandler:e=>{this.linkOpenerDelegate(e)},appearance:{showPointer:!0},container:this._container,position:{hoverPosition:1}},!1))}};function qe(e,t){const i=t.toLowerCase().indexOf(e.toLowerCase());return-1!==i?[{start:i,end:i+e.length}]:null}Ce([he.B],Fe.prototype,"onDidChangeFocus",null),Ce([he.B],Fe.prototype,"onDidChangeSelection",null),Fe=Ce([Se(4,a._Y),Se(5,ye.j)],Fe);var Me=i(67659),Pe=i(71320);const He={weight:200,when:o.M$.and(o.M$.equals(R,"quickPick"),U),metadata:{description:(0,x.kg)("quickPick","Used while in the context of the quick pick. If you change one keybinding for this command, you should change all of the other keybindings (modifier variants) of this command as well.")}};function Ne(e,t={}){Pe.f.registerCommandAndKeybindingRule({...He,...e,secondary:Ve(e.primary,e.secondary??[],t)})}const Ke=D.zx?256:2048;function Ve(e,t,i={}){return i.withAltMod&&t.push(512+e),i.withCtrlMod&&(t.push(Ke+e),i.withAltMod&&t.push(512+Ke+e)),i.withCmdMod&&D.zx&&(t.push(2048+e),i.withCtrlMod&&t.push(2304+e),i.withAltMod&&(t.push(2560+e),i.withCtrlMod&&t.push(2816+e))),t}function Ue(e,t){return i=>{const s=i.get(m.GK).currentQuickInput;if(s)return t&&s.quickNavigate?s.focus(t):s.focus(e)}}Ne({id:"quickInput.pageNext",primary:12,handler:Ue(m.Fp.NextPage)},{withAltMod:!0,withCtrlMod:!0,withCmdMod:!0}),Ne({id:"quickInput.pagePrevious",primary:11,handler:Ue(m.Fp.PreviousPage)},{withAltMod:!0,withCtrlMod:!0,withCmdMod:!0}),Ne({id:"quickInput.first",primary:Ke+14,handler:Ue(m.Fp.First)},{withAltMod:!0,withCmdMod:!0}),Ne({id:"quickInput.last",primary:Ke+13,handler:Ue(m.Fp.Last)},{withAltMod:!0,withCmdMod:!0}),Ne({id:"quickInput.next",primary:18,handler:Ue(m.Fp.Next)},{withCtrlMod:!0}),Ne({id:"quickInput.previous",primary:16,handler:Ue(m.Fp.Previous)},{withCtrlMod:!0});const Re=(0,x.kg)("quickInput.nextSeparatorWithQuickAccessFallback","If we're in quick access mode, this will navigate to the next item. If we are not in quick access mode, this will navigate to the next separator."),Qe=(0,x.kg)("quickInput.previousSeparatorWithQuickAccessFallback","If we're in quick access mode, this will navigate to the previous item. If we are not in quick access mode, this will navigate to the previous separator.");D.zx?(Ne({id:"quickInput.nextSeparatorWithQuickAccessFallback",primary:2066,handler:Ue(m.Fp.NextSeparator,m.Fp.Next),metadata:{description:Re}}),Ne({id:"quickInput.nextSeparator",primary:2578,secondary:[2322],handler:Ue(m.Fp.NextSeparator)},{withCtrlMod:!0}),Ne({id:"quickInput.previousSeparatorWithQuickAccessFallback",primary:2064,handler:Ue(m.Fp.PreviousSeparator,m.Fp.Previous),metadata:{description:Qe}}),Ne({id:"quickInput.previousSeparator",primary:2576,secondary:[2320],handler:Ue(m.Fp.PreviousSeparator)},{withCtrlMod:!0})):(Ne({id:"quickInput.nextSeparatorWithQuickAccessFallback",primary:530,handler:Ue(m.Fp.NextSeparator,m.Fp.Next),metadata:{description:Re}}),Ne({id:"quickInput.nextSeparator",primary:2578,handler:Ue(m.Fp.NextSeparator)}),Ne({id:"quickInput.previousSeparatorWithQuickAccessFallback",primary:528,handler:Ue(m.Fp.PreviousSeparator,m.Fp.Previous),metadata:{description:Qe}}),Ne({id:"quickInput.previousSeparator",primary:2576,handler:Ue(m.Fp.PreviousSeparator)})),Ne({id:"quickInput.acceptInBackground",when:o.M$.and(He.when,o.M$.or(Me.J7.negate(),G)),primary:17,weight:250,handler:e=>{const t=e.get(m.GK).currentQuickInput;t?.accept(!0)}},{withAltMod:!0,withCtrlMod:!0,withCmdMod:!0});var We,$e=function(e,t){return function(i,s){t(i,s,e)}};const Ge=f.$;let je=class extends u.jG{static{We=this}static{this.MAX_WIDTH=600}get currentQuickInput(){return this.controller??void 0}get container(){return this._container}constructor(e,t,i,s){super(),this.options=e,this.layoutService=t,this.instantiationService=i,this.contextKeyService=s,this.enabled=!0,this.onDidAcceptEmitter=this._register(new r.vl),this.onDidCustomEmitter=this._register(new r.vl),this.onDidTriggerButtonEmitter=this._register(new r.vl),this.keyMods={ctrlCmd:!1,alt:!1},this.controller=null,this.onShowEmitter=this._register(new r.vl),this.onShow=this.onShowEmitter.event,this.onHideEmitter=this._register(new r.vl),this.onHide=this.onHideEmitter.event,this.inQuickInputContext=V.bindTo(this.contextKeyService),this.quickInputTypeContext=Q.bindTo(this.contextKeyService),this.endOfQuickInputBoxContext=$.bindTo(this.contextKeyService),this.idPrefix=e.idPrefix,this._container=e.container,this.styles=e.styles,this._register(r.Jh.runAndSubscribe(f.Iv,({window:e,disposables:t})=>this.registerKeyModsListeners(e,t),{window:ae.G,disposables:this._store})),this._register(f.q3(e=>{this.ui&&f.zk(this.ui.container)===e&&(this.reparentUI(this.layoutService.mainContainer),this.layout(this.layoutService.mainContainerDimension,this.layoutService.mainContainerOffset.quickPickTop))}))}registerKeyModsListeners(e,t){const i=e=>{this.keyMods.ctrlCmd=e.ctrlKey||e.metaKey,this.keyMods.alt=e.altKey};for(const s of[f.Bx.KEY_DOWN,f.Bx.KEY_UP,f.Bx.MOUSE_DOWN])t.add(f.ko(e,s,i,!0))}getUI(e){if(this.ui)return e&&f.zk(this._container)!==f.zk(this.layoutService.activeContainer)&&(this.reparentUI(this.layoutService.activeContainer),this.layout(this.layoutService.activeContainerDimension,this.layoutService.activeContainerOffset.quickPickTop)),this.ui;const t=f.BC(this._container,Ge(".quick-input-widget.show-file-icons"));t.tabIndex=-1,t.style.display="none";const i=f.li(t),s=f.BC(t,Ge(".quick-input-titlebar")),n=this._register(new Z.E(s,{hoverDelegate:this.options.hoverDelegate}));n.domNode.classList.add("quick-input-left-action-bar");const r=f.BC(s,Ge(".quick-input-title")),o=this._register(new Z.E(s,{hoverDelegate:this.options.hoverDelegate}));o.domNode.classList.add("quick-input-right-action-bar");const a=f.BC(t,Ge(".quick-input-header")),l=f.BC(a,Ge("input.quick-input-check-all"));l.type="checkbox",l.setAttribute("aria-label",(0,x.kg)("quickInput.checkAll","Toggle all checkboxes")),this._register(f.b2(l,f.Bx.CHANGE,e=>{const t=l.checked;L.setAllVisibleChecked(t)})),this._register(f.ko(l,f.Bx.CLICK,e=>{(e.x||e.y)&&d.setFocus()}));const h=f.BC(a,Ge(".quick-input-description")),c=f.BC(a,Ge(".quick-input-and-message")),u=f.BC(c,Ge(".quick-input-filter")),d=this._register(new re(u,this.styles.inputBox,this.styles.toggle));d.setAttribute("aria-describedby",`${this.idPrefix}message`);const p=f.BC(u,Ge(".quick-input-visible-count"));p.setAttribute("aria-live","polite"),p.setAttribute("aria-atomic","true");const g=new te.x(p,{countFormat:(0,x.kg)({key:"quickInput.visibleCount",comment:["This tells the user how many items are shown in a list of items to select from. The items can be anything. Currently not visible, but read by screen readers."]},"{0} Results")},this.styles.countBadge),v=f.BC(u,Ge(".quick-input-count"));v.setAttribute("aria-live","polite");const _=new te.x(v,{countFormat:(0,x.kg)({key:"quickInput.countSelected",comment:["This tells the user how many items are selected in a list of items to select from. The items can be anything."]},"{0} Selected")},this.styles.countBadge),b=this._register(new Z.E(a,{hoverDelegate:this.options.hoverDelegate}));b.domNode.classList.add("quick-input-inline-action-bar");const k=f.BC(a,Ge(".quick-input-action")),y=this._register(new ee.$(k,this.styles.button));y.label=(0,x.kg)("ok","OK"),this._register(y.onDidClick(e=>{this.onDidAcceptEmitter.fire()}));const C=f.BC(a,Ge(".quick-input-action")),S=this._register(new ee.$(C,{...this.styles.button,supportIcons:!0}));S.label=(0,x.kg)("custom","Custom"),this._register(S.onDidClick(e=>{this.onDidCustomEmitter.fire()}));const w=f.BC(c,Ge(`#${this.idPrefix}message.quick-input-message`)),D=this._register(new ie.z(t,this.styles.progressBar));D.getContainer().classList.add("quick-input-progress");const I=f.BC(t,Ge(".quick-input-html-widget"));I.tabIndex=-1;const B=f.BC(t,Ge(".quick-input-description")),E=this.idPrefix+"list",L=this._register(this.instantiationService.createInstance(Fe,t,this.options.hoverDelegate,this.options.linkOpenerDelegate,E));d.setAttribute("aria-controls",E),this._register(L.onDidChangeFocus(()=>{d.setAttribute("aria-activedescendant",L.getActiveDescendant()??"")})),this._register(L.onChangedAllVisibleChecked(e=>{l.checked=e})),this._register(L.onChangedVisibleCount(e=>{g.setCount(e)})),this._register(L.onChangedCheckedCount(e=>{_.setCount(e)})),this._register(L.onLeave(()=>{setTimeout(()=>{this.controller&&(d.setFocus(),this.controller instanceof J&&this.controller.canSelectMany&&L.clearFocus())},0)}));const T=f.w5(t);return this._register(T),this._register(f.ko(t,f.Bx.FOCUS,e=>{const t=this.getUI();if(f.QX(e.relatedTarget,t.inputContainer)){const e=t.inputBox.isSelectionAtEnd();this.endOfQuickInputBoxContext.get()!==e&&this.endOfQuickInputBoxContext.set(e)}f.QX(e.relatedTarget,t.container)||(this.inQuickInputContext.set(!0),this.previousFocusElement=f.sb(e.relatedTarget)?e.relatedTarget:void 0)},!0)),this._register(T.onDidBlur(()=>{this.getUI().ignoreFocusOut||this.options.ignoreFocusOut()||this.hide(m.kF.Blur),this.inQuickInputContext.set(!1),this.endOfQuickInputBoxContext.set(!1),this.previousFocusElement=void 0})),this._register(d.onKeyDown(e=>{const t=this.getUI().inputBox.isSelectionAtEnd();this.endOfQuickInputBoxContext.get()!==t&&this.endOfQuickInputBoxContext.set(t)})),this._register(f.ko(t,f.Bx.FOCUS,e=>{d.setFocus()})),this._register(f.b2(t,f.Bx.KEY_DOWN,e=>{if(!f.QX(e.target,I))switch(e.keyCode){case 3:f.fs.stop(e,!0),this.enabled&&this.onDidAcceptEmitter.fire();break;case 9:f.fs.stop(e,!0),this.hide(m.kF.Gesture);break;case 2:if(!e.altKey&&!e.ctrlKey&&!e.metaKey){const i=[".quick-input-list .monaco-action-bar .always-visible",".quick-input-list-entry:hover .monaco-action-bar",".monaco-list-row.focused .monaco-action-bar"];if(t.classList.contains("show-checkboxes")?i.push("input"):i.push("input[type=text]"),this.getUI().list.displayed&&i.push(".monaco-list"),this.getUI().message&&i.push(".quick-input-message a"),this.getUI().widget){if(f.QX(e.target,this.getUI().widget))break;i.push(".quick-input-html-widget")}const s=t.querySelectorAll(i.join(", "));e.shiftKey&&e.target===s[0]?(f.fs.stop(e,!0),L.clearFocus()):!e.shiftKey&&f.QX(e.target,s[s.length-1])&&(f.fs.stop(e,!0),s[0].focus())}break;case 10:e.ctrlKey&&(f.fs.stop(e,!0),this.getUI().list.toggleHover())}})),this.ui={container:t,styleSheet:i,leftActionBar:n,titleBar:s,title:r,description1:B,description2:h,widget:I,rightActionBar:o,inlineActionBar:b,checkAll:l,inputContainer:c,filterContainer:u,inputBox:d,visibleCountContainer:p,visibleCount:g,countContainer:v,count:_,okContainer:k,ok:y,message:w,customButtonContainer:C,customButton:S,list:L,progressBar:D,onDidAccept:this.onDidAcceptEmitter.event,onDidCustom:this.onDidCustomEmitter.event,onDidTriggerButton:this.onDidTriggerButtonEmitter.event,ignoreFocusOut:!1,keyMods:this.keyMods,show:e=>this.show(e),hide:()=>this.hide(),setVisibilities:e=>this.setVisibilities(e),setEnabled:e=>this.setEnabled(e),setContextKey:e=>this.options.setContextKey(e),linkOpenerDelegate:e=>this.options.linkOpenerDelegate(e)},this.updateStyles(),this.ui}reparentUI(e){this.ui&&(this._container=e,f.BC(this._container,this.ui.container))}pick(e,t={},i=n.XO.None){return new Promise((s,n)=>{let r=e=>{r=s,t.onKeyMods?.(o.keyMods),s(e)};if(i.isCancellationRequested)return void r(void 0);const o=this.createQuickPick({useSeparators:!0});let a;const l=[o,o.onDidAccept(()=>{if(o.canSelectMany)r(o.selectedItems.slice()),o.hide();else{const e=o.activeItems[0];e&&(r(e),o.hide())}}),o.onDidChangeActive(e=>{const i=e[0];i&&t.onDidFocus&&t.onDidFocus(i)}),o.onDidChangeSelection(e=>{if(!o.canSelectMany){const t=e[0];t&&(r(t),o.hide())}}),o.onDidTriggerItemButton(e=>t.onDidTriggerItemButton&&t.onDidTriggerItemButton({...e,removeItem:()=>{const t=o.items.indexOf(e.item);if(-1!==t){const e=o.items.slice(),i=e.splice(t,1),s=o.activeItems.filter(e=>e!==i[0]),n=o.keepScrollPosition;o.keepScrollPosition=!0,o.items=e,s&&(o.activeItems=s),o.keepScrollPosition=n}}})),o.onDidTriggerSeparatorButton(e=>t.onDidTriggerSeparatorButton?.(e)),o.onDidChangeValue(e=>{!a||e||1===o.activeItems.length&&o.activeItems[0]===a||(o.activeItems=[a])}),i.onCancellationRequested(()=>{o.hide()}),o.onDidHide(()=>{(0,u.AS)(l),r(void 0)})];o.title=t.title,t.value&&(o.value=t.value),o.canSelectMany=!!t.canPickMany,o.placeholder=t.placeHolder,o.ignoreFocusOut=!!t.ignoreFocusLost,o.matchOnDescription=!!t.matchOnDescription,o.matchOnDetail=!!t.matchOnDetail,o.matchOnLabel=void 0===t.matchOnLabel||t.matchOnLabel,o.quickNavigate=t.quickNavigate,o.hideInput=!!t.hideInput,o.contextKey=t.contextKey,o.busy=!0,Promise.all([e,t.activeItem]).then(([e,t])=>{a=t,o.busy=!1,o.items=e,o.canSelectMany&&(o.selectedItems=e.filter(e=>"separator"!==e.type&&e.picked)),a&&(o.activeItems=[a])}),o.show(),Promise.resolve(e).then(void 0,e=>{n(e),o.hide()})})}createQuickPick(e={useSeparators:!1}){const t=this.getUI(!0);return new J(t)}createInputBox(){const e=this.getUI(!0);return new Y(e)}show(e){const t=this.getUI(!0);this.onShowEmitter.fire();const i=this.controller;this.controller=e,i?.didHide(),this.setEnabled(!0),t.leftActionBar.clear(),t.title.textContent="",t.description1.textContent="",t.description2.textContent="",f.Ln(t.widget),t.rightActionBar.clear(),t.inlineActionBar.clear(),t.checkAll.checked=!1,t.inputBox.placeholder="",t.inputBox.password=!1,t.inputBox.showDecoration(I.A.Ignore),t.visibleCount.setCount(0),t.count.setCount(0),f.Ln(t.message),t.progressBar.stop(),t.list.setElements([]),t.list.matchOnDescription=!1,t.list.matchOnDetail=!1,t.list.matchOnLabel=!0,t.list.sortByLabel=!0,t.ignoreFocusOut=!1,t.inputBox.toggles=void 0;const s=this.options.backKeybindingLabel();j.tooltip=s?(0,x.kg)("quickInput.backWithKeybinding","Back ({0})",s):(0,x.kg)("quickInput.back","Back"),t.container.style.display="",this.updateLayout(),t.inputBox.setFocus(),this.quickInputTypeContext.set(e.type)}isVisible(){return!!this.ui&&"none"!==this.ui.container.style.display}setVisibilities(e){const t=this.getUI();t.title.style.display=e.title?"":"none",t.description1.style.display=e.description&&(e.inputBox||e.checkAll)?"":"none",t.description2.style.display=!e.description||e.inputBox||e.checkAll?"none":"",t.checkAll.style.display=e.checkAll?"":"none",t.inputContainer.style.display=e.inputBox?"":"none",t.filterContainer.style.display=e.inputBox?"":"none",t.visibleCountContainer.style.display=e.visibleCount?"":"none",t.countContainer.style.display=e.count?"":"none",t.okContainer.style.display=e.ok?"":"none",t.customButtonContainer.style.display=e.customButton?"":"none",t.message.style.display=e.message?"":"none",t.progressBar.getContainer().style.display=e.progressBar?"":"none",t.list.displayed=!!e.list,t.container.classList.toggle("show-checkboxes",!!e.checkBox),t.container.classList.toggle("hidden-input",!e.inputBox&&!e.description),this.updateLayout()}setEnabled(e){if(e!==this.enabled){this.enabled=e;for(const t of this.getUI().leftActionBar.viewItems)t.action.enabled=e;for(const t of this.getUI().rightActionBar.viewItems)t.action.enabled=e;this.getUI().checkAll.disabled=!e,this.getUI().inputBox.enabled=e,this.getUI().ok.enabled=e,this.getUI().list.enabled=e}}hide(e){const t=this.controller;if(!t)return;t.willHide(e);const i=this.ui?.container,s=i&&!f.nR(i);if(this.controller=null,this.onHideEmitter.fire(),i&&(i.style.display="none"),!s){let e=this.previousFocusElement;for(;e&&!e.offsetParent;)e=e.parentElement??void 0;e?.offsetParent?(e.focus(),this.previousFocusElement=void 0):this.options.returnFocus()}t.didHide(e)}layout(e,t){this.dimension=e,this.titleBarOffset=t,this.updateLayout()}updateLayout(){if(this.ui&&this.isVisible()){this.ui.container.style.top=`${this.titleBarOffset}px`;const e=this.ui.container.style,t=Math.min(.62*this.dimension.width,We.MAX_WIDTH);e.width=t+"px",e.marginLeft="-"+t/2+"px",this.ui.inputBox.layout(),this.ui.list.layout(this.dimension&&.4*this.dimension.height)}}applyStyles(e){this.styles=e,this.updateStyles()}updateStyles(){if(this.ui){const{quickInputTitleBackground:e,quickInputBackground:t,quickInputForeground:i,widgetBorder:s,widgetShadow:n}=this.styles.widget;this.ui.titleBar.style.backgroundColor=e??"",this.ui.container.style.backgroundColor=t??"",this.ui.container.style.color=i??"",this.ui.container.style.border=s?`1px solid ${s}`:"",this.ui.container.style.boxShadow=n?`0 0 8px 2px ${n}`:"",this.ui.list.style(this.styles.list);const r=[];this.styles.pickerGroup.pickerGroupBorder&&r.push(`.quick-input-list .quick-input-list-entry { border-top-color:  ${this.styles.pickerGroup.pickerGroupBorder}; }`),this.styles.pickerGroup.pickerGroupForeground&&r.push(`.quick-input-list .quick-input-list-separator { color:  ${this.styles.pickerGroup.pickerGroupForeground}; }`),this.styles.pickerGroup.pickerGroupForeground&&r.push(".quick-input-list .quick-input-list-separator-as-item { color: var(--vscode-descriptionForeground); }"),(this.styles.keybindingLabel.keybindingLabelBackground||this.styles.keybindingLabel.keybindingLabelBorder||this.styles.keybindingLabel.keybindingLabelBottomBorder||this.styles.keybindingLabel.keybindingLabelShadow||this.styles.keybindingLabel.keybindingLabelForeground)&&(r.push(".quick-input-list .monaco-keybinding > .monaco-keybinding-key {"),this.styles.keybindingLabel.keybindingLabelBackground&&r.push(`background-color: ${this.styles.keybindingLabel.keybindingLabelBackground};`),this.styles.keybindingLabel.keybindingLabelBorder&&r.push(`border-color: ${this.styles.keybindingLabel.keybindingLabelBorder};`),this.styles.keybindingLabel.keybindingLabelBottomBorder&&r.push(`border-bottom-color: ${this.styles.keybindingLabel.keybindingLabelBottomBorder};`),this.styles.keybindingLabel.keybindingLabelShadow&&r.push(`box-shadow: inset 0 -1px 0 ${this.styles.keybindingLabel.keybindingLabelShadow};`),this.styles.keybindingLabel.keybindingLabelForeground&&r.push(`color: ${this.styles.keybindingLabel.keybindingLabelForeground};`),r.push("}"));const o=r.join("\n");o!==this.ui.styleSheet.textContent&&(this.ui.styleSheet.textContent=o)}}};je=We=function(e,t,i,s){var n,r=arguments.length,o=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(r<3?n(o):r>3?n(t,i,o):n(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o}([$e(1,l.x),$e(2,a._Y),$e(3,o.fN)],je);var ze=function(e,t){return function(i,s){t(i,s,e)}};let Je=class extends y.lR{get controller(){return this._controller||(this._controller=this._register(this.createController())),this._controller}get hasController(){return!!this._controller}get currentQuickInput(){return this.controller.currentQuickInput}get quickAccess(){return this._quickAccess||(this._quickAccess=this._register(this.instantiationService.createInstance(_))),this._quickAccess}constructor(e,t,i,s,n){super(i),this.instantiationService=e,this.contextKeyService=t,this.layoutService=s,this.configurationService=n,this._onShow=this._register(new r.vl),this._onHide=this._register(new r.vl),this.contexts=new Map}createController(e=this.layoutService,t){const i={idPrefix:"quickInput_",container:e.activeContainer,ignoreFocusOut:()=>!1,backKeybindingLabel:()=>{},setContextKey:e=>this.setContextKey(e),linkOpenerDelegate:e=>{this.instantiationService.invokeFunction(t=>{t.get(h.C).open(e,{allowCommands:!0,fromUserGesture:!0})})},returnFocus:()=>e.focus(),styles:this.computeStyles(),hoverDelegate:this._register(this.instantiationService.createInstance(X))},s=this._register(this.instantiationService.createInstance(je,{...i,...t}));return s.layout(e.activeContainerDimension,e.activeContainerOffset.quickPickTop),this._register(e.onDidLayoutActiveContainer(t=>{(0,f.zk)(e.activeContainer)===(0,f.zk)(s.container)&&s.layout(t,e.activeContainerOffset.quickPickTop)})),this._register(e.onDidChangeActiveContainer(()=>{s.isVisible()||s.layout(e.activeContainerDimension,e.activeContainerOffset.quickPickTop)})),this._register(s.onShow(()=>{this.resetContextKeys(),this._onShow.fire()})),this._register(s.onHide(()=>{this.resetContextKeys(),this._onHide.fire()})),s}setContextKey(e){let t;e&&(t=this.contexts.get(e),t||(t=new o.N1(e,!1).bindTo(this.contextKeyService),this.contexts.set(e,t))),t&&t.get()||(this.resetContextKeys(),t?.set(!0))}resetContextKeys(){this.contexts.forEach(e=>{e.get()&&e.reset()})}pick(e,t,i=n.XO.None){return this.controller.pick(e,t,i)}createQuickPick(e={useSeparators:!1}){return this.controller.createQuickPick(e)}createInputBox(){return this.controller.createInputBox()}updateStyles(){this.hasController&&this.controller.applyStyles(this.computeStyles())}computeStyles(){return{widget:{quickInputBackground:(0,k.GuP)(k.ELA),quickInputForeground:(0,k.GuP)(k.HJZ),quickInputTitleBackground:(0,k.GuP)(k.er1),widgetBorder:(0,k.GuP)(k.DSL),widgetShadow:(0,k.GuP)(k.f9l)},inputBox:b.ho,toggle:b.mk,countBadge:b.m$,button:b.cv,progressBar:b.oJ,keybindingLabel:b.ir,list:(0,b.t8)({listBackground:k.ELA,listFocusBackground:k.AlL,listFocusForeground:k.nH,listInactiveFocusForeground:k.nH,listInactiveSelectionIconForeground:k.c7i,listInactiveFocusBackground:k.AlL,listFocusOutline:k.buw,listInactiveFocusOutline:k.buw}),pickerGroup:{pickerGroupBorder:(0,k.GuP)(k.iwL),pickerGroupForeground:(0,k.GuP)(k.NBf)}}}};Je=function(e,t,i,s){var n,r=arguments.length,o=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(r<3?n(o):r>3?n(t,i,o):n(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o}([ze(0,a._Y),ze(1,o.fN),ze(2,y.Gy),ze(3,l.x),ze(4,P.pG)],Je)},28976:(e,t,i)=>{i.d(t,{O:()=>r});var s=i(72667),n=i(69708);const r=new class{constructor(){this.data=new Map}add(e,t){s.ok(n.Kg(e)),s.ok(n.Gv(t)),s.ok(!this.data.has(e),"There is already an extension with this id"),this.data.set(e,t)}as(e){return this.data.get(e)||null}}},41796:(e,t,i)=>{i.d(t,{k:()=>s});const s=(0,i(35184).u1)("telemetryService")},58144:(e,t,i)=>{i.d(t,{C1:()=>o,Fp:()=>a,GK:()=>h,Ym:()=>n,dH:()=>l,kF:()=>r});var s=i(35184);const n={ctrlCmd:!1,alt:!1};var r,o,a,l;!function(e){e[e.Blur=1]="Blur",e[e.Gesture=2]="Gesture",e[e.Other=3]="Other"}(r||(r={})),function(e){e[e.NONE=0]="NONE",e[e.FIRST=1]="FIRST",e[e.SECOND=2]="SECOND",e[e.LAST=3]="LAST"}(o||(o={})),function(e){e[e.First=1]="First",e[e.Second=2]="Second",e[e.Last=3]="Last",e[e.Next=4]="Next",e[e.Previous=5]="Previous",e[e.NextPage=6]="NextPage",e[e.PreviousPage=7]="PreviousPage",e[e.NextSeparator=8]="NextSeparator",e[e.PreviousSeparator=9]="PreviousSeparator"}(a||(a={})),function(e){e[e.Title=1]="Title",e[e.Inline=2]="Inline"}(l||(l={})),new class{constructor(e){this.options=e}};const h=(0,s.u1)("quickInputService")},82800:(e,t,i)=>{i.d(t,{CS:()=>h,pc:()=>d});var s=i(22573),n=i(32293),r=i(69708),o=i(71277),a=i(35184);const l="__$__targetStorageMarker",h=(0,a.u1)("storageService");var c;!function(e){e[e.NONE=0]="NONE",e[e.SHUTDOWN=1]="SHUTDOWN"}(c||(c={}));class u extends n.jG{static{this.DEFAULT_FLUSH_INTERVAL=6e4}constructor(e={flushInterval:u.DEFAULT_FLUSH_INTERVAL}){super(),this.options=e,this._onDidChangeValue=this._register(new s.fV),this._onDidChangeTarget=this._register(new s.fV),this._onWillSaveState=this._register(new s.vl),this.onWillSaveState=this._onWillSaveState.event,this._workspaceKeyTargets=void 0,this._profileKeyTargets=void 0,this._applicationKeyTargets=void 0}onDidChangeValue(e,t,i){return s.Jh.filter(this._onDidChangeValue.event,i=>i.scope===e&&(void 0===t||i.key===t),i)}emitDidChangeValue(e,t){const{key:i,external:s}=t;if(i===l){switch(e){case-1:this._applicationKeyTargets=void 0;break;case 0:this._profileKeyTargets=void 0;break;case 1:this._workspaceKeyTargets=void 0}this._onDidChangeTarget.fire({scope:e})}else this._onDidChangeValue.fire({scope:e,key:i,target:this.getKeyTargets(e)[i],external:s})}get(e,t,i){return this.getStorage(t)?.get(e,i)}getBoolean(e,t,i){return this.getStorage(t)?.getBoolean(e,i)}getNumber(e,t,i){return this.getStorage(t)?.getNumber(e,i)}store(e,t,i,s,n=!1){(0,r.z)(t)?this.remove(e,i,n):this.withPausedEmitters(()=>{this.updateKeyTarget(e,i,s),this.getStorage(i)?.set(e,t,n)})}remove(e,t,i=!1){this.withPausedEmitters(()=>{this.updateKeyTarget(e,t,void 0),this.getStorage(t)?.delete(e,i)})}withPausedEmitters(e){this._onDidChangeValue.pause(),this._onDidChangeTarget.pause();try{e()}finally{this._onDidChangeValue.resume(),this._onDidChangeTarget.resume()}}updateKeyTarget(e,t,i,s=!1){const n=this.getKeyTargets(t);"number"==typeof i?n[e]!==i&&(n[e]=i,this.getStorage(t)?.set(l,JSON.stringify(n),s)):"number"==typeof n[e]&&(delete n[e],this.getStorage(t)?.set(l,JSON.stringify(n),s))}get workspaceKeyTargets(){return this._workspaceKeyTargets||(this._workspaceKeyTargets=this.loadKeyTargets(1)),this._workspaceKeyTargets}get profileKeyTargets(){return this._profileKeyTargets||(this._profileKeyTargets=this.loadKeyTargets(0)),this._profileKeyTargets}get applicationKeyTargets(){return this._applicationKeyTargets||(this._applicationKeyTargets=this.loadKeyTargets(-1)),this._applicationKeyTargets}getKeyTargets(e){switch(e){case-1:return this.applicationKeyTargets;case 0:return this.profileKeyTargets;default:return this.workspaceKeyTargets}}loadKeyTargets(e){const t=this.getStorage(e);return t?function(e){const t=e.get(l);if(t)try{return JSON.parse(t)}catch(e){}return Object.create(null)}(t):Object.create(null)}}class d extends u{constructor(){super(),this.applicationStorage=this._register(new o.wc(new o.f8,{hint:o.Fx.STORAGE_IN_MEMORY})),this.profileStorage=this._register(new o.wc(new o.f8,{hint:o.Fx.STORAGE_IN_MEMORY})),this.workspaceStorage=this._register(new o.wc(new o.f8,{hint:o.Fx.STORAGE_IN_MEMORY})),this._register(this.workspaceStorage.onDidChangeStorage(e=>this.emitDidChangeValue(1,e))),this._register(this.profileStorage.onDidChangeStorage(e=>this.emitDidChangeValue(0,e))),this._register(this.applicationStorage.onDidChangeStorage(e=>this.emitDidChangeValue(-1,e)))}getStorage(e){switch(e){case-1:return this.applicationStorage;case 0:return this.profileStorage;default:return this.workspaceStorage}}}}}]);